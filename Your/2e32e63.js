(window.webpackJsonp=window.webpackJsonp||[]).push([[1141],{1038:function(t,e,n){"use strict";const r=(t,e)=>function(){const n=e.promiseModule,r=new Array(arguments.length);for(let i=0;i<arguments.length;i++)r[i]=arguments[i];return new n(((n,o)=>{e.errorFirst?r.push((function(t,r){if(e.multiArgs){const e=new Array(arguments.length-1);for(let i=1;i<arguments.length;i++)e[i-1]=arguments[i];t?(e.unshift(t),o(e)):n(e)}else t?o(t):n(r)})):r.push((function(t){if(e.multiArgs){const t=new Array(arguments.length-1);for(let i=0;i<arguments.length;i++)t[i]=arguments[i];n(t)}else n(t)})),t.apply(this,r)}))};t.exports=(t,e)=>{e=Object.assign({exclude:[/.+(Sync|Stream)$/],errorFirst:!0,promiseModule:Promise},e);const filter=t=>{const n=pattern=>"string"==typeof pattern?t===pattern:pattern.test(t);return e.include?e.include.some(n):!e.exclude.some(n)};let n;n="function"==typeof t?function(){return e.excludeMain?t.apply(this,arguments):r(t,e).apply(this,arguments)}:Object.create(Object.getPrototypeOf(t));for(const o in t){const c=t[o];n[o]="function"==typeof c&&filter(o)?r(c,e):c}return n}},1039:function(t,e,n){const r=n(1597),o=n(1598)();function c(t){this.currentProvider=t}function l(t){return function(){const e=this;var n=[].slice.call(arguments),r=n.pop();e.sendAsync({method:t,params:n},r)}}function h(t,e){return function(){const n=this;var r=[].slice.call(arguments),o=r.pop();r.length<t&&r.push("latest"),n.sendAsync({method:e,params:r},o)}}t.exports=c,c.prototype.getBalance=h(2,"eth_getBalance"),c.prototype.getCode=h(2,"eth_getCode"),c.prototype.getTransactionCount=h(2,"eth_getTransactionCount"),c.prototype.getStorageAt=h(3,"eth_getStorageAt"),c.prototype.call=h(2,"eth_call"),c.prototype.protocolVersion=l("eth_protocolVersion"),c.prototype.syncing=l("eth_syncing"),c.prototype.coinbase=l("eth_coinbase"),c.prototype.mining=l("eth_mining"),c.prototype.hashrate=l("eth_hashrate"),c.prototype.gasPrice=l("eth_gasPrice"),c.prototype.accounts=l("eth_accounts"),c.prototype.blockNumber=l("eth_blockNumber"),c.prototype.getBlockTransactionCountByHash=l("eth_getBlockTransactionCountByHash"),c.prototype.getBlockTransactionCountByNumber=l("eth_getBlockTransactionCountByNumber"),c.prototype.getUncleCountByBlockHash=l("eth_getUncleCountByBlockHash"),c.prototype.getUncleCountByBlockNumber=l("eth_getUncleCountByBlockNumber"),c.prototype.sign=l("eth_sign"),c.prototype.sendTransaction=l("eth_sendTransaction"),c.prototype.sendRawTransaction=l("eth_sendRawTransaction"),c.prototype.estimateGas=l("eth_estimateGas"),c.prototype.getBlockByHash=l("eth_getBlockByHash"),c.prototype.getBlockByNumber=l("eth_getBlockByNumber"),c.prototype.getTransactionByHash=l("eth_getTransactionByHash"),c.prototype.getTransactionByBlockHashAndIndex=l("eth_getTransactionByBlockHashAndIndex"),c.prototype.getTransactionByBlockNumberAndIndex=l("eth_getTransactionByBlockNumberAndIndex"),c.prototype.getTransactionReceipt=l("eth_getTransactionReceipt"),c.prototype.getUncleByBlockHashAndIndex=l("eth_getUncleByBlockHashAndIndex"),c.prototype.getUncleByBlockNumberAndIndex=l("eth_getUncleByBlockNumberAndIndex"),c.prototype.getCompilers=l("eth_getCompilers"),c.prototype.compileLLL=l("eth_compileLLL"),c.prototype.compileSolidity=l("eth_compileSolidity"),c.prototype.compileSerpent=l("eth_compileSerpent"),c.prototype.newFilter=l("eth_newFilter"),c.prototype.newBlockFilter=l("eth_newBlockFilter"),c.prototype.newPendingTransactionFilter=l("eth_newPendingTransactionFilter"),c.prototype.uninstallFilter=l("eth_uninstallFilter"),c.prototype.getFilterChanges=l("eth_getFilterChanges"),c.prototype.getFilterLogs=l("eth_getFilterLogs"),c.prototype.getLogs=l("eth_getLogs"),c.prototype.getWork=l("eth_getWork"),c.prototype.submitWork=l("eth_submitWork"),c.prototype.submitHashrate=l("eth_submitHashrate"),c.prototype.sendAsync=function(t,e){var data;this.currentProvider.sendAsync((data=t,r({id:o(),jsonrpc:"2.0",params:[]},data)),(function(t,n){if(!t&&n.error&&(t=new Error("EthQuery - RPC Error - "+n.error.message)),t)return e(t);e(null,n.result)}))}},1040:function(t,e,n){t.exports=n(1604)},1595:function(t,e,n){const r=n(1038),o=n(1596);function c(t,e){return new Promise((n=>{const r=setTimeout(n,t);r.unref&&e&&r.unref()}))}t.exports=class extends o{constructor(t={}){if(!t.provider)throw new Error("PollingBlockTracker - no provider specified.");const e=t.pollingInterval||2e4,n=t.retryTimeout||e/10,r=void 0===t.keepEventLoopActive||t.keepEventLoopActive,o=t.setSkipCacheFlag||!1;super(Object.assign({blockResetDuration:e},t)),this._provider=t.provider,this._pollingInterval=e,this._retryTimeout=n,this._keepEventLoopActive=r,this._setSkipCacheFlag=o}async checkForLatestBlock(){return await this._updateLatestBlock(),await this.getLatestBlock()}_start(){this._performSync().catch((t=>this.emit("error",t)))}async _performSync(){for(;this._isRunning;)try{await this._updateLatestBlock(),await c(this._pollingInterval,!this._keepEventLoopActive)}catch(t){const e=new Error(`PollingBlockTracker - encountered an error while attempting to update latest block:\n${t.stack}`);try{this.emit("error",e)}catch(t){console.error(e)}await c(this._retryTimeout,!this._keepEventLoopActive)}}async _updateLatestBlock(){const t=await this._fetchLatestBlock();this._newPotentialLatest(t)}async _fetchLatestBlock(){const t={jsonrpc:"2.0",id:1,method:"eth_blockNumber",params:[]};this._setSkipCacheFlag&&(t.skipCache=!0);const e=await r((e=>this._provider.sendAsync(t,e)))();if(e.error)throw new Error(`PollingBlockTracker - encountered error fetching block:\n${e.error}`);return e.result}}},1596:function(t,e,n){n(1039),n(1038);const r=n(1599),o=(t,e)=>t+e,c=["sync","latest"];function l(t){return Number.parseInt(t,16)}t.exports=class extends r{constructor(t={}){super(),this._blockResetDuration=t.blockResetDuration||2e4,this._blockResetTimeout,this._currentBlock=null,this._isRunning=!1,this._onNewListener=this._onNewListener.bind(this),this._onRemoveListener=this._onRemoveListener.bind(this),this._resetCurrentBlock=this._resetCurrentBlock.bind(this),this._setupInternalEvents()}isRunning(){return this._isRunning}getCurrentBlock(){return this._currentBlock}async getLatestBlock(){if(this._currentBlock)return this._currentBlock;return await new Promise((t=>this.once("latest",t)))}removeAllListeners(t){t?super.removeAllListeners(t):super.removeAllListeners(),this._setupInternalEvents(),this._onRemoveListener()}_start(){}_end(){}_setupInternalEvents(){this.removeListener("newListener",this._onNewListener),this.removeListener("removeListener",this._onRemoveListener),this.on("newListener",this._onNewListener),this.on("removeListener",this._onRemoveListener)}_onNewListener(t,e){c.includes(t)&&this._maybeStart()}_onRemoveListener(t,e){this._getBlockTrackerEventCount()>0||this._maybeEnd()}_maybeStart(){this._isRunning||(this._isRunning=!0,this._cancelBlockResetTimeout(),this._start())}_maybeEnd(){this._isRunning&&(this._isRunning=!1,this._setupBlockResetTimeout(),this._end())}_getBlockTrackerEventCount(){return c.map((t=>this.listenerCount(t))).reduce(o)}_newPotentialLatest(t){const e=this._currentBlock;e&&l(t)<=l(e)||this._setCurrentBlock(t)}_setCurrentBlock(t){const e=this._currentBlock;this._currentBlock=t,this.emit("latest",t),this.emit("sync",{oldBlock:e,newBlock:t})}_setupBlockResetTimeout(){this._cancelBlockResetTimeout(),this._blockResetTimeout=setTimeout(this._resetCurrentBlock,this._blockResetDuration),this._blockResetTimeout.unref&&this._blockResetTimeout.unref()}_cancelBlockResetTimeout(){clearTimeout(this._blockResetTimeout)}_resetCurrentBlock(){this._currentBlock=null}}},1603:function(t,e,n){const r=n(593).default,o=n(1040),{createAsyncMiddleware:c}=n(1041),l=n(1611),{unsafeRandomBytes:h,incrementHexInt:d}=n(472),m=n(767);function y(t){return{hash:t.hash,parentHash:t.parentHash,sha3Uncles:t.sha3Uncles,miner:t.miner,stateRoot:t.stateRoot,transactionsRoot:t.transactionsRoot,receiptsRoot:t.receiptsRoot,logsBloom:t.logsBloom,difficulty:t.difficulty,number:t.number,gasLimit:t.gasLimit,gasUsed:t.gasUsed,nonce:t.nonce,mixHash:t.mixHash,timestamp:t.timestamp,extraData:t.extraData}}t.exports=function({blockTracker:t,provider:e}){const n={},f=l({blockTracker:t,provider:e});let k=!1;const _=new r,B=o({eth_subscribe:c((async function(r,o){if(k)throw new Error("SubscriptionManager - attempting to use after destroying");const c=r.params[0],l=h(16);let sub;switch(c){case"newHeads":sub=_({subId:l});break;case"logs":const t=r.params[1];sub=B({subId:l,filter:await f.newLogFilter(t)});break;default:throw new Error(`SubscriptionManager - unsupported subscription type "${c}"`)}return n[l]=sub,void(o.result=l);function _({subId:n}){const sub={type:c,destroy:async()=>{t.removeListener("sync",sub.update)},update:async({oldBlock:t,newBlock:r})=>{const o=r,c=d(t);(await m({provider:e,fromBlock:c,toBlock:o})).map(y).forEach((t=>{w(n,t)}))}};return t.on("sync",sub.update),sub}function B({subId:t,filter:filter}){filter.on("update",(e=>w(t,e)));return{type:c,destroy:async()=>await f.uninstallFilter(filter.idHex)}}})),eth_unsubscribe:c((async function(t,e){if(k)throw new Error("SubscriptionManager - attempting to use after destroying");const r=t.params[0],o=n[r];if(!o)return void(e.result=!1);delete n[r],await o.destroy(),e.result=!0}))});return B.destroy=function(){_.removeAllListeners();for(const t in n)n[t].destroy(),delete n[t];k=!0},{events:_,middleware:B};function w(t,e){_.emit("notification",{jsonrpc:"2.0",method:"eth_subscription",params:{subscription:t,result:e}})}}},1604:function(t,e){t.exports=function(t){return(e,n,r,o)=>{const c=t[e.method];return void 0===c?r():"function"==typeof c?c(e,n,r,o):(n.result=c,o())}}},1611:function(t,e,n){const r=n(2383).Mutex,{createAsyncMiddleware:o}=n(1041),c=n(1040),l=n(1612),h=n(1615),d=n(1616),{intToHex:m,hexToInt:y}=n(472);function f(t){return k((async(...e)=>{const filter=await t(...e);return m(filter.id)}))}function k(t){return o((async(e,n)=>{const r=await t.apply(null,e.params);n.result=r}))}function _(t,e){const n=[];for(let e in t)n.push(t[e]);return n}t.exports=function({blockTracker:t,provider:e}){let n=0,o={};const B=new r,w=function({mutex:t}){return e=>async(n,r,o,c)=>{(await t.acquire())(),e(n,r,o,c)}}({mutex:B}),v=c({eth_newFilter:w(f(R)),eth_newBlockFilter:w(f(L)),eth_newPendingTransactionFilter:w(f(T)),eth_uninstallFilter:w(k(A)),eth_getFilterChanges:w(k(C)),eth_getFilterLogs:w(k(F))}),x=async({oldBlock:t,newBlock:e})=>{if(0===o.length)return;const n=await B.acquire();try{await Promise.all(_(o).map((async filter=>{try{await filter.update({oldBlock:t,newBlock:e})}catch(t){console.error(t)}})))}catch(t){console.error(t)}n()};return v.newLogFilter=R,v.newBlockFilter=L,v.newPendingTransactionFilter=T,v.uninstallFilter=A,v.getFilterChanges=C,v.getFilterLogs=F,v.destroy=()=>{!async function(){const t=_(o).length;o={},H({prevFilterCount:t,newFilterCount:0})}()},v;async function R(t){const filter=new l({provider:e,params:t});await I(filter);return filter}async function L(){const filter=new h({provider:e});await I(filter);return filter}async function T(){const filter=new d({provider:e});await I(filter);return filter}async function C(t){const e=y(t),filter=o[e];if(!filter)throw new Error(`No filter for index "${e}"`);return filter.getChangesAndClear()}async function F(t){const e=y(t),filter=o[e];if(!filter)throw new Error(`No filter for index "${e}"`);return"log"===filter.type?results=filter.getAllResults():results=[],results}async function A(t){const e=y(t),filter=o[e],n=Boolean(filter);return n&&await async function(t){const e=_(o).length;delete o[t];const n=_(o).length;H({prevFilterCount:e,newFilterCount:n})}(e),n}async function I(filter){const e=_(o).length,r=await t.getLatestBlock();await filter.initialize({currentBlock:r}),n++,o[n]=filter,filter.id=n,filter.idHex=m(n);return H({prevFilterCount:e,newFilterCount:_(o).length}),n}function H({prevFilterCount:e,newFilterCount:n}){0===e&&n>0?t.on("sync",x):e>0&&0===n&&t.removeListener("sync",x)}}},1612:function(t,e,n){const r=n(1039),o=n(1613),c=n(1614),{bnToHex:l,hexToInt:h,incrementHexInt:d,minBlockRef:m,blockRefIsNumber:y}=n(472);t.exports=class extends c{constructor({provider:t,params:e}){super(),this.type="log",this.ethQuery=new r(t),this.params=Object.assign({fromBlock:"latest",toBlock:"latest",address:void 0,topics:[]},e),this.params.address&&(Array.isArray(this.params.address)||(this.params.address=[this.params.address]),this.params.address=this.params.address.map((address=>address.toLowerCase())))}async initialize({currentBlock:t}){let e=this.params.fromBlock;["latest","pending"].includes(e)&&(e=t),"earliest"===e&&(e="0x0"),this.params.fromBlock=e;const n=m(this.params.toBlock,t),r=Object.assign({},this.params,{toBlock:n}),o=await this._fetchLogs(r);this.addInitialResults(o)}async update({oldBlock:t,newBlock:e}){const n=e;let r;r=t?d(t):e;const o=Object.assign({},this.params,{fromBlock:r,toBlock:n}),c=(await this._fetchLogs(o)).filter((t=>this.matchLog(t)));this.addResults(c)}async _fetchLogs(t){return await o((e=>this.ethQuery.getLogs(t,e)))()}matchLog(t){if(h(this.params.fromBlock)>=h(t.blockNumber))return!1;if(y(this.params.toBlock)&&h(this.params.toBlock)<=h(t.blockNumber))return!1;const e=t.address&&t.address.toLowerCase();if(this.params.address&&e&&!this.params.address.includes(e))return!1;return this.params.topics.every(((e,n)=>{let r=t.topics[n];if(!r)return!1;r=r.toLowerCase();let o=Array.isArray(e)?e:[e];if(o.includes(null))return!0;o=o.map((t=>t.toLowerCase()));return o.includes(r)}))}}},1613:function(t,e,n){"use strict";const r=(t,e,n,r)=>function(...o){return new(0,e.promiseModule)(((c,l)=>{e.multiArgs?o.push(((...t)=>{e.errorFirst?t[0]?l(t):(t.shift(),c(t)):c(t)})):e.errorFirst?o.push(((t,e)=>{t?l(t):c(e)})):o.push(c);const h=this===n?r:this;Reflect.apply(t,h,o)}))},o=new WeakMap;t.exports=(input,t)=>{t={exclude:[/.+(?:Sync|Stream)$/],errorFirst:!0,promiseModule:Promise,...t};const e=typeof input;if(null===input||"object"!==e&&"function"!==e)throw new TypeError(`Expected \`input\` to be a \`Function\` or \`Object\`, got \`${null===input?"null":e}\``);const n=new WeakMap,c=new Proxy(input,{apply(e,o,l){const h=n.get(e);if(h)return Reflect.apply(h,o,l);const d=t.excludeMain?e:r(e,t,c,e);return n.set(e,d),Reflect.apply(d,o,l)},get(e,l){const h=e[l];if(!((e,n)=>{let r=o.get(e);if(r||(r={},o.set(e,r)),n in r)return r[n];const c=pattern=>"string"==typeof pattern||"symbol"==typeof n?n===pattern:pattern.test(n),desc=Reflect.getOwnPropertyDescriptor(e,n),l=void 0===desc||desc.writable||desc.configurable,h=(t.include?t.include.some(c):!t.exclude.some(c))&&l;return r[n]=h,h})(e,l)||h===Function.prototype[l])return h;const d=n.get(h);if(d)return d;if("function"==typeof h){const o=r(h,t,c,e);return n.set(h,o),o}return h}});return c}},1614:function(t,e,n){const r=n(766);t.exports=class extends r{constructor(){super(),this.allResults=[]}async update(){throw new Error("BaseFilterWithHistory - no update method specified")}addResults(t){this.allResults=this.allResults.concat(t),super.addResults(t)}addInitialResults(t){this.allResults=this.allResults.concat(t),super.addInitialResults(t)}getAllResults(){return this.allResults}}},1615:function(t,e,n){const r=n(766),o=n(767),{incrementHexInt:c}=n(472);t.exports=class extends r{constructor({provider:t,params:e}){super(),this.type="block",this.provider=t}async update({oldBlock:t,newBlock:e}){const n=e,r=c(t),l=(await o({provider:this.provider,fromBlock:r,toBlock:n})).map((t=>t.hash));this.addResults(l)}}},1616:function(t,e,n){const r=n(766),o=n(767),{incrementHexInt:c}=n(472);t.exports=class extends r{constructor({provider:t}){super(),this.type="tx",this.provider=t}async update({oldBlock:t}){const e=t,n=c(t),r=await o({provider:this.provider,fromBlock:n,toBlock:e}),l=[];for(const t of r)l.push(...t.transactions);this.addResults(l)}}},472:function(t,e){function n(t){return t.sort(((t,e)=>"latest"===t||"earliest"===e?1:"latest"===e||"earliest"===t?-1:r(t)-r(e)))}function r(t){return null==t?t:Number.parseInt(t,16)}function o(t){if(null==t)return t;let e=t.toString(16);return e.length%2&&(e="0"+e),"0x"+e}function c(){return Math.floor(16*Math.random()).toString(16)}t.exports={minBlockRef:function(...t){return n(t)[0]},maxBlockRef:function(...t){const e=n(t);return e[e.length-1]},sortBlockRefs:n,bnToHex:function(t){return"0x"+t.toString(16)},blockRefIsNumber:function(t){return t&&!["earliest","latest","pending"].includes(t)},hexToInt:r,incrementHexInt:function(t){if(null==t)return t;return o(r(t)+1)},intToHex:o,unsafeRandomBytes:function(t){let e="0x";for(let i=0;i<t;i++)e+=c(),e+=c();return e}}},766:function(t,e,n){const r=n(593).default;t.exports=class extends r{constructor(){super(),this.updates=[]}async initialize(){}async update(){throw new Error("BaseFilter - no update method specified")}addResults(t){this.updates=this.updates.concat(t),t.forEach((t=>this.emit("update",t)))}addInitialResults(t){}getChangesAndClear(){const t=this.updates;return this.updates=[],t}}},767:function(t,e){function n(t){return null==t?t:Number.parseInt(t,16)}function r(t){if(null==t)return t;return"0x"+t.toString(16)}t.exports=async function({provider:t,fromBlock:e,toBlock:o}){e||(e=o);const c=n(e),l=n(o),h=Array(l-c+1).fill().map(((t,e)=>c+e)).map(r);return await Promise.all(h.map((e=>function(t,e,n){return new Promise(((r,o)=>{t.sendAsync({id:1,jsonrpc:"2.0",method:e,params:n},((t,e)=>{if(t)return o(t);r(e.result)}))}))}(t,"eth_getBlockByNumber",[e,!1]))))}}}]);