(window.webpackJsonp=window.webpackJsonp||[]).push([[1114],{1129:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ensureLeftNeighbor=t.ensureSpec=t.calculateExistenceRoot=t.verifyNonExistence=t.verifyExistence=t.smtSpec=t.tendermintSpec=t.iavlSpec=void 0;const r=n(612),o=n(1840),c=n(1130);function h(e,t,n,r,o){l(e,t);const h=f(e);(0,c.ensureBytesEqual)(h,n),(0,c.ensureBytesEqual)(r,e.key),(0,c.ensureBytesEqual)(o,e.value)}function f(e){if(!e.key||!e.value)throw new Error("Existence proof needs key and value set");if(!e.leaf)throw new Error("Existence proof must start with a leaf operation");const path=e.path||[];let t=(0,o.applyLeaf)(e.leaf,e.key,e.value);for(const e of path)t=(0,o.applyInner)(e,t);return t}function l(e,t){if(!e.leaf)throw new Error("Existence proof must start with a leaf operation");if(!t.leafSpec)throw new Error("Spec must include leafSpec");if(!t.innerSpec)throw new Error("Spec must include innerSpec");(0,c.ensureLeaf)(e.leaf,t.leafSpec);const path=e.path||[];if(t.minDepth&&path.length<t.minDepth)throw new Error(`Too few inner nodes ${path.length}`);if(t.maxDepth&&path.length>t.maxDepth)throw new Error(`Too many inner nodes ${path.length}`);for(const e of path)(0,c.ensureInner)(e,t.leafSpec.prefix,t.innerSpec)}function d(e,path){const{minPrefix:t,maxPrefix:n,suffix:r}=x(e,0);for(const e of path)if(!v(e,t,n,r))throw new Error("Step not leftmost")}function y(e,path){const t=e.childOrder.length-1,{minPrefix:n,maxPrefix:r,suffix:o}=x(e,t);for(const e of path)if(!v(e,n,r,o))throw new Error("Step not leftmost")}function w(e,t,n){const r=[...t],o=[...n];let h=r.pop(),f=o.pop();for(;(0,c.bytesEqual)(h.prefix,f.prefix)&&(0,c.bytesEqual)(h.suffix,f.suffix);)h=r.pop(),f=o.pop();if(!function(e,t,n){const r=m(e,t),o=m(e,n);return o===r+1}(e,h,f))throw new Error("Not left neightbor at first divergent step");y(e,r),d(e,o)}function m(e,t){for(let n=0;n<e.childOrder.length;n++){const{minPrefix:r,maxPrefix:o,suffix:c}=x(e,n);if(v(t,r,o,c))return n}throw new Error("Cannot find any valid spacing for this node")}function v(e,t,n,r){return!((e.prefix||[]).length<t)&&(!((e.prefix||[]).length>n)&&(e.suffix||[]).length===r)}function x(e,t){const n=function(e,t){if(t<0||t>=e.length)throw new Error(`Invalid branch: ${t}`);return e.findIndex((e=>e===t))}(e.childOrder,t),r=n*e.childSize;return{minPrefix:r+e.minPrefixLength,maxPrefix:r+e.maxPrefixLength,suffix:(e.childOrder.length-1-n)*e.childSize}}t.iavlSpec={leafSpec:{prefix:Uint8Array.from([0]),hash:r.ics23.HashOp.SHA256,prehashValue:r.ics23.HashOp.SHA256,prehashKey:r.ics23.HashOp.NO_HASH,length:r.ics23.LengthOp.VAR_PROTO},innerSpec:{childOrder:[0,1],minPrefixLength:4,maxPrefixLength:12,childSize:33,hash:r.ics23.HashOp.SHA256}},t.tendermintSpec={leafSpec:{prefix:Uint8Array.from([0]),hash:r.ics23.HashOp.SHA256,prehashValue:r.ics23.HashOp.SHA256,prehashKey:r.ics23.HashOp.NO_HASH,length:r.ics23.LengthOp.VAR_PROTO},innerSpec:{childOrder:[0,1],minPrefixLength:1,maxPrefixLength:1,childSize:32,hash:r.ics23.HashOp.SHA256}},t.smtSpec={leafSpec:{hash:r.ics23.HashOp.SHA256,prehashKey:r.ics23.HashOp.NO_HASH,prehashValue:r.ics23.HashOp.SHA256,length:r.ics23.LengthOp.NO_PREFIX,prefix:Uint8Array.from([0])},innerSpec:{childOrder:[0,1],childSize:32,minPrefixLength:1,maxPrefixLength:1,emptyChild:new Uint8Array(32),hash:r.ics23.HashOp.SHA256},maxDepth:256},t.verifyExistence=h,t.verifyNonExistence=function(e,t,n,r){let o,f;if(e.left&&(h(e.left,t,n,e.left.key,e.left.value),o=e.left.key),e.right&&(h(e.right,t,n,e.right.key,e.right.value),f=e.right.key),!o&&!f)throw new Error("neither left nor right proof defined");if(o&&(0,c.ensureBytesBefore)(o,r),f&&(0,c.ensureBytesBefore)(r,f),!t.innerSpec)throw new Error("no inner spec");o?f?w(t.innerSpec,e.left.path,e.right.path):y(t.innerSpec,e.left.path):d(t.innerSpec,e.right.path)},t.calculateExistenceRoot=f,t.ensureSpec=l,t.ensureLeftNeighbor=w},1130:function(e,t,n){"use strict";function r(a,b){if(a.length!==b.length)throw new Error(`Different lengths ${a.length} vs ${b.length}`);for(let i=0;i<a.length;i++)if(a[i]!==b[i])throw new Error(`Arrays differ at index ${i}: ${a[i]} vs ${b[i]}`)}function o(e,t){const n=e.length<t.length?e.length:t.length;for(let i=0;i<n;i++){if(e[i]<t[i])return!0;if(e[i]>t[i])return!1}return e.length<t.length}Object.defineProperty(t,"__esModule",{value:!0}),t.bytesBefore=t.ensureBytesBefore=t.bytesEqual=t.ensureBytesEqual=t.ensureInner=t.ensureLeaf=void 0,t.ensureLeaf=function(e,t){if(e.hash!==t.hash)throw new Error(`Unexpected hashOp: ${e.hash}`);if(e.prehashKey!==t.prehashKey)throw new Error(`Unexpected prehashKey: ${e.prehashKey}`);if(e.prehashValue!==t.prehashValue)throw new Error(`Unexpected prehashValue: ${e.prehashValue}`);if(e.length!==t.length)throw new Error(`Unexpected length op: ${e.length}`);!function(e,t){if(!t||0===t.length)return;if(!e)throw new Error("Target bytes missing");r(t,e.slice(0,t.length))}(e.prefix,t.prefix)},t.ensureInner=function(e,t,n){if(e.hash!==n.hash)throw new Error(`Unexpected hashOp: ${e.hash}`);if(!e.prefix)throw new Error("No prefix set for inner node");if(function(e,t){if(!t||0===t.length)return!1;if(!e)return!1;if(e.length<=t.length)return!1;for(let i=0;i<t.length;i++)if(e[i]!==t[i])return!1;throw!0}(e.prefix,t))throw new Error("Inner node has leaf prefix");if(e.prefix.length<(n.minPrefixLength||0))throw new Error(`Prefix too short: ${e.prefix.length} bytes`);const r=(n.childOrder.length-1)*n.childSize;if(e.prefix.length>(n.maxPrefixLength||0)+r)throw new Error(`Prefix too long: ${e.prefix.length} bytes`)},t.ensureBytesEqual=r,t.bytesEqual=function(a,b){if(a.length!==b.length)return!1;for(let i=0;i<a.length;i++)if(a[i]!==b[i])return!1;return!0},t.ensureBytesBefore=function(e,t){if(!o(e,t))throw new Error("first is after last")},t.bytesBefore=o},1837:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.verifyNonExistence=t.verifyExistence=t.tendermintSpec=t.iavlSpec=t.calculateExistenceRoot=t.verifyNonMembership=t.verifyMembership=t.ics23=void 0;var r=n(612);Object.defineProperty(t,"ics23",{enumerable:!0,get:function(){return r.ics23}});var o=n(1838);Object.defineProperty(t,"verifyMembership",{enumerable:!0,get:function(){return o.verifyMembership}}),Object.defineProperty(t,"verifyNonMembership",{enumerable:!0,get:function(){return o.verifyNonMembership}});var c=n(1129);Object.defineProperty(t,"calculateExistenceRoot",{enumerable:!0,get:function(){return c.calculateExistenceRoot}}),Object.defineProperty(t,"iavlSpec",{enumerable:!0,get:function(){return c.iavlSpec}}),Object.defineProperty(t,"tendermintSpec",{enumerable:!0,get:function(){return c.tendermintSpec}}),Object.defineProperty(t,"verifyExistence",{enumerable:!0,get:function(){return c.verifyExistence}}),Object.defineProperty(t,"verifyNonExistence",{enumerable:!0,get:function(){return c.verifyNonExistence}})},1838:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.batchVerifyNonMembership=t.batchVerifyMembership=t.verifyNonMembership=t.verifyMembership=void 0;const r=n(1839),o=n(1129),c=n(1130);function h(e,t,n,h,f){const l=function(e,t){const n=p=>!!p&&(0,c.bytesEqual)(t,p.key);if(n(e.exist))return e.exist;if(e.batch)return e.batch.entries.map((e=>e.exist||null)).find(n);return}((0,r.decompress)(e),h);if(!l)return!1;try{return(0,o.verifyExistence)(l,t,n,h,f),!0}catch(e){return!1}}function f(e,t,n,h){const f=function(e,t){const n=p=>!!p&&(!p.left||(0,c.bytesBefore)(p.left.key,t))&&(!p.right||(0,c.bytesBefore)(t,p.right.key));if(n(e.nonexist))return e.nonexist;if(e.batch)return e.batch.entries.map((e=>e.nonexist||null)).find(n);return}((0,r.decompress)(e),h);if(!f)return!1;try{return(0,o.verifyNonExistence)(f,t,n,h),!0}catch(e){return!1}}t.verifyMembership=h,t.verifyNonMembership=f,t.batchVerifyMembership=function(e,t,n,o){const c=(0,r.decompress)(e);for(const[e,r]of o.entries())if(!h(c,t,n,e,r))return!1;return!0},t.batchVerifyNonMembership=function(e,t,n,o){const c=(0,r.decompress)(e);for(const e of o)if(!f(c,t,n,e))return!1;return!0}},1839:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decompress=t.compress=void 0;const r=n(612);function o(e){const t=[],n=[],r=new Map;for(const o of e.entries)if(o.exist){const e={exist:c(o.exist,n,r)};t.push(e)}else{if(!o.nonexist)throw new Error("Unexpected batch entry during compress");{const e=o.nonexist,h={nonexist:{key:e.key,left:c(e.left,n,r),right:c(e.right,n,r)}};t.push(h)}}return{entries:t,lookupInners:n}}function c(e,t,n){if(!e)return;const path=e.path.map((e=>{const o=r.ics23.InnerOp.encode(e).finish();let c=n.get(o);return void 0===c&&(c=t.length,t.push(e),n.set(o,c)),c}));return{key:e.key,value:e.value,leaf:e.leaf,path:path}}function h(e){const t=e.lookupInners;return{entries:e.entries.map((e=>{if(e.exist)return{exist:f(e.exist,t)};if(e.nonexist){const n=e.nonexist;return{nonexist:{key:n.key,left:f(n.left,t),right:f(n.right,t)}}}throw new Error("Unexpected batch entry during compress")}))}}function f(e,t){if(!e)return;const{key:n,value:r,leaf:o,path:path}=e;return{key:n,value:r,leaf:o,path:(path||[]).map((e=>t[e]))}}t.compress=function(e){return e.batch?{compressed:o(e.batch)}:e},t.decompress=function(e){return e.compressed?{batch:h(e.compressed)}:e}},1840:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.doHash=t.applyInner=t.applyLeaf=void 0;const r=n(1115),o=n(1111),c=n(775),h=n(612);function f(e,t){return null==e?t:e}t.applyLeaf=function(e,t,n){if(0===t.length)throw new Error("Missing key");if(0===n.length)throw new Error("Missing value");const r=w(l(e.prehashKey),d(e.length),t),o=w(l(e.prehashValue),d(e.length),n),data=new Uint8Array([...y(e.prefix),...r,...o]);return m(l(e.hash),data)},t.applyInner=function(e,t){if(0===t.length)throw new Error("Inner op needs child value");const n=new Uint8Array([...y(e.prefix),...t,...y(e.suffix)]);return m(l(e.hash),n)};const l=e=>f(e,h.ics23.HashOp.NO_HASH),d=e=>f(e,h.ics23.LengthOp.NO_PREFIX),y=b=>f(b,new Uint8Array([]));function w(e,t,data){const n=function(e,t){if(e===h.ics23.HashOp.NO_HASH)return t;return m(e,t)}(e,data);return function(e,data){switch(e){case h.ics23.LengthOp.NO_PREFIX:return data;case h.ics23.LengthOp.VAR_PROTO:return new Uint8Array([...v(data.length),...data]);case h.ics23.LengthOp.REQUIRE_32_BYTES:if(32!==data.length)throw new Error(`Length is ${data.length}, not 32 bytes`);return data;case h.ics23.LengthOp.REQUIRE_64_BYTES:if(64!==data.length)throw new Error(`Length is ${data.length}, not 64 bytes`);return data;case h.ics23.LengthOp.FIXED32_LITTLE:return new Uint8Array([...x(data.length),...data])}throw new Error(`Unsupported lengthop: ${e}`)}(t,n)}function m(e,t){switch(e){case h.ics23.HashOp.SHA256:return(0,o.sha256)(t);case h.ics23.HashOp.SHA512:return(0,c.sha512)(t);case h.ics23.HashOp.RIPEMD160:return(0,r.ripemd160)(t);case h.ics23.HashOp.BITCOIN:return(0,r.ripemd160)((0,o.sha256)(t));case h.ics23.HashOp.SHA512_256:return(0,c.sha512_256)(t)}throw new Error(`Unsupported hashop: ${e}`)}function v(e){let t=[],n=e;for(;n>=128;){const b=n%128+128;t=[...t,b],n/=128}return t=[...t,n],new Uint8Array(t)}function x(e){const t=new Uint8Array(4);let n=e;for(let i=t.length;i>0;i--)t[Math.abs(i-t.length)]=n%256,n=Math.floor(n/256);return t}t.doHash=m},612:function(e,t,n){"use strict";var r,o,c,h=n(44),f=h.Reader,l=h.Writer,d=h.util,y=h.roots.default||(h.roots.default={});y.ics23=((c={}).HashOp=(r={},(o=Object.create(r))[r[0]="NO_HASH"]=0,o[r[1]="SHA256"]=1,o[r[2]="SHA512"]=2,o[r[3]="KECCAK"]=3,o[r[4]="RIPEMD160"]=4,o[r[5]="BITCOIN"]=5,o[r[6]="SHA512_256"]=6,o),c.LengthOp=function(){var e={},t=Object.create(e);return t[e[0]="NO_PREFIX"]=0,t[e[1]="VAR_PROTO"]=1,t[e[2]="VAR_RLP"]=2,t[e[3]="FIXED32_BIG"]=3,t[e[4]="FIXED32_LITTLE"]=4,t[e[5]="FIXED64_BIG"]=5,t[e[6]="FIXED64_LITTLE"]=6,t[e[7]="REQUIRE_32_BYTES"]=7,t[e[8]="REQUIRE_64_BYTES"]=8,t}(),c.ExistenceProof=function(){function e(e){if(this.path=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return e.prototype.key=d.newBuffer([]),e.prototype.value=d.newBuffer([]),e.prototype.leaf=null,e.prototype.path=d.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=l.create()),null!=e.key&&e.hasOwnProperty("key")&&t.uint32(10).bytes(e.key),null!=e.value&&e.hasOwnProperty("value")&&t.uint32(18).bytes(e.value),null!=e.leaf&&e.hasOwnProperty("leaf")&&y.ics23.LeafOp.encode(e.leaf,t.uint32(26).fork()).ldelim(),null!=e.path&&e.path.length)for(var i=0;i<e.path.length;++i)y.ics23.InnerOp.encode(e.path[i],t.uint32(34).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof f||(e=f.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new y.ics23.ExistenceProof;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.key=e.bytes();break;case 2:r.value=e.bytes();break;case 3:r.leaf=y.ics23.LeafOp.decode(e,e.uint32());break;case 4:r.path&&r.path.length||(r.path=[]),r.path.push(y.ics23.InnerOp.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return r},e.decodeDelimited=function(e){return e instanceof f||(e=new f(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.key&&e.hasOwnProperty("key")&&!(e.key&&"number"==typeof e.key.length||d.isString(e.key)))return"key: buffer expected";if(null!=e.value&&e.hasOwnProperty("value")&&!(e.value&&"number"==typeof e.value.length||d.isString(e.value)))return"value: buffer expected";if(null!=e.leaf&&e.hasOwnProperty("leaf")&&(t=y.ics23.LeafOp.verify(e.leaf)))return"leaf."+t;if(null!=e.path&&e.hasOwnProperty("path")){if(!Array.isArray(e.path))return"path: array expected";for(var i=0;i<e.path.length;++i){var t;if(t=y.ics23.InnerOp.verify(e.path[i]))return"path."+t}}return null},e.fromObject=function(object){if(object instanceof y.ics23.ExistenceProof)return object;var e=new y.ics23.ExistenceProof;if(null!=object.key&&("string"==typeof object.key?d.base64.decode(object.key,e.key=d.newBuffer(d.base64.length(object.key)),0):object.key.length&&(e.key=object.key)),null!=object.value&&("string"==typeof object.value?d.base64.decode(object.value,e.value=d.newBuffer(d.base64.length(object.value)),0):object.value.length&&(e.value=object.value)),null!=object.leaf){if("object"!=typeof object.leaf)throw TypeError(".ics23.ExistenceProof.leaf: object expected");e.leaf=y.ics23.LeafOp.fromObject(object.leaf)}if(object.path){if(!Array.isArray(object.path))throw TypeError(".ics23.ExistenceProof.path: array expected");e.path=[];for(var i=0;i<object.path.length;++i){if("object"!=typeof object.path[i])throw TypeError(".ics23.ExistenceProof.path: object expected");e.path[i]=y.ics23.InnerOp.fromObject(object.path[i])}}return e},e.toObject=function(e,t){t||(t={});var object={};if((t.arrays||t.defaults)&&(object.path=[]),t.defaults&&(t.bytes===String?object.key="":(object.key=[],t.bytes!==Array&&(object.key=d.newBuffer(object.key))),t.bytes===String?object.value="":(object.value=[],t.bytes!==Array&&(object.value=d.newBuffer(object.value))),object.leaf=null),null!=e.key&&e.hasOwnProperty("key")&&(object.key=t.bytes===String?d.base64.encode(e.key,0,e.key.length):t.bytes===Array?Array.prototype.slice.call(e.key):e.key),null!=e.value&&e.hasOwnProperty("value")&&(object.value=t.bytes===String?d.base64.encode(e.value,0,e.value.length):t.bytes===Array?Array.prototype.slice.call(e.value):e.value),null!=e.leaf&&e.hasOwnProperty("leaf")&&(object.leaf=y.ics23.LeafOp.toObject(e.leaf,t)),e.path&&e.path.length){object.path=[];for(var n=0;n<e.path.length;++n)object.path[n]=y.ics23.InnerOp.toObject(e.path[n],t)}return object},e.prototype.toJSON=function(){return this.constructor.toObject(this,h.util.toJSONOptions)},e}(),c.NonExistenceProof=function(){function e(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return e.prototype.key=d.newBuffer([]),e.prototype.left=null,e.prototype.right=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=l.create()),null!=e.key&&e.hasOwnProperty("key")&&t.uint32(10).bytes(e.key),null!=e.left&&e.hasOwnProperty("left")&&y.ics23.ExistenceProof.encode(e.left,t.uint32(18).fork()).ldelim(),null!=e.right&&e.hasOwnProperty("right")&&y.ics23.ExistenceProof.encode(e.right,t.uint32(26).fork()).ldelim(),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof f||(e=f.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new y.ics23.NonExistenceProof;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.key=e.bytes();break;case 2:r.left=y.ics23.ExistenceProof.decode(e,e.uint32());break;case 3:r.right=y.ics23.ExistenceProof.decode(e,e.uint32());break;default:e.skipType(7&o)}}return r},e.decodeDelimited=function(e){return e instanceof f||(e=new f(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.key&&e.hasOwnProperty("key")&&!(e.key&&"number"==typeof e.key.length||d.isString(e.key))?"key: buffer expected":null!=e.left&&e.hasOwnProperty("left")&&(t=y.ics23.ExistenceProof.verify(e.left))?"left."+t:null!=e.right&&e.hasOwnProperty("right")&&(t=y.ics23.ExistenceProof.verify(e.right))?"right."+t:null;var t},e.fromObject=function(object){if(object instanceof y.ics23.NonExistenceProof)return object;var e=new y.ics23.NonExistenceProof;if(null!=object.key&&("string"==typeof object.key?d.base64.decode(object.key,e.key=d.newBuffer(d.base64.length(object.key)),0):object.key.length&&(e.key=object.key)),null!=object.left){if("object"!=typeof object.left)throw TypeError(".ics23.NonExistenceProof.left: object expected");e.left=y.ics23.ExistenceProof.fromObject(object.left)}if(null!=object.right){if("object"!=typeof object.right)throw TypeError(".ics23.NonExistenceProof.right: object expected");e.right=y.ics23.ExistenceProof.fromObject(object.right)}return e},e.toObject=function(e,t){t||(t={});var object={};return t.defaults&&(t.bytes===String?object.key="":(object.key=[],t.bytes!==Array&&(object.key=d.newBuffer(object.key))),object.left=null,object.right=null),null!=e.key&&e.hasOwnProperty("key")&&(object.key=t.bytes===String?d.base64.encode(e.key,0,e.key.length):t.bytes===Array?Array.prototype.slice.call(e.key):e.key),null!=e.left&&e.hasOwnProperty("left")&&(object.left=y.ics23.ExistenceProof.toObject(e.left,t)),null!=e.right&&e.hasOwnProperty("right")&&(object.right=y.ics23.ExistenceProof.toObject(e.right,t)),object},e.prototype.toJSON=function(){return this.constructor.toObject(this,h.util.toJSONOptions)},e}(),c.CommitmentProof=function(){function e(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}var t;return e.prototype.exist=null,e.prototype.nonexist=null,e.prototype.batch=null,e.prototype.compressed=null,Object.defineProperty(e.prototype,"proof",{get:d.oneOfGetter(t=["exist","nonexist","batch","compressed"]),set:d.oneOfSetter(t)}),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=l.create()),null!=e.exist&&e.hasOwnProperty("exist")&&y.ics23.ExistenceProof.encode(e.exist,t.uint32(10).fork()).ldelim(),null!=e.nonexist&&e.hasOwnProperty("nonexist")&&y.ics23.NonExistenceProof.encode(e.nonexist,t.uint32(18).fork()).ldelim(),null!=e.batch&&e.hasOwnProperty("batch")&&y.ics23.BatchProof.encode(e.batch,t.uint32(26).fork()).ldelim(),null!=e.compressed&&e.hasOwnProperty("compressed")&&y.ics23.CompressedBatchProof.encode(e.compressed,t.uint32(34).fork()).ldelim(),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof f||(e=f.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new y.ics23.CommitmentProof;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.exist=y.ics23.ExistenceProof.decode(e,e.uint32());break;case 2:r.nonexist=y.ics23.NonExistenceProof.decode(e,e.uint32());break;case 3:r.batch=y.ics23.BatchProof.decode(e,e.uint32());break;case 4:r.compressed=y.ics23.CompressedBatchProof.decode(e,e.uint32());break;default:e.skipType(7&o)}}return r},e.decodeDelimited=function(e){return e instanceof f||(e=new f(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";var t={};if(null!=e.exist&&e.hasOwnProperty("exist")&&(t.proof=1,n=y.ics23.ExistenceProof.verify(e.exist)))return"exist."+n;if(null!=e.nonexist&&e.hasOwnProperty("nonexist")){if(1===t.proof)return"proof: multiple values";if(t.proof=1,n=y.ics23.NonExistenceProof.verify(e.nonexist))return"nonexist."+n}if(null!=e.batch&&e.hasOwnProperty("batch")){if(1===t.proof)return"proof: multiple values";if(t.proof=1,n=y.ics23.BatchProof.verify(e.batch))return"batch."+n}if(null!=e.compressed&&e.hasOwnProperty("compressed")){if(1===t.proof)return"proof: multiple values";var n;if(t.proof=1,n=y.ics23.CompressedBatchProof.verify(e.compressed))return"compressed."+n}return null},e.fromObject=function(object){if(object instanceof y.ics23.CommitmentProof)return object;var e=new y.ics23.CommitmentProof;if(null!=object.exist){if("object"!=typeof object.exist)throw TypeError(".ics23.CommitmentProof.exist: object expected");e.exist=y.ics23.ExistenceProof.fromObject(object.exist)}if(null!=object.nonexist){if("object"!=typeof object.nonexist)throw TypeError(".ics23.CommitmentProof.nonexist: object expected");e.nonexist=y.ics23.NonExistenceProof.fromObject(object.nonexist)}if(null!=object.batch){if("object"!=typeof object.batch)throw TypeError(".ics23.CommitmentProof.batch: object expected");e.batch=y.ics23.BatchProof.fromObject(object.batch)}if(null!=object.compressed){if("object"!=typeof object.compressed)throw TypeError(".ics23.CommitmentProof.compressed: object expected");e.compressed=y.ics23.CompressedBatchProof.fromObject(object.compressed)}return e},e.toObject=function(e,t){t||(t={});var object={};return null!=e.exist&&e.hasOwnProperty("exist")&&(object.exist=y.ics23.ExistenceProof.toObject(e.exist,t),t.oneofs&&(object.proof="exist")),null!=e.nonexist&&e.hasOwnProperty("nonexist")&&(object.nonexist=y.ics23.NonExistenceProof.toObject(e.nonexist,t),t.oneofs&&(object.proof="nonexist")),null!=e.batch&&e.hasOwnProperty("batch")&&(object.batch=y.ics23.BatchProof.toObject(e.batch,t),t.oneofs&&(object.proof="batch")),null!=e.compressed&&e.hasOwnProperty("compressed")&&(object.compressed=y.ics23.CompressedBatchProof.toObject(e.compressed,t),t.oneofs&&(object.proof="compressed")),object},e.prototype.toJSON=function(){return this.constructor.toObject(this,h.util.toJSONOptions)},e}(),c.LeafOp=function(){function e(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return e.prototype.hash=0,e.prototype.prehashKey=0,e.prototype.prehashValue=0,e.prototype.length=0,e.prototype.prefix=d.newBuffer([]),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=l.create()),null!=e.hash&&e.hasOwnProperty("hash")&&t.uint32(8).int32(e.hash),null!=e.prehashKey&&e.hasOwnProperty("prehashKey")&&t.uint32(16).int32(e.prehashKey),null!=e.prehashValue&&e.hasOwnProperty("prehashValue")&&t.uint32(24).int32(e.prehashValue),null!=e.length&&e.hasOwnProperty("length")&&t.uint32(32).int32(e.length),null!=e.prefix&&e.hasOwnProperty("prefix")&&t.uint32(42).bytes(e.prefix),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof f||(e=f.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new y.ics23.LeafOp;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.hash=e.int32();break;case 2:r.prehashKey=e.int32();break;case 3:r.prehashValue=e.int32();break;case 4:r.length=e.int32();break;case 5:r.prefix=e.bytes();break;default:e.skipType(7&o)}}return r},e.decodeDelimited=function(e){return e instanceof f||(e=new f(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.hash&&e.hasOwnProperty("hash"))switch(e.hash){default:return"hash: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:}if(null!=e.prehashKey&&e.hasOwnProperty("prehashKey"))switch(e.prehashKey){default:return"prehashKey: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:}if(null!=e.prehashValue&&e.hasOwnProperty("prehashValue"))switch(e.prehashValue){default:return"prehashValue: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:}if(null!=e.length&&e.hasOwnProperty("length"))switch(e.length){default:return"length: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:}return null!=e.prefix&&e.hasOwnProperty("prefix")&&!(e.prefix&&"number"==typeof e.prefix.length||d.isString(e.prefix))?"prefix: buffer expected":null},e.fromObject=function(object){if(object instanceof y.ics23.LeafOp)return object;var e=new y.ics23.LeafOp;switch(object.hash){case"NO_HASH":case 0:e.hash=0;break;case"SHA256":case 1:e.hash=1;break;case"SHA512":case 2:e.hash=2;break;case"KECCAK":case 3:e.hash=3;break;case"RIPEMD160":case 4:e.hash=4;break;case"BITCOIN":case 5:e.hash=5;break;case"SHA512_256":case 6:e.hash=6}switch(object.prehashKey){case"NO_HASH":case 0:e.prehashKey=0;break;case"SHA256":case 1:e.prehashKey=1;break;case"SHA512":case 2:e.prehashKey=2;break;case"KECCAK":case 3:e.prehashKey=3;break;case"RIPEMD160":case 4:e.prehashKey=4;break;case"BITCOIN":case 5:e.prehashKey=5;break;case"SHA512_256":case 6:e.prehashKey=6}switch(object.prehashValue){case"NO_HASH":case 0:e.prehashValue=0;break;case"SHA256":case 1:e.prehashValue=1;break;case"SHA512":case 2:e.prehashValue=2;break;case"KECCAK":case 3:e.prehashValue=3;break;case"RIPEMD160":case 4:e.prehashValue=4;break;case"BITCOIN":case 5:e.prehashValue=5;break;case"SHA512_256":case 6:e.prehashValue=6}switch(object.length){case"NO_PREFIX":case 0:e.length=0;break;case"VAR_PROTO":case 1:e.length=1;break;case"VAR_RLP":case 2:e.length=2;break;case"FIXED32_BIG":case 3:e.length=3;break;case"FIXED32_LITTLE":case 4:e.length=4;break;case"FIXED64_BIG":case 5:e.length=5;break;case"FIXED64_LITTLE":case 6:e.length=6;break;case"REQUIRE_32_BYTES":case 7:e.length=7;break;case"REQUIRE_64_BYTES":case 8:e.length=8}return null!=object.prefix&&("string"==typeof object.prefix?d.base64.decode(object.prefix,e.prefix=d.newBuffer(d.base64.length(object.prefix)),0):object.prefix.length&&(e.prefix=object.prefix)),e},e.toObject=function(e,t){t||(t={});var object={};return t.defaults&&(object.hash=t.enums===String?"NO_HASH":0,object.prehashKey=t.enums===String?"NO_HASH":0,object.prehashValue=t.enums===String?"NO_HASH":0,object.length=t.enums===String?"NO_PREFIX":0,t.bytes===String?object.prefix="":(object.prefix=[],t.bytes!==Array&&(object.prefix=d.newBuffer(object.prefix)))),null!=e.hash&&e.hasOwnProperty("hash")&&(object.hash=t.enums===String?y.ics23.HashOp[e.hash]:e.hash),null!=e.prehashKey&&e.hasOwnProperty("prehashKey")&&(object.prehashKey=t.enums===String?y.ics23.HashOp[e.prehashKey]:e.prehashKey),null!=e.prehashValue&&e.hasOwnProperty("prehashValue")&&(object.prehashValue=t.enums===String?y.ics23.HashOp[e.prehashValue]:e.prehashValue),null!=e.length&&e.hasOwnProperty("length")&&(object.length=t.enums===String?y.ics23.LengthOp[e.length]:e.length),null!=e.prefix&&e.hasOwnProperty("prefix")&&(object.prefix=t.bytes===String?d.base64.encode(e.prefix,0,e.prefix.length):t.bytes===Array?Array.prototype.slice.call(e.prefix):e.prefix),object},e.prototype.toJSON=function(){return this.constructor.toObject(this,h.util.toJSONOptions)},e}(),c.InnerOp=function(){function e(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return e.prototype.hash=0,e.prototype.prefix=d.newBuffer([]),e.prototype.suffix=d.newBuffer([]),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=l.create()),null!=e.hash&&e.hasOwnProperty("hash")&&t.uint32(8).int32(e.hash),null!=e.prefix&&e.hasOwnProperty("prefix")&&t.uint32(18).bytes(e.prefix),null!=e.suffix&&e.hasOwnProperty("suffix")&&t.uint32(26).bytes(e.suffix),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof f||(e=f.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new y.ics23.InnerOp;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.hash=e.int32();break;case 2:r.prefix=e.bytes();break;case 3:r.suffix=e.bytes();break;default:e.skipType(7&o)}}return r},e.decodeDelimited=function(e){return e instanceof f||(e=new f(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.hash&&e.hasOwnProperty("hash"))switch(e.hash){default:return"hash: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:}return null!=e.prefix&&e.hasOwnProperty("prefix")&&!(e.prefix&&"number"==typeof e.prefix.length||d.isString(e.prefix))?"prefix: buffer expected":null!=e.suffix&&e.hasOwnProperty("suffix")&&!(e.suffix&&"number"==typeof e.suffix.length||d.isString(e.suffix))?"suffix: buffer expected":null},e.fromObject=function(object){if(object instanceof y.ics23.InnerOp)return object;var e=new y.ics23.InnerOp;switch(object.hash){case"NO_HASH":case 0:e.hash=0;break;case"SHA256":case 1:e.hash=1;break;case"SHA512":case 2:e.hash=2;break;case"KECCAK":case 3:e.hash=3;break;case"RIPEMD160":case 4:e.hash=4;break;case"BITCOIN":case 5:e.hash=5;break;case"SHA512_256":case 6:e.hash=6}return null!=object.prefix&&("string"==typeof object.prefix?d.base64.decode(object.prefix,e.prefix=d.newBuffer(d.base64.length(object.prefix)),0):object.prefix.length&&(e.prefix=object.prefix)),null!=object.suffix&&("string"==typeof object.suffix?d.base64.decode(object.suffix,e.suffix=d.newBuffer(d.base64.length(object.suffix)),0):object.suffix.length&&(e.suffix=object.suffix)),e},e.toObject=function(e,t){t||(t={});var object={};return t.defaults&&(object.hash=t.enums===String?"NO_HASH":0,t.bytes===String?object.prefix="":(object.prefix=[],t.bytes!==Array&&(object.prefix=d.newBuffer(object.prefix))),t.bytes===String?object.suffix="":(object.suffix=[],t.bytes!==Array&&(object.suffix=d.newBuffer(object.suffix)))),null!=e.hash&&e.hasOwnProperty("hash")&&(object.hash=t.enums===String?y.ics23.HashOp[e.hash]:e.hash),null!=e.prefix&&e.hasOwnProperty("prefix")&&(object.prefix=t.bytes===String?d.base64.encode(e.prefix,0,e.prefix.length):t.bytes===Array?Array.prototype.slice.call(e.prefix):e.prefix),null!=e.suffix&&e.hasOwnProperty("suffix")&&(object.suffix=t.bytes===String?d.base64.encode(e.suffix,0,e.suffix.length):t.bytes===Array?Array.prototype.slice.call(e.suffix):e.suffix),object},e.prototype.toJSON=function(){return this.constructor.toObject(this,h.util.toJSONOptions)},e}(),c.ProofSpec=function(){function e(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return e.prototype.leafSpec=null,e.prototype.innerSpec=null,e.prototype.maxDepth=0,e.prototype.minDepth=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=l.create()),null!=e.leafSpec&&e.hasOwnProperty("leafSpec")&&y.ics23.LeafOp.encode(e.leafSpec,t.uint32(10).fork()).ldelim(),null!=e.innerSpec&&e.hasOwnProperty("innerSpec")&&y.ics23.InnerSpec.encode(e.innerSpec,t.uint32(18).fork()).ldelim(),null!=e.maxDepth&&e.hasOwnProperty("maxDepth")&&t.uint32(24).int32(e.maxDepth),null!=e.minDepth&&e.hasOwnProperty("minDepth")&&t.uint32(32).int32(e.minDepth),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof f||(e=f.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new y.ics23.ProofSpec;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.leafSpec=y.ics23.LeafOp.decode(e,e.uint32());break;case 2:r.innerSpec=y.ics23.InnerSpec.decode(e,e.uint32());break;case 3:r.maxDepth=e.int32();break;case 4:r.minDepth=e.int32();break;default:e.skipType(7&o)}}return r},e.decodeDelimited=function(e){return e instanceof f||(e=new f(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.leafSpec&&e.hasOwnProperty("leafSpec")&&(t=y.ics23.LeafOp.verify(e.leafSpec))?"leafSpec."+t:null!=e.innerSpec&&e.hasOwnProperty("innerSpec")&&(t=y.ics23.InnerSpec.verify(e.innerSpec))?"innerSpec."+t:null!=e.maxDepth&&e.hasOwnProperty("maxDepth")&&!d.isInteger(e.maxDepth)?"maxDepth: integer expected":null!=e.minDepth&&e.hasOwnProperty("minDepth")&&!d.isInteger(e.minDepth)?"minDepth: integer expected":null;var t},e.fromObject=function(object){if(object instanceof y.ics23.ProofSpec)return object;var e=new y.ics23.ProofSpec;if(null!=object.leafSpec){if("object"!=typeof object.leafSpec)throw TypeError(".ics23.ProofSpec.leafSpec: object expected");e.leafSpec=y.ics23.LeafOp.fromObject(object.leafSpec)}if(null!=object.innerSpec){if("object"!=typeof object.innerSpec)throw TypeError(".ics23.ProofSpec.innerSpec: object expected");e.innerSpec=y.ics23.InnerSpec.fromObject(object.innerSpec)}return null!=object.maxDepth&&(e.maxDepth=0|object.maxDepth),null!=object.minDepth&&(e.minDepth=0|object.minDepth),e},e.toObject=function(e,t){t||(t={});var object={};return t.defaults&&(object.leafSpec=null,object.innerSpec=null,object.maxDepth=0,object.minDepth=0),null!=e.leafSpec&&e.hasOwnProperty("leafSpec")&&(object.leafSpec=y.ics23.LeafOp.toObject(e.leafSpec,t)),null!=e.innerSpec&&e.hasOwnProperty("innerSpec")&&(object.innerSpec=y.ics23.InnerSpec.toObject(e.innerSpec,t)),null!=e.maxDepth&&e.hasOwnProperty("maxDepth")&&(object.maxDepth=e.maxDepth),null!=e.minDepth&&e.hasOwnProperty("minDepth")&&(object.minDepth=e.minDepth),object},e.prototype.toJSON=function(){return this.constructor.toObject(this,h.util.toJSONOptions)},e}(),c.InnerSpec=function(){function e(e){if(this.childOrder=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return e.prototype.childOrder=d.emptyArray,e.prototype.childSize=0,e.prototype.minPrefixLength=0,e.prototype.maxPrefixLength=0,e.prototype.emptyChild=d.newBuffer([]),e.prototype.hash=0,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=l.create()),null!=e.childOrder&&e.childOrder.length){t.uint32(10).fork();for(var i=0;i<e.childOrder.length;++i)t.int32(e.childOrder[i]);t.ldelim()}return null!=e.childSize&&e.hasOwnProperty("childSize")&&t.uint32(16).int32(e.childSize),null!=e.minPrefixLength&&e.hasOwnProperty("minPrefixLength")&&t.uint32(24).int32(e.minPrefixLength),null!=e.maxPrefixLength&&e.hasOwnProperty("maxPrefixLength")&&t.uint32(32).int32(e.maxPrefixLength),null!=e.emptyChild&&e.hasOwnProperty("emptyChild")&&t.uint32(42).bytes(e.emptyChild),null!=e.hash&&e.hasOwnProperty("hash")&&t.uint32(48).int32(e.hash),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof f||(e=f.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new y.ics23.InnerSpec;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:if(r.childOrder&&r.childOrder.length||(r.childOrder=[]),2==(7&o))for(var c=e.uint32()+e.pos;e.pos<c;)r.childOrder.push(e.int32());else r.childOrder.push(e.int32());break;case 2:r.childSize=e.int32();break;case 3:r.minPrefixLength=e.int32();break;case 4:r.maxPrefixLength=e.int32();break;case 5:r.emptyChild=e.bytes();break;case 6:r.hash=e.int32();break;default:e.skipType(7&o)}}return r},e.decodeDelimited=function(e){return e instanceof f||(e=new f(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.childOrder&&e.hasOwnProperty("childOrder")){if(!Array.isArray(e.childOrder))return"childOrder: array expected";for(var i=0;i<e.childOrder.length;++i)if(!d.isInteger(e.childOrder[i]))return"childOrder: integer[] expected"}if(null!=e.childSize&&e.hasOwnProperty("childSize")&&!d.isInteger(e.childSize))return"childSize: integer expected";if(null!=e.minPrefixLength&&e.hasOwnProperty("minPrefixLength")&&!d.isInteger(e.minPrefixLength))return"minPrefixLength: integer expected";if(null!=e.maxPrefixLength&&e.hasOwnProperty("maxPrefixLength")&&!d.isInteger(e.maxPrefixLength))return"maxPrefixLength: integer expected";if(null!=e.emptyChild&&e.hasOwnProperty("emptyChild")&&!(e.emptyChild&&"number"==typeof e.emptyChild.length||d.isString(e.emptyChild)))return"emptyChild: buffer expected";if(null!=e.hash&&e.hasOwnProperty("hash"))switch(e.hash){default:return"hash: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:}return null},e.fromObject=function(object){if(object instanceof y.ics23.InnerSpec)return object;var e=new y.ics23.InnerSpec;if(object.childOrder){if(!Array.isArray(object.childOrder))throw TypeError(".ics23.InnerSpec.childOrder: array expected");e.childOrder=[];for(var i=0;i<object.childOrder.length;++i)e.childOrder[i]=0|object.childOrder[i]}switch(null!=object.childSize&&(e.childSize=0|object.childSize),null!=object.minPrefixLength&&(e.minPrefixLength=0|object.minPrefixLength),null!=object.maxPrefixLength&&(e.maxPrefixLength=0|object.maxPrefixLength),null!=object.emptyChild&&("string"==typeof object.emptyChild?d.base64.decode(object.emptyChild,e.emptyChild=d.newBuffer(d.base64.length(object.emptyChild)),0):object.emptyChild.length&&(e.emptyChild=object.emptyChild)),object.hash){case"NO_HASH":case 0:e.hash=0;break;case"SHA256":case 1:e.hash=1;break;case"SHA512":case 2:e.hash=2;break;case"KECCAK":case 3:e.hash=3;break;case"RIPEMD160":case 4:e.hash=4;break;case"BITCOIN":case 5:e.hash=5;break;case"SHA512_256":case 6:e.hash=6}return e},e.toObject=function(e,t){t||(t={});var object={};if((t.arrays||t.defaults)&&(object.childOrder=[]),t.defaults&&(object.childSize=0,object.minPrefixLength=0,object.maxPrefixLength=0,t.bytes===String?object.emptyChild="":(object.emptyChild=[],t.bytes!==Array&&(object.emptyChild=d.newBuffer(object.emptyChild))),object.hash=t.enums===String?"NO_HASH":0),e.childOrder&&e.childOrder.length){object.childOrder=[];for(var n=0;n<e.childOrder.length;++n)object.childOrder[n]=e.childOrder[n]}return null!=e.childSize&&e.hasOwnProperty("childSize")&&(object.childSize=e.childSize),null!=e.minPrefixLength&&e.hasOwnProperty("minPrefixLength")&&(object.minPrefixLength=e.minPrefixLength),null!=e.maxPrefixLength&&e.hasOwnProperty("maxPrefixLength")&&(object.maxPrefixLength=e.maxPrefixLength),null!=e.emptyChild&&e.hasOwnProperty("emptyChild")&&(object.emptyChild=t.bytes===String?d.base64.encode(e.emptyChild,0,e.emptyChild.length):t.bytes===Array?Array.prototype.slice.call(e.emptyChild):e.emptyChild),null!=e.hash&&e.hasOwnProperty("hash")&&(object.hash=t.enums===String?y.ics23.HashOp[e.hash]:e.hash),object},e.prototype.toJSON=function(){return this.constructor.toObject(this,h.util.toJSONOptions)},e}(),c.BatchProof=function(){function e(e){if(this.entries=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return e.prototype.entries=d.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=l.create()),null!=e.entries&&e.entries.length)for(var i=0;i<e.entries.length;++i)y.ics23.BatchEntry.encode(e.entries[i],t.uint32(10).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof f||(e=f.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new y.ics23.BatchProof;e.pos<n;){var o=e.uint32();o>>>3==1?(r.entries&&r.entries.length||(r.entries=[]),r.entries.push(y.ics23.BatchEntry.decode(e,e.uint32()))):e.skipType(7&o)}return r},e.decodeDelimited=function(e){return e instanceof f||(e=new f(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.entries&&e.hasOwnProperty("entries")){if(!Array.isArray(e.entries))return"entries: array expected";for(var i=0;i<e.entries.length;++i){var t=y.ics23.BatchEntry.verify(e.entries[i]);if(t)return"entries."+t}}return null},e.fromObject=function(object){if(object instanceof y.ics23.BatchProof)return object;var e=new y.ics23.BatchProof;if(object.entries){if(!Array.isArray(object.entries))throw TypeError(".ics23.BatchProof.entries: array expected");e.entries=[];for(var i=0;i<object.entries.length;++i){if("object"!=typeof object.entries[i])throw TypeError(".ics23.BatchProof.entries: object expected");e.entries[i]=y.ics23.BatchEntry.fromObject(object.entries[i])}}return e},e.toObject=function(e,t){t||(t={});var object={};if((t.arrays||t.defaults)&&(object.entries=[]),e.entries&&e.entries.length){object.entries=[];for(var n=0;n<e.entries.length;++n)object.entries[n]=y.ics23.BatchEntry.toObject(e.entries[n],t)}return object},e.prototype.toJSON=function(){return this.constructor.toObject(this,h.util.toJSONOptions)},e}(),c.BatchEntry=function(){function e(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}var t;return e.prototype.exist=null,e.prototype.nonexist=null,Object.defineProperty(e.prototype,"proof",{get:d.oneOfGetter(t=["exist","nonexist"]),set:d.oneOfSetter(t)}),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=l.create()),null!=e.exist&&e.hasOwnProperty("exist")&&y.ics23.ExistenceProof.encode(e.exist,t.uint32(10).fork()).ldelim(),null!=e.nonexist&&e.hasOwnProperty("nonexist")&&y.ics23.NonExistenceProof.encode(e.nonexist,t.uint32(18).fork()).ldelim(),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof f||(e=f.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new y.ics23.BatchEntry;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.exist=y.ics23.ExistenceProof.decode(e,e.uint32());break;case 2:r.nonexist=y.ics23.NonExistenceProof.decode(e,e.uint32());break;default:e.skipType(7&o)}}return r},e.decodeDelimited=function(e){return e instanceof f||(e=new f(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";var t={};if(null!=e.exist&&e.hasOwnProperty("exist")&&(t.proof=1,n=y.ics23.ExistenceProof.verify(e.exist)))return"exist."+n;if(null!=e.nonexist&&e.hasOwnProperty("nonexist")){if(1===t.proof)return"proof: multiple values";var n;if(t.proof=1,n=y.ics23.NonExistenceProof.verify(e.nonexist))return"nonexist."+n}return null},e.fromObject=function(object){if(object instanceof y.ics23.BatchEntry)return object;var e=new y.ics23.BatchEntry;if(null!=object.exist){if("object"!=typeof object.exist)throw TypeError(".ics23.BatchEntry.exist: object expected");e.exist=y.ics23.ExistenceProof.fromObject(object.exist)}if(null!=object.nonexist){if("object"!=typeof object.nonexist)throw TypeError(".ics23.BatchEntry.nonexist: object expected");e.nonexist=y.ics23.NonExistenceProof.fromObject(object.nonexist)}return e},e.toObject=function(e,t){t||(t={});var object={};return null!=e.exist&&e.hasOwnProperty("exist")&&(object.exist=y.ics23.ExistenceProof.toObject(e.exist,t),t.oneofs&&(object.proof="exist")),null!=e.nonexist&&e.hasOwnProperty("nonexist")&&(object.nonexist=y.ics23.NonExistenceProof.toObject(e.nonexist,t),t.oneofs&&(object.proof="nonexist")),object},e.prototype.toJSON=function(){return this.constructor.toObject(this,h.util.toJSONOptions)},e}(),c.CompressedBatchProof=function(){function e(e){if(this.entries=[],this.lookupInners=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return e.prototype.entries=d.emptyArray,e.prototype.lookupInners=d.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=l.create()),null!=e.entries&&e.entries.length)for(var i=0;i<e.entries.length;++i)y.ics23.CompressedBatchEntry.encode(e.entries[i],t.uint32(10).fork()).ldelim();if(null!=e.lookupInners&&e.lookupInners.length)for(i=0;i<e.lookupInners.length;++i)y.ics23.InnerOp.encode(e.lookupInners[i],t.uint32(18).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof f||(e=f.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new y.ics23.CompressedBatchProof;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.entries&&r.entries.length||(r.entries=[]),r.entries.push(y.ics23.CompressedBatchEntry.decode(e,e.uint32()));break;case 2:r.lookupInners&&r.lookupInners.length||(r.lookupInners=[]),r.lookupInners.push(y.ics23.InnerOp.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return r},e.decodeDelimited=function(e){return e instanceof f||(e=new f(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.entries&&e.hasOwnProperty("entries")){if(!Array.isArray(e.entries))return"entries: array expected";for(var i=0;i<e.entries.length;++i)if(t=y.ics23.CompressedBatchEntry.verify(e.entries[i]))return"entries."+t}if(null!=e.lookupInners&&e.hasOwnProperty("lookupInners")){if(!Array.isArray(e.lookupInners))return"lookupInners: array expected";for(i=0;i<e.lookupInners.length;++i){var t;if(t=y.ics23.InnerOp.verify(e.lookupInners[i]))return"lookupInners."+t}}return null},e.fromObject=function(object){if(object instanceof y.ics23.CompressedBatchProof)return object;var e=new y.ics23.CompressedBatchProof;if(object.entries){if(!Array.isArray(object.entries))throw TypeError(".ics23.CompressedBatchProof.entries: array expected");e.entries=[];for(var i=0;i<object.entries.length;++i){if("object"!=typeof object.entries[i])throw TypeError(".ics23.CompressedBatchProof.entries: object expected");e.entries[i]=y.ics23.CompressedBatchEntry.fromObject(object.entries[i])}}if(object.lookupInners){if(!Array.isArray(object.lookupInners))throw TypeError(".ics23.CompressedBatchProof.lookupInners: array expected");for(e.lookupInners=[],i=0;i<object.lookupInners.length;++i){if("object"!=typeof object.lookupInners[i])throw TypeError(".ics23.CompressedBatchProof.lookupInners: object expected");e.lookupInners[i]=y.ics23.InnerOp.fromObject(object.lookupInners[i])}}return e},e.toObject=function(e,t){t||(t={});var object={};if((t.arrays||t.defaults)&&(object.entries=[],object.lookupInners=[]),e.entries&&e.entries.length){object.entries=[];for(var n=0;n<e.entries.length;++n)object.entries[n]=y.ics23.CompressedBatchEntry.toObject(e.entries[n],t)}if(e.lookupInners&&e.lookupInners.length)for(object.lookupInners=[],n=0;n<e.lookupInners.length;++n)object.lookupInners[n]=y.ics23.InnerOp.toObject(e.lookupInners[n],t);return object},e.prototype.toJSON=function(){return this.constructor.toObject(this,h.util.toJSONOptions)},e}(),c.CompressedBatchEntry=function(){function e(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}var t;return e.prototype.exist=null,e.prototype.nonexist=null,Object.defineProperty(e.prototype,"proof",{get:d.oneOfGetter(t=["exist","nonexist"]),set:d.oneOfSetter(t)}),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=l.create()),null!=e.exist&&e.hasOwnProperty("exist")&&y.ics23.CompressedExistenceProof.encode(e.exist,t.uint32(10).fork()).ldelim(),null!=e.nonexist&&e.hasOwnProperty("nonexist")&&y.ics23.CompressedNonExistenceProof.encode(e.nonexist,t.uint32(18).fork()).ldelim(),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof f||(e=f.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new y.ics23.CompressedBatchEntry;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.exist=y.ics23.CompressedExistenceProof.decode(e,e.uint32());break;case 2:r.nonexist=y.ics23.CompressedNonExistenceProof.decode(e,e.uint32());break;default:e.skipType(7&o)}}return r},e.decodeDelimited=function(e){return e instanceof f||(e=new f(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";var t={};if(null!=e.exist&&e.hasOwnProperty("exist")&&(t.proof=1,n=y.ics23.CompressedExistenceProof.verify(e.exist)))return"exist."+n;if(null!=e.nonexist&&e.hasOwnProperty("nonexist")){if(1===t.proof)return"proof: multiple values";var n;if(t.proof=1,n=y.ics23.CompressedNonExistenceProof.verify(e.nonexist))return"nonexist."+n}return null},e.fromObject=function(object){if(object instanceof y.ics23.CompressedBatchEntry)return object;var e=new y.ics23.CompressedBatchEntry;if(null!=object.exist){if("object"!=typeof object.exist)throw TypeError(".ics23.CompressedBatchEntry.exist: object expected");e.exist=y.ics23.CompressedExistenceProof.fromObject(object.exist)}if(null!=object.nonexist){if("object"!=typeof object.nonexist)throw TypeError(".ics23.CompressedBatchEntry.nonexist: object expected");e.nonexist=y.ics23.CompressedNonExistenceProof.fromObject(object.nonexist)}return e},e.toObject=function(e,t){t||(t={});var object={};return null!=e.exist&&e.hasOwnProperty("exist")&&(object.exist=y.ics23.CompressedExistenceProof.toObject(e.exist,t),t.oneofs&&(object.proof="exist")),null!=e.nonexist&&e.hasOwnProperty("nonexist")&&(object.nonexist=y.ics23.CompressedNonExistenceProof.toObject(e.nonexist,t),t.oneofs&&(object.proof="nonexist")),object},e.prototype.toJSON=function(){return this.constructor.toObject(this,h.util.toJSONOptions)},e}(),c.CompressedExistenceProof=function(){function e(e){if(this.path=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return e.prototype.key=d.newBuffer([]),e.prototype.value=d.newBuffer([]),e.prototype.leaf=null,e.prototype.path=d.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=l.create()),null!=e.key&&e.hasOwnProperty("key")&&t.uint32(10).bytes(e.key),null!=e.value&&e.hasOwnProperty("value")&&t.uint32(18).bytes(e.value),null!=e.leaf&&e.hasOwnProperty("leaf")&&y.ics23.LeafOp.encode(e.leaf,t.uint32(26).fork()).ldelim(),null!=e.path&&e.path.length){t.uint32(34).fork();for(var i=0;i<e.path.length;++i)t.int32(e.path[i]);t.ldelim()}return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof f||(e=f.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new y.ics23.CompressedExistenceProof;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.key=e.bytes();break;case 2:r.value=e.bytes();break;case 3:r.leaf=y.ics23.LeafOp.decode(e,e.uint32());break;case 4:if(r.path&&r.path.length||(r.path=[]),2==(7&o))for(var c=e.uint32()+e.pos;e.pos<c;)r.path.push(e.int32());else r.path.push(e.int32());break;default:e.skipType(7&o)}}return r},e.decodeDelimited=function(e){return e instanceof f||(e=new f(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.key&&e.hasOwnProperty("key")&&!(e.key&&"number"==typeof e.key.length||d.isString(e.key)))return"key: buffer expected";if(null!=e.value&&e.hasOwnProperty("value")&&!(e.value&&"number"==typeof e.value.length||d.isString(e.value)))return"value: buffer expected";if(null!=e.leaf&&e.hasOwnProperty("leaf")){var t=y.ics23.LeafOp.verify(e.leaf);if(t)return"leaf."+t}if(null!=e.path&&e.hasOwnProperty("path")){if(!Array.isArray(e.path))return"path: array expected";for(var i=0;i<e.path.length;++i)if(!d.isInteger(e.path[i]))return"path: integer[] expected"}return null},e.fromObject=function(object){if(object instanceof y.ics23.CompressedExistenceProof)return object;var e=new y.ics23.CompressedExistenceProof;if(null!=object.key&&("string"==typeof object.key?d.base64.decode(object.key,e.key=d.newBuffer(d.base64.length(object.key)),0):object.key.length&&(e.key=object.key)),null!=object.value&&("string"==typeof object.value?d.base64.decode(object.value,e.value=d.newBuffer(d.base64.length(object.value)),0):object.value.length&&(e.value=object.value)),null!=object.leaf){if("object"!=typeof object.leaf)throw TypeError(".ics23.CompressedExistenceProof.leaf: object expected");e.leaf=y.ics23.LeafOp.fromObject(object.leaf)}if(object.path){if(!Array.isArray(object.path))throw TypeError(".ics23.CompressedExistenceProof.path: array expected");e.path=[];for(var i=0;i<object.path.length;++i)e.path[i]=0|object.path[i]}return e},e.toObject=function(e,t){t||(t={});var object={};if((t.arrays||t.defaults)&&(object.path=[]),t.defaults&&(t.bytes===String?object.key="":(object.key=[],t.bytes!==Array&&(object.key=d.newBuffer(object.key))),t.bytes===String?object.value="":(object.value=[],t.bytes!==Array&&(object.value=d.newBuffer(object.value))),object.leaf=null),null!=e.key&&e.hasOwnProperty("key")&&(object.key=t.bytes===String?d.base64.encode(e.key,0,e.key.length):t.bytes===Array?Array.prototype.slice.call(e.key):e.key),null!=e.value&&e.hasOwnProperty("value")&&(object.value=t.bytes===String?d.base64.encode(e.value,0,e.value.length):t.bytes===Array?Array.prototype.slice.call(e.value):e.value),null!=e.leaf&&e.hasOwnProperty("leaf")&&(object.leaf=y.ics23.LeafOp.toObject(e.leaf,t)),e.path&&e.path.length){object.path=[];for(var n=0;n<e.path.length;++n)object.path[n]=e.path[n]}return object},e.prototype.toJSON=function(){return this.constructor.toObject(this,h.util.toJSONOptions)},e}(),c.CompressedNonExistenceProof=function(){function e(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return e.prototype.key=d.newBuffer([]),e.prototype.left=null,e.prototype.right=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=l.create()),null!=e.key&&e.hasOwnProperty("key")&&t.uint32(10).bytes(e.key),null!=e.left&&e.hasOwnProperty("left")&&y.ics23.CompressedExistenceProof.encode(e.left,t.uint32(18).fork()).ldelim(),null!=e.right&&e.hasOwnProperty("right")&&y.ics23.CompressedExistenceProof.encode(e.right,t.uint32(26).fork()).ldelim(),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof f||(e=f.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new y.ics23.CompressedNonExistenceProof;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.key=e.bytes();break;case 2:r.left=y.ics23.CompressedExistenceProof.decode(e,e.uint32());break;case 3:r.right=y.ics23.CompressedExistenceProof.decode(e,e.uint32());break;default:e.skipType(7&o)}}return r},e.decodeDelimited=function(e){return e instanceof f||(e=new f(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.key&&e.hasOwnProperty("key")&&!(e.key&&"number"==typeof e.key.length||d.isString(e.key))?"key: buffer expected":null!=e.left&&e.hasOwnProperty("left")&&(t=y.ics23.CompressedExistenceProof.verify(e.left))?"left."+t:null!=e.right&&e.hasOwnProperty("right")&&(t=y.ics23.CompressedExistenceProof.verify(e.right))?"right."+t:null;var t},e.fromObject=function(object){if(object instanceof y.ics23.CompressedNonExistenceProof)return object;var e=new y.ics23.CompressedNonExistenceProof;if(null!=object.key&&("string"==typeof object.key?d.base64.decode(object.key,e.key=d.newBuffer(d.base64.length(object.key)),0):object.key.length&&(e.key=object.key)),null!=object.left){if("object"!=typeof object.left)throw TypeError(".ics23.CompressedNonExistenceProof.left: object expected");e.left=y.ics23.CompressedExistenceProof.fromObject(object.left)}if(null!=object.right){if("object"!=typeof object.right)throw TypeError(".ics23.CompressedNonExistenceProof.right: object expected");e.right=y.ics23.CompressedExistenceProof.fromObject(object.right)}return e},e.toObject=function(e,t){t||(t={});var object={};return t.defaults&&(t.bytes===String?object.key="":(object.key=[],t.bytes!==Array&&(object.key=d.newBuffer(object.key))),object.left=null,object.right=null),null!=e.key&&e.hasOwnProperty("key")&&(object.key=t.bytes===String?d.base64.encode(e.key,0,e.key.length):t.bytes===Array?Array.prototype.slice.call(e.key):e.key),null!=e.left&&e.hasOwnProperty("left")&&(object.left=y.ics23.CompressedExistenceProof.toObject(e.left,t)),null!=e.right&&e.hasOwnProperty("right")&&(object.right=y.ics23.CompressedExistenceProof.toObject(e.right,t)),object},e.prototype.toJSON=function(){return this.constructor.toObject(this,h.util.toJSONOptions)},e}(),c),e.exports=y},873:function(e,t,n){(function(t){e.exports=function(){"use strict";function e(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))}function r(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)}function o(e,t){if(!e)throw new Error(t)}const c={56:"https://bsc-dataseed1.binance.org",97:"https://data-seed-prebsc-1-s1.binance.org:8545",137:"https://rpc-mainnet.maticvigil.com/",80001:"https://rpc-mumbai.matic.today/",43114:"https://api.avax.network/ext/bc/C/rpc",43113:"https://api.avax-test.network/ext/bc/C/rpc",42161:"https://arb1.arbitrum.io/rpc",421613:"https://endpoints.omniatech.io/v1/arbitrum/goerli/public",10:"https://mainnet.optimism.io",420:"https://goerli.optimism.io"},i={1:"ethereum",5:"ethereum",56:"bsc",97:"bsc",137:"polygon",80001:"polygon",43114:"avalanche",43113:"avalanche",42161:"arbitrum",421613:"arbitrum",10:"optimism",420:"optimism"},s={1:"mainnet",5:"testnet",56:"mainnet",97:"testnet",137:"mainnet",80001:"testnet",43114:"mainnet",43113:"testnet",42161:"mainnet",421613:"testnet",10:"mainnet",420:"testnet"},h={1:"https://wallet-v2.blocto.app",5:"https://wallet-v2-dev.blocto.app",56:"https://wallet-v2.blocto.app",97:"https://wallet-v2-dev.blocto.app",137:"https://wallet-v2.blocto.app",80001:"https://wallet-v2-dev.blocto.app",43114:"https://wallet-v2.blocto.app",43113:"https://wallet-v2-dev.blocto.app",42161:"https://wallet-v2.blocto.app",421613:"https://wallet-v2-dev.blocto.app",10:"https://wallet-v2.blocto.app",420:"https://wallet-v2-dev.blocto.app"},a={prod:"https://wallet-v2.blocto.app",staging:"https://wallet-v2-staging.blocto.app",dev:"https://wallet-v2-dev.blocto.app"},f={devnet:"https://wallet-v2-dev.blocto.app",testnet:"https://wallet-v2-dev.blocto.app","mainnet-beta":"https://wallet-v2.blocto.app"},l=["devnet","testnet","mainnet-beta"],u={1:"https://wallet-v2.blocto.app",2:"https://wallet-v2-dev.blocto.app",3:"https://wallet-v2-dev.blocto.app",4:"https://wallet-v2-dev.blocto.app",5:"https://wallet-v2-staging.blocto.app"};var d;!function(e){e.Mainnet="mainnet",e.Testnet="testnet",e.Devnet="devnet",e.Testing="testing",e.Premainnet="premainnet"}(d||(d={}));const y={1:d.Mainnet,2:d.Testnet,3:d.Devnet,4:d.Testing,5:d.Premainnet},w={1:"https://fullnode.mainnet.aptoslabs.com/v1",2:"https://fullnode.testnet.aptoslabs.com/v1",3:"https://fullnode.devnet.aptoslabs.com/v1",4:"",5:"https://premainnet.aptosdev.com/v1"},p=["connect","disconnect","message","chainChanged","accountsChanged"],g=864e5,m="00000000-0000-0000-0000-000000000000",v="sdk.session",x="undefined"!=typeof window?window.memoryStorage:new class{constructor(){this.storage={}}getItem(e){return this[e]||null}setItem(e,t){this.storage[e]=t}removeItem(e){delete this.storage[e]}};"undefined"!=typeof window&&(window.memoryStorage=x);const O=(()=>{if("undefined"==typeof window)return!1;try{window.localStorage.setItem("local_storage_supported","1");const e=window.localStorage.getItem("local_storage_supported");return window.localStorage.removeItem("local_storage_supported"),"1"===e}catch(e){return!1}})()?window.localStorage:x,b=(e,t=null)=>{const n=((e,t=null)=>{const n=O.getItem(e);try{return n&&JSON.parse(n)||t}catch(e){return n||t}})(e,null);return n?(new Date).getTime()>n.expiry?(S(e),t):n.value:t},E=(e,t)=>O.setItem(e,"string"==typeof t?t:JSON.stringify(t)),P=(e,t,n)=>E(e,{value:t,expiry:(new Date).getTime()+n}),S=e=>{E(e,""),O.removeItem(e)};class k{constructor(e){this.isBlocto=!0,this.isConnecting=!1,this.eventListeners={},this.sessionKey=v,this.off=this.removeListener,this.session=e,p.forEach((e=>{this.eventListeners[e]=[]}))}formatAndSetSessionAccount(e={}){this.session.accounts=Object.keys(e).reduce(((t,n)=>(t[n]=[e[n]],t)),{})}tryRetrieveSessionFromStorage(e){const t=b(this.sessionKey,{}),n=t&&t.code,r=t&&t.address&&t.address[e];this.session.connected=Boolean(n&&r),this.session.code=n||null,this.formatAndSetSessionAccount(t?t.address:{})}request(t){return e(this,void 0,void 0,(function*(){}))}on(e,t){p.includes(e)&&this.eventListeners[e].push(t)}once(){}removeListener(e,t){const n=this.eventListeners[e].findIndex((e=>e===t));-1!==n&&this.eventListeners[e].splice(n,1)}}function A(e){const t=document.createElement("iframe");return t.setAttribute("src",e),t.setAttribute("style","width:100vw;height:100%;position:fixed;top:0;left:0;z-index:2147483646;border:none;box-sizing:border-box;color-scheme:light;inset:0px;display:block;"),t}function I(e){document.body.appendChild(e)}function j(e){const t=e&&e.parentNode;t&&t.removeChild instanceof Function&&t.removeChild(e)}var T=(e,t,n=window)=>{n.addEventListener(e,(function r(i){t(i,(()=>n.removeEventListener(e,r)))}))};function _(t,n){return e(this,void 0,void 0,(function*(){if(403===t.status)throw n.session.code=null,S(n.sessionKey),new Error("[Blocto SDK]: Session expired!");return t.json()}))}const B=e=>/\S+@\S+\.\S+/.test(e);function C(){return e(this,void 0,void 0,(function*(){const{networks:e}=yield fetch("https://api.blocto.app/networks/evm").then((e=>e.json()));return e.reduce(((e,t)=>Object.assign(Object.assign({},e),{[t.chain_id]:t})),{})}))}var R,N,L;function D(e){return e?"number"==typeof e?e:e.startsWith("0x")?parseInt(e,16):parseInt(e,10):1}class U extends k{constructor({chainId:e,rpc:t,server:a,appId:n,session:r}){super(r),R.add(this),this.supportNetwork={},this.switchableNetwork={},o(e,"'chainId' is required"),this.chainId=D(e),this.networkId=this.chainId,this.chain=i[this.chainId],this.net=s[this.chainId],o(this.chain,`unsupported 'chainId': ${this.chainId}`),this.rpc=t||c[this.chainId]||"",o(this.rpc,"'rpc' is required for Ethereum"),this.server=a||h[this.chainId]||"",this.appId=n||m,this.switchableNetwork[this.chainId]={name:this.chain,display_name:this.chain,network_type:this.net,wallet_web_url:this.server,rpc_url:this.rpc}}loadSwitchableNetwork(t){return e(this,void 0,void 0,(function*(){return C().then((e=>(this.supportNetwork=e,(null==t?void 0:t.length)&&t.forEach((({chainId:e,rpcUrls:t})=>{if(o(t,"rpcUrls is required for networksList"),!(null==t?void 0:t.length))throw new Error("Empty rpcUrls array");r(this,R,"m",N).call(this,{chainId:D(e),rpcUrls:t})})),null)))}))}send(t,n){return e(this,void 0,void 0,(function*(){switch(!0){case n instanceof Function:return this.sendAsync(t,n);case"string"==typeof t&&Array.isArray(n):return this.sendAsync({jsonrpc:"2.0",method:t,params:n});default:return this.sendAsync(t)}}))}sendAsync(t,n){return e(this,void 0,void 0,(function*(){const e=new Promise((e=>{if(Array.isArray(t)){const n=t.filter((e=>"eth_sendTransaction"===e.method)).map((e=>{var t;return null===(t=e.params)||void 0===t?void 0:t[0]})),r=Math.floor(1e4*Math.random()),i={method:"blocto_sendBatchTransaction",params:n},s=this.request(i),o=t.map((({method:e,params:t},n)=>"eth_sendTransaction"===e?s:this.request({id:r+n+1,jsonrpc:"2.0",method:e,params:t})));Promise.allSettled(o).then((n=>e(n.map(((e,n)=>({id:String(r+n+1),jsonrpc:"2.0",method:t[n].method,result:"fulfilled"===e.status?e.value:void 0,error:"fulfilled"!==e.status?e.reason:void 0}))))))}else this.request(Object.assign(Object.assign({},t),{id:Number(t.id)})).then(e)}));if(!n)return e;e.then((e=>n(null,e))).catch((e=>n(e)))}))}request(t){var i,s,n,a,c,h,u;return e(this,void 0,void 0,(function*(){const e=window.ethereum;if(e&&e.isBlocto)return e.request(t);if(!this.session.connected){const e=null===(i=null==t?void 0:t.params)||void 0===i?void 0:i[0];"eth_requestAccounts"===t.method&&B(e)?yield this.enable(e):yield this.enable()}try{let e=null,i=null;switch(t.method){case"eth_requestAccounts":yield this.fetchAccounts();case"eth_accounts":i=this.session.accounts[this.chain];break;case"eth_coinbase":i=this.session.accounts[this.chain][0];break;case"eth_chainId":i=this.chainId,i=`0x${i.toString(16)}`;break;case"net_version":i=this.networkId||this.chainId,i=`0x${i.toString(16)}`;break;case"eth_signTypedData_v3":case"eth_signTypedData":case"eth_signTypedData_v4":case"personal_sign":case"eth_sign":i=yield this.handleSign(t);break;case"wallet_disconnect":this.handleDisconnect(),i=null;break;case"blocto_sendBatchTransaction":case"eth_sendTransaction":i=yield this.handleSendTransaction(t);break;case"eth_signTransaction":case"eth_sendRawTransaction":i=null;break;case"wallet_addEthereumChain":if(!(null===(n=null===(s=null==t?void 0:t.params)||void 0===s?void 0:s[0])||void 0===n?void 0:n.chainId)||!(null===(c=null===(a=null==t?void 0:t.params)||void 0===a?void 0:a[0])||void 0===c?void 0:c.rpcUrls.length))throw new Error("Invalid params");yield C().then((e=>{var n,i,s;this.supportNetwork=e,r(this,R,"m",N).call(this,{chainId:D(null===(i=null===(n=null==t?void 0:t.params)||void 0===n?void 0:n[0])||void 0===i?void 0:i.chainId),rpcUrls:null===(s=null==t?void 0:t.params)||void 0===s?void 0:s[0].rpcUrls})})),i=null;break;case"wallet_switchEthereumChain":if(!(null===(u=null===(h=null==t?void 0:t.params)||void 0===h?void 0:h[0])||void 0===u?void 0:u.chainId))throw new Error("Invalid params");if(!this.switchableNetwork[D(t.params[0].chainId)]){const e=new Error("This chain has not been added to SDK. Please try wallet_addEthereumChain first.");throw e.code=4902,e}this.chainId=D(t.params[0].chainId),this.networkId=this.chainId,this.chain=this.switchableNetwork[this.chainId].name,this.net=this.switchableNetwork[this.chainId].network_type,o(this.chain,`unsupported 'chainId': ${this.chainId}`),this.rpc=this.switchableNetwork[this.chainId].rpc_url,o(this.rpc,"'rpc' is required"),this.server=this.switchableNetwork[this.chainId].wallet_web_url,yield this.fetchAccounts(),this.eventListeners.chainChanged.forEach((e=>e(this.chainId))),i=null;break;default:e=yield this.handleReadRequests(t)}if(e&&!e.result&&e.error){const t=e.error.message?e.error.message:"Request failed";throw new Error(t)}return e?e.result:i}catch(e){throw console.error(e),e}}))}enable(t){return e(this,void 0,void 0,(function*(){const e=window.ethereum;if(e&&e.isBlocto){if(parseInt(e.chainId,16)!==this.chainId)try{yield e.request({method:"wallet_addEthereumChain",params:[{chainId:`0x${this.chainId.toString(16)}`}]}),this.session.accounts[this.chain]=[e.address]}catch(e){console.error(e)}return new Promise(((t,n)=>setTimeout((()=>e.enable().then(t).catch(n)),10)))}return this.tryRetrieveSessionFromStorage(this.chain),new Promise(((e,n)=>{if("undefined"==typeof window)return n("Currently only supported in browser");if(this.session.connected)return e(this.session.accounts[this.chain]);const r=new URLSearchParams;r.set("l6n",window.location.origin);const i=t&&B(t)?`/${t}`:"",s=A(`${this.server}/${this.appId}/${this.chain}/authn${i}?${r.toString()}`);I(s),T("message",((t,r)=>{const i=t;if(i.origin===this.server){if("ETH:FRAME:RESPONSE"===i.data.type){r(),j(s),this.session.code=i.data.code,this.session.connected=!0,this.eventListeners.connect.forEach((e=>e(this.chainId)));const t=i.data.address;this.formatAndSetSessionAccount(t),P(this.sessionKey,{code:this.session.code,address:t},g),e(this.session.accounts[this.chain])}"ETH:FRAME:CLOSE"===i.data.type&&(r(),j(s),n(new Error("User declined the login request")))}}))}))}))}fetchAccounts(){return e(this,void 0,void 0,(function*(){r(this,R,"m",L).call(this);const{accounts:e}=yield fetch(`${this.server}/api/${this.chain}/accounts`,{headers:{"Blocto-Application-Identifier":this.appId,"Blocto-Session-Identifier":this.session.code}}).then((e=>_(e,this)));return this.session.accounts[this.chain]=e,e}))}handleReadRequests(t){return e(this,void 0,void 0,(function*(){return r(this,R,"m",L).call(this),fetch(this.rpc,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Object.assign({id:1,jsonrpc:"2.0"},t))}).then((e=>e.json()))}))}handleSign({method:t,params:n}){return e(this,void 0,void 0,(function*(){let e="";if(Array.isArray(n))if("eth_sign"===t)e=n[1].slice(2);else if("personal_sign"===t)e=n[0].slice(2);else if(["eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4"].includes(t)){e=n[1];const{domain:t}=JSON.parse(e);if(D(t.chainId)!==D(this.chainId))throw new Error(`Provided chainId "${t.chainId}" must match the active chainId "${this.chainId}"`)}r(this,R,"m",L).call(this);const{signatureId:i}=yield fetch(`${this.server}/api/${this.chain}/user-signature`,{method:"POST",headers:{"Content-Type":"application/json","Blocto-Application-Identifier":this.appId,"Blocto-Session-Identifier":this.session.code},body:JSON.stringify({method:t,message:e})}).then((e=>_(e,this)));if("undefined"==typeof window)throw new Error("Currently only supported in browser");const s=A(`${this.server}/${this.appId}/${this.chain}/user-signature/${i}`);return I(s),new Promise(((e,t)=>T("message",((n,r)=>{const i=n;i.origin===this.server&&"ETH:FRAME:RESPONSE"===i.data.type&&("APPROVED"===i.data.status&&(r(),j(s),e(i.data.signature)),"DECLINED"===i.data.status&&(r(),j(s),t(new Error(i.data.errorMessage))))}))))}))}handleSendTransaction(t){return e(this,void 0,void 0,(function*(){r(this,R,"m",L).call(this);const{authorizationId:e}=yield fetch(`${this.server}/api/${this.chain}/authz`,{method:"POST",headers:{"Content-Type":"application/json","Blocto-Application-Identifier":this.appId,"Blocto-Session-Identifier":this.session.code},body:JSON.stringify(t.params)}).then((e=>_(e,this)));if("undefined"==typeof window)throw new Error("Currently only supported in browser");const n=A(`${this.server}/${this.appId}/${this.chain}/authz/${e}`);return I(n),new Promise(((e,t)=>T("message",((r,i)=>{const s=r;s.origin===this.server&&"ETH:FRAME:RESPONSE"===s.data.type&&("APPROVED"===s.data.status&&(i(),j(n),e(s.data.txHash)),"DECLINED"===s.data.status&&(i(),j(n),t(new Error(s.data.errorMessage))))}))))}))}handleDisconnect(){return e(this,void 0,void 0,(function*(){this.session.connected=!1,this.session.code=null,this.session.accounts={},S(v)}))}}R=new WeakSet,N=function({chainId:e,rpcUrls:t}){const n=new URL(t[0]).hostname,{chain_id:r,name:i,display_name:s,network_type:o,blocto_service_environment:c,rpc_endpoint_domains:h}=this.supportNetwork[e];if(h.includes(n)){const e=a[c];this.switchableNetwork[r]={name:i,display_name:s,network_type:o,wallet_web_url:e,rpc_url:t[0]}}else console.warn(`The rpc url ${t[0]} is not supported.`)},L=function(){const e=window.ethereum;if(e&&e.isBlocto&&parseInt(e.chainId,16)!==this.chainId)throw new Error("Blocto SDK network mismatched")};var H=[],M=[],K="undefined"!=typeof Uint8Array?Uint8Array:Array,$=!1;function V(){$=!0;for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0;t<64;++t)H[t]=e[t],M[e.charCodeAt(t)]=t;M["-".charCodeAt(0)]=62,M["_".charCodeAt(0)]=63}function q(e,t,n){for(var r,i,s=[],o=t;o<n;o+=3)r=(e[o]<<16)+(e[o+1]<<8)+e[o+2],s.push(H[(i=r)>>18&63]+H[i>>12&63]+H[i>>6&63]+H[63&i]);return s.join("")}function Y(e){var t;$||V();for(var n=e.length,r=n%3,i="",s=[],o=16383,a=0,c=n-r;a<c;a+=o)s.push(q(e,a,a+o>c?c:a+o));return 1===r?(t=e[n-1],i+=H[t>>2],i+=H[t<<4&63],i+="=="):2===r&&(t=(e[n-2]<<8)+e[n-1],i+=H[t>>10],i+=H[t>>4&63],i+=H[t<<2&63],i+="="),s.push(i),s.join("")}function z(e,t,n,r,i){var s,o,a=8*i-r-1,c=(1<<a)-1,h=c>>1,u=-7,f=n?i-1:0,l=n?-1:1,d=e[t+f];for(f+=l,s=d&(1<<-u)-1,d>>=-u,u+=a;u>0;s=256*s+e[t+f],f+=l,u-=8);for(o=s&(1<<-u)-1,s>>=-u,u+=r;u>0;o=256*o+e[t+f],f+=l,u-=8);if(0===s)s=1-h;else{if(s===c)return o?NaN:1/0*(d?-1:1);o+=Math.pow(2,r),s-=h}return(d?-1:1)*o*Math.pow(2,s-r)}function F(e,t,n,r,i,s){var o,a,c,h=8*s-i-1,u=(1<<h)-1,f=u>>1,l=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:s-1,p=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,o=u):(o=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-o))<1&&(o--,c*=2),(t+=o+f>=1?l/c:l*Math.pow(2,1-f))*c>=2&&(o++,c/=2),o+f>=u?(a=0,o=u):o+f>=1?(a=(t*c-1)*Math.pow(2,i),o+=f):(a=t*Math.pow(2,f-1)*Math.pow(2,i),o=0));i>=8;e[n+d]=255&a,d+=p,a/=256,i-=8);for(o=o<<i|a,h+=i;h>0;e[n+d]=255&o,d+=p,o/=256,h-=8);e[n+d-p]|=128*g}var J={}.toString,X=Array.isArray||function(e){return"[object Array]"==J.call(e)};function W(){return Q.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function G(e,t){if(W()<t)throw new RangeError("Invalid typed array length");return Q.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=Q.prototype:(null===e&&(e=new Q(t)),e.length=t),e}function Q(e,t,n){if(!(Q.TYPED_ARRAY_SUPPORT||this instanceof Q))return new Q(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return te(this,e)}return Z(this,e,t,n)}function Z(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),Q.TYPED_ARRAY_SUPPORT?(e=t).__proto__=Q.prototype:e=ne(e,t),e}(e,t,n,r):"string"==typeof t?function(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!Q.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|rt(t,n),i=(e=G(e,r)).write(t,n);return i!==r&&(e=e.slice(0,i)),e}(e,t,n):function(e,t){if(ie(t)){var n=0|re(t.length);return 0===(e=G(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(r=t.length)!=r?G(e,0):ne(e,t);if("Buffer"===t.type&&X(t.data))return ne(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function ee(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function te(e,t){if(ee(t),e=G(e,t<0?0:0|re(t)),!Q.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function ne(e,t){var n=t.length<0?0:0|re(t.length);e=G(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function re(e){if(e>=W())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+W().toString(16)+" bytes");return 0|e}function ie(e){return!(null==e||!e._isBuffer)}function rt(e,t){if(ie(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return Te(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return _e(e).length;default:if(r)return Te(e).length;t=(""+t).toLowerCase(),r=!0}}function oe(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return be(this,t,n);case"utf8":case"utf-8":return ye(this,t,n);case"ascii":return we(this,t,n);case"latin1":case"binary":return me(this,t,n);case"base64":return de(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ve(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function se(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function ae(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=Q.from(t,r)),ie(t))return 0===t.length?-1:ce(e,t,n,r,i);if("number"==typeof t)return t&=255,Q.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):ce(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function ce(e,t,n,r,i){var s,o=1,a=e.length,c=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;o=2,a/=2,c/=2,n/=2}function h(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i){var u=-1;for(s=n;s<a;s++)if(h(e,s)===h(t,-1===u?0:s-u)){if(-1===u&&(u=s),s-u+1===c)return u*o}else-1!==u&&(s-=s-u),u=-1}else for(n+c>a&&(n=a-c),s=n;s>=0;s--){for(var f=!0,l=0;l<c;l++)if(h(e,s+l)!==h(t,l)){f=!1;break}if(f)return s}return-1}function he(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var s=t.length;if(s%2!=0)throw new TypeError("Invalid hex string");r>s/2&&(r=s/2);for(var o=0;o<r;++o){var a=parseInt(t.substr(2*o,2),16);if(isNaN(a))return o;e[n+o]=a}return o}function ue(e,t,n,r){return Be(Te(t,e.length-n),e,n,r)}function fe(e,t,n,r){return Be(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function le(e,t,n,r){return fe(e,t,n,r)}function dt(e,t,n,r){return Be(_e(t),e,n,r)}function pe(e,t,n,r){return Be(function(e,t){for(var n,r,i,s=[],o=0;o<e.length&&!((t-=2)<0);++o)r=(n=e.charCodeAt(o))>>8,i=n%256,s.push(i),s.push(r);return s}(t,e.length-n),e,n,r)}function de(e,t,n){return 0===t&&n===e.length?Y(e):Y(e.slice(t,n))}function ye(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var s,o,a,c,h=e[i],u=null,f=h>239?4:h>223?3:h>191?2:1;if(i+f<=n)switch(f){case 1:h<128&&(u=h);break;case 2:128==(192&(s=e[i+1]))&&(c=(31&h)<<6|63&s)>127&&(u=c);break;case 3:s=e[i+1],o=e[i+2],128==(192&s)&&128==(192&o)&&(c=(15&h)<<12|(63&s)<<6|63&o)>2047&&(c<55296||c>57343)&&(u=c);break;case 4:s=e[i+1],o=e[i+2],a=e[i+3],128==(192&s)&&128==(192&o)&&128==(192&a)&&(c=(15&h)<<18|(63&s)<<12|(63&o)<<6|63&a)>65535&&c<1114112&&(u=c)}null===u?(u=65533,f=1):u>65535&&(u-=65536,r.push(u>>>10&1023|55296),u=56320|1023&u),r.push(u),i+=f}return function(e){var t=e.length;if(t<=ge)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=ge));return n}(r)}Q.TYPED_ARRAY_SUPPORT=void 0===t.TYPED_ARRAY_SUPPORT||t.TYPED_ARRAY_SUPPORT,W(),Q.poolSize=8192,Q._augment=function(e){return e.__proto__=Q.prototype,e},Q.from=function(e,t,n){return Z(null,e,t,n)},Q.TYPED_ARRAY_SUPPORT&&(Q.prototype.__proto__=Uint8Array.prototype,Q.__proto__=Uint8Array),Q.alloc=function(e,t,n){return function(e,t,n,r){return ee(t),t<=0?G(e,t):void 0!==n?"string"==typeof r?G(e,t).fill(n,r):G(e,t).fill(n):G(e,t)}(null,e,t,n)},Q.allocUnsafe=function(e){return te(null,e)},Q.allocUnsafeSlow=function(e){return te(null,e)},Q.isBuffer=function(e){return null!=e&&(!!e._isBuffer||Ce(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&Ce(e.slice(0,0))}(e))},Q.compare=function(e,t){if(!ie(e)||!ie(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,s=Math.min(n,r);i<s;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},Q.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Q.concat=function(e,t){if(!X(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return Q.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=Q.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var s=e[n];if(!ie(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,i),i+=s.length}return r},Q.byteLength=rt,Q.prototype._isBuffer=!0,Q.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)se(this,t,t+1);return this},Q.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)se(this,t,t+3),se(this,t+1,t+2);return this},Q.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)se(this,t,t+7),se(this,t+1,t+6),se(this,t+2,t+5),se(this,t+3,t+4);return this},Q.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?ye(this,0,e):oe.apply(this,arguments)},Q.prototype.equals=function(e){if(!ie(e))throw new TypeError("Argument must be a Buffer");return this===e||0===Q.compare(this,e)},Q.prototype.inspect=function(){var e="";return this.length>0&&(e=this.toString("hex",0,50).match(/.{2}/g).join(" "),this.length>50&&(e+=" ... ")),"<Buffer "+e+">"},Q.prototype.compare=function(e,t,n,r,i){if(!ie(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var s=(i>>>=0)-(r>>>=0),o=(n>>>=0)-(t>>>=0),a=Math.min(s,o),c=this.slice(r,i),h=e.slice(t,n),u=0;u<a;++u)if(c[u]!==h[u]){s=c[u],o=h[u];break}return s<o?-1:o<s?1:0},Q.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},Q.prototype.indexOf=function(e,t,n){return ae(this,e,t,n,!0)},Q.prototype.lastIndexOf=function(e,t,n){return ae(this,e,t,n,!1)},Q.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var s=!1;;)switch(r){case"hex":return he(this,e,t,n);case"utf8":case"utf-8":return ue(this,e,t,n);case"ascii":return fe(this,e,t,n);case"latin1":case"binary":return le(this,e,t,n);case"base64":return dt(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return pe(this,e,t,n);default:if(s)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),s=!0}},Q.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var ge=4096;function we(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function me(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function be(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",s=t;s<n;++s)i+=je(e[s]);return i}function ve(e,t,n){for(var r=e.slice(t,n),i="",s=0;s<r.length;s+=2)i+=String.fromCharCode(r[s]+256*r[s+1]);return i}function xe(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function Oe(e,t,n,r,i,s){if(!ie(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<s)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function Ee(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,s=Math.min(e.length-n,2);i<s;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function Pe(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,s=Math.min(e.length-n,4);i<s;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function Se(e,t,n,r,i,s){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function ke(e,t,n,r,i){return i||Se(e,0,n,4),F(e,t,n,r,23,4),n+4}function Ae(e,t,n,r,i){return i||Se(e,0,n,8),F(e,t,n,r,52,8),n+8}Q.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),Q.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=Q.prototype;else{var i=t-e;n=new Q(i,void 0);for(var s=0;s<i;++s)n[s]=this[s+e]}return n},Q.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||xe(e,t,this.length);for(var r=this[e],i=1,s=0;++s<t&&(i*=256);)r+=this[e+s]*i;return r},Q.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||xe(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},Q.prototype.readUInt8=function(e,t){return t||xe(e,1,this.length),this[e]},Q.prototype.readUInt16LE=function(e,t){return t||xe(e,2,this.length),this[e]|this[e+1]<<8},Q.prototype.readUInt16BE=function(e,t){return t||xe(e,2,this.length),this[e]<<8|this[e+1]},Q.prototype.readUInt32LE=function(e,t){return t||xe(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},Q.prototype.readUInt32BE=function(e,t){return t||xe(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},Q.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||xe(e,t,this.length);for(var r=this[e],i=1,s=0;++s<t&&(i*=256);)r+=this[e+s]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},Q.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||xe(e,t,this.length);for(var r=t,i=1,s=this[e+--r];r>0&&(i*=256);)s+=this[e+--r]*i;return s>=(i*=128)&&(s-=Math.pow(2,8*t)),s},Q.prototype.readInt8=function(e,t){return t||xe(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},Q.prototype.readInt16LE=function(e,t){t||xe(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},Q.prototype.readInt16BE=function(e,t){t||xe(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},Q.prototype.readInt32LE=function(e,t){return t||xe(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},Q.prototype.readInt32BE=function(e,t){return t||xe(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},Q.prototype.readFloatLE=function(e,t){return t||xe(e,4,this.length),z(this,e,!0,23,4)},Q.prototype.readFloatBE=function(e,t){return t||xe(e,4,this.length),z(this,e,!1,23,4)},Q.prototype.readDoubleLE=function(e,t){return t||xe(e,8,this.length),z(this,e,!0,52,8)},Q.prototype.readDoubleBE=function(e,t){return t||xe(e,8,this.length),z(this,e,!1,52,8)},Q.prototype.writeUIntLE=function(e,t,n,r){e=+e,t|=0,n|=0,r||Oe(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,s=0;for(this[t]=255&e;++s<n&&(i*=256);)this[t+s]=e/i&255;return t+n},Q.prototype.writeUIntBE=function(e,t,n,r){e=+e,t|=0,n|=0,r||Oe(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,s=1;for(this[t+i]=255&e;--i>=0&&(s*=256);)this[t+i]=e/s&255;return t+n},Q.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||Oe(this,e,t,1,255,0),Q.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},Q.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||Oe(this,e,t,2,65535,0),Q.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):Ee(this,e,t,!0),t+2},Q.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||Oe(this,e,t,2,65535,0),Q.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):Ee(this,e,t,!1),t+2},Q.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||Oe(this,e,t,4,4294967295,0),Q.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):Pe(this,e,t,!0),t+4},Q.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||Oe(this,e,t,4,4294967295,0),Q.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):Pe(this,e,t,!1),t+4},Q.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);Oe(this,e,t,n,i-1,-i)}var s=0,o=1,a=0;for(this[t]=255&e;++s<n&&(o*=256);)e<0&&0===a&&0!==this[t+s-1]&&(a=1),this[t+s]=(e/o>>0)-a&255;return t+n},Q.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);Oe(this,e,t,n,i-1,-i)}var s=n-1,o=1,a=0;for(this[t+s]=255&e;--s>=0&&(o*=256);)e<0&&0===a&&0!==this[t+s+1]&&(a=1),this[t+s]=(e/o>>0)-a&255;return t+n},Q.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||Oe(this,e,t,1,127,-128),Q.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},Q.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||Oe(this,e,t,2,32767,-32768),Q.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):Ee(this,e,t,!0),t+2},Q.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||Oe(this,e,t,2,32767,-32768),Q.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):Ee(this,e,t,!1),t+2},Q.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||Oe(this,e,t,4,2147483647,-2147483648),Q.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):Pe(this,e,t,!0),t+4},Q.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||Oe(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),Q.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):Pe(this,e,t,!1),t+4},Q.prototype.writeFloatLE=function(e,t,n){return ke(this,e,t,!0,n)},Q.prototype.writeFloatBE=function(e,t,n){return ke(this,e,t,!1,n)},Q.prototype.writeDoubleLE=function(e,t,n){return Ae(this,e,t,!0,n)},Q.prototype.writeDoubleBE=function(e,t,n){return Ae(this,e,t,!1,n)},Q.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,s=r-n;if(this===e&&n<t&&t<r)for(i=s-1;i>=0;--i)e[i+t]=this[i+n];else if(s<1e3||!Q.TYPED_ARRAY_SUPPORT)for(i=0;i<s;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+s),t);return s},Q.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!Q.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var s;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(s=t;s<n;++s)this[s]=e;else{var o=ie(e)?e:Te(new Q(e,r).toString()),a=o.length;for(s=0;s<n-t;++s)this[s+t]=o[s%a]}return this};var Ie=/[^+\/0-9A-Za-z-_]/g;function je(e){return e<16?"0"+e.toString(16):e.toString(16)}function Te(e,t){var n;t=t||1/0;for(var r=e.length,i=null,s=[],o=0;o<r;++o){if((n=e.charCodeAt(o))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&s.push(239,191,189);continue}if(o+1===r){(t-=3)>-1&&s.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&s.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&s.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;s.push(n)}else if(n<2048){if((t-=2)<0)break;s.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;s.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;s.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return s}function _e(e){return function(e){var t,n,r,i,s,o;$||V();var a=e.length;if(a%4>0)throw new Error("Invalid string. Length must be a multiple of 4");s="="===e[a-2]?2:"="===e[a-1]?1:0,o=new K(3*a/4-s),r=s>0?a-4:a;var c=0;for(t=0,n=0;t<r;t+=4,n+=3)i=M[e.charCodeAt(t)]<<18|M[e.charCodeAt(t+1)]<<12|M[e.charCodeAt(t+2)]<<6|M[e.charCodeAt(t+3)],o[c++]=i>>16&255,o[c++]=i>>8&255,o[c++]=255&i;return 2===s?(i=M[e.charCodeAt(t)]<<2|M[e.charCodeAt(t+1)]>>4,o[c++]=255&i):1===s&&(i=M[e.charCodeAt(t)]<<10|M[e.charCodeAt(t+1)]<<4|M[e.charCodeAt(t+2)]>>2,o[c++]=i>>8&255,o[c++]=255&i),o}(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(Ie,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function Be(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function Ce(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function Re(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ne=function(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var r=0;r<e.length;r++){var i=e.charAt(r),s=i.charCodeAt(0);if(255!==t[s])throw new TypeError(i+" is ambiguous");t[s]=r}var o=e.length,a=e.charAt(0),c=Math.log(o)/Math.log(256),h=Math.log(256)/Math.log(o);function u(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;for(var n=0,r=0,i=0;e[n]===a;)r++,n++;for(var s=(e.length-n)*c+1>>>0,h=new Uint8Array(s);e[n];){var u=t[e.charCodeAt(n)];if(255===u)return;for(var f=0,l=s-1;(0!==u||f<i)&&-1!==l;l--,f++)u+=o*h[l]>>>0,h[l]=u%256>>>0,u=u/256>>>0;if(0!==u)throw new Error("Non-zero carry");i=f,n++}for(var d=s-i;d!==s&&0===h[d];)d++;for(var p=new Uint8Array(r+(s-d)),g=r;d!==s;)p[g++]=h[d++];return p}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var n=0,r=0,i=0,s=t.length;i!==s&&0===t[i];)i++,n++;for(var c=(s-i)*h+1>>>0,u=new Uint8Array(c);i!==s;){for(var f=t[i],l=0,d=c-1;(0!==f||l<r)&&-1!==d;d--,l++)f+=256*u[d]>>>0,u[d]=f%o>>>0,f=f/o>>>0;if(0!==f)throw new Error("Non-zero carry");r=l,i++}for(var p=c-r;p!==c&&0===u[p];)p++;for(var g=a.repeat(n);p<c;++p)g+=e.charAt(u[p]);return g},decodeUnsafe:u,decode:function(e){var t=u(e);if(t)return t;throw new Error("Non-base"+o+" character")}}},Le=Re(Ne("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"));let De;try{De=n(1373)}catch(e){}class Ue extends k{constructor({net:e="mainnet-beta",server:t,appId:n,rpc:i,session:s}){if(super(s),o(e,"'net' is required"),o(l.includes(e),"unsupported net"),this.net=e,this.rpc=i||("mainnet-beta"===e?"https://free.rpcpool.com":`https://api.${e}.solana.com`),this.server=t||f[this.net]||"",this.appId=n||m,!De)throw new Error("No @solana/web3.js installed. Please install it to interact with Solana.")}request(t){return e(this,void 0,void 0,(function*(){this.session.connected||(yield this.connect());try{let e=null,n=null;switch(t.method){case"connect":n=yield this.fetchAccounts();break;case"disconnect":this.disconnect();break;case"getAccounts":n=this.session.accounts.solana.length?this.session.accounts.solana:yield this.fetchAccounts();break;case"getAccountInfo":{const e=yield this.handleReadRequests(t),[r,i]=e.result.value.data;n=Object.assign(Object.assign({},e.result.value),{data:Q.from(r,i),owner:new De.PublicKey(e.result.value.owner)});break}case"convertToProgramWalletTransaction":n=yield this.handleConvertTransaction(t);break;case"signAndSendTransaction":n=yield this.handleSignAndSendTransaction(t);break;case"signTransaction":case"signAllTransactions":throw new Error(`Blocto is program wallet, which doesn't support ${t.method}. Use signAndSendTransaction instead.`);default:e=yield this.handleReadRequests(t)}if(e&&!e.result&&e.error){const t=e.error.message?e.error.message:"Request failed";throw new Error(t)}return e?e.result:n}catch(e){throw console.error(e),e}}))}connect(){return e(this,void 0,void 0,(function*(){const e=window.solana;return e&&e.isBlocto?new Promise((t=>{e.on("connect",(()=>{this.session.accounts.solana=[e.publicKey.toBase58()],t()})),e.connect()})):(this.tryRetrieveSessionFromStorage("solana"),new Promise(((e,t)=>{if("undefined"==typeof window)return t("Currently only supported in browser");if(this.session.connected)return e();const n=encodeURIComponent(window.location.origin),r=A(`${this.server}/${this.appId}/solana/authn?l6n=${n}`);I(r),T("message",((n,i)=>{const s=n;if(s.origin===this.server){if("SOL:FRAME:RESPONSE"===s.data.type){i(),j(r),this.session.code=s.data.code,this.session.connected=!0,this.eventListeners.connect.forEach((e=>e(this.net)));const t=s.data.address;this.formatAndSetSessionAccount(t),P(this.sessionKey,{code:this.session.code,address:t},g),e()}"SOL:FRAME:CLOSE"===s.data.type&&(i(),j(r),t(new Error("User declined the login request")))}}))})))}))}disconnect(){return e(this,void 0,void 0,(function*(){const e=window.solana;e&&e.isBlocto?yield e.disconnect():(this.session.code=null,this.session.accounts={},this.eventListeners.disconnect.forEach((e=>e(null))),this.session.connected=!1)}))}fetchAccounts(){return e(this,void 0,void 0,(function*(){const{accounts:e}=yield fetch(`${this.server}/api/solana/accounts`,{headers:{"Blocto-Application-Identifier":this.appId,"Blocto-Session-Identifier":this.session.code}}).then((e=>e.json()));return this.session.accounts.solana=e,e}))}handleReadRequests(t){return e(this,void 0,void 0,(function*(){return fetch(this.rpc,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Object.assign({id:1,jsonrpc:"2.0"},t))}).then((e=>e.json()))}))}convertToProgramWalletTransaction(t){return e(this,void 0,void 0,(function*(){const e=window.solana;if(e&&e.isBlocto)return e.convertToProgramWalletTransaction(t);const n=yield this.request({method:"convertToProgramWalletTransaction",params:{message:t.serializeMessage().toString("hex")}});return this.toTransaction(n,[])}))}signAndSendTransaction(t,n){return e(this,void 0,void 0,(function*(){const e=window.solana;if(e&&e.isBlocto)return e.signAndSendTransaction(t);const r={};if(n){n.commitment&&(r.commitment=n.commitment);const e=n?n._rpcEndpoint:null;e&&e!==this.rpc&&(this.rpc=e,this.disconnect(),yield this.connect())}return this.request({method:"signAndSendTransaction",params:Object.assign({signatures:yield this.collectSignatures(t),message:t.serializeMessage().toString("hex")},r)})}))}toTransaction(t,n){return e(this,void 0,void 0,(function*(){const e=De.Message.from(Q.from(t,"hex")),r=new De.Transaction;return r.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(r.feePayer=e.accountKeys[0]),n.forEach(((t,n)=>{const i={signature:t===De.PublicKey.default.toBase58()?null:Le.decode(t),publicKey:e.accountKeys[n]};r.signatures.push(i)})),e.instructions.forEach((t=>{const n=t.accounts.map((t=>({pubkey:e.accountKeys[t],isSigner:t<e.header.numRequiredSignatures,isWritable:e.isAccountWritable(t)})));r.instructions.push(new De.TransactionInstruction({keys:n,programId:e.accountKeys[t.programIdIndex],data:Le.decode(t.data)}))})),r}))}collectSignatures(t){return e(this,void 0,void 0,(function*(){return t.signatures.reduce(((e,t)=>(t.signature&&(e[t.publicKey.toBase58()]=t.signature.toString("hex")),e)),{})}))}handleConvertTransaction(t){return e(this,void 0,void 0,(function*(){return fetch(`${this.server}/api/solana/convertToWalletTx`,{method:"POST",headers:{"Content-Type":"application/json","Blocto-Application-Identifier":this.appId,"Blocto-Session-Identifier":this.session.code},body:JSON.stringify(t.params)}).then((e=>_(e,this)))}))}handleSignAndSendTransaction(t){return e(this,void 0,void 0,(function*(){const{authorizationId:e}=yield fetch(`${this.server}/api/solana/authz`,{method:"POST",headers:{"Content-Type":"application/json","Blocto-Application-Identifier":this.appId,"Blocto-Session-Identifier":this.session.code},body:JSON.stringify(t.params)}).then((e=>_(e,this)));if("undefined"==typeof window)throw new Error("Currently only supported in browser");const n=A(`${this.server}/${this.appId}/solana/authz/${e}`);return I(n),new Promise(((e,t)=>T("message",((r,i)=>{const s=r;s.origin===this.server&&"SOL:FRAME:RESPONSE"===s.data.type&&("APPROVED"===s.data.status&&(i(),j(n),e(s.data.txHash)),"DECLINED"===s.data.status&&(i(),j(n),t(new Error(s.data.errorMessage))))}))))}))}}class He extends k{constructor({chainId:e,server:t,appId:n,session:i}){super(i),this.publicKey=[],this.authKey="",o(e,"'chainId' is required"),o(n,"It is necessary to interact with Blocto wallet via your app id. Please visit https://developers.blocto.app for more details."),this.chainId=e,this.networkName=y[e],this.api=w[e];const s=u[e];this.appId=n||m,this.server=t||s||""}get publicAccount(){return{address:this.session.accounts.aptos[0]||null,publicKey:this.publicKey.length?this.publicKey:null,authKey:null,minKeysRequired:2}}network(){return e(this,void 0,void 0,(function*(){return{name:this.networkName,api:this.api,chainId:this.chainId.toString()}}))}isConnected(){return e(this,void 0,void 0,(function*(){return this.session.connected}))}signTransaction(t){return e(this,void 0,void 0,(function*(){const e=window.bloctoAptos;if(e)return e.signTransaction(t);if((yield this.isConnected())||(yield this.connect()),!this.session.accounts.aptos.length)throw new Error("Fail to get account");throw new Error("signTransaction method not supported.")}))}disconnect(){return e(this,void 0,void 0,(function*(){const e=window.bloctoAptos;e?yield e.disconnect():(this.session.code=null,this.session.accounts={},this.session.connected=!1)}))}signAndSubmitTransaction(t,n={}){return e(this,void 0,void 0,(function*(){const e=window.bloctoAptos;if(e)return e.signAndSubmitTransaction(t,n);if((yield this.isConnected())||(yield this.connect()),!this.session.accounts.aptos.length)throw new Error("Fail to get account");const{authorizationId:r}=yield fetch(`${this.server}/api/aptos/authz`,{method:"POST",headers:{"Content-Type":"application/json","Blocto-Application-Identifier":this.appId,"Blocto-Session-Identifier":this.session.code},body:JSON.stringify(Object.assign(Object.assign({},t),n))}).then((e=>_(e,this)));if("undefined"==typeof window)throw new Error("Currently only supported in browser");const i=A(`${this.server}/${this.appId}/aptos/authz/${r}`);return I(i),new Promise(((e,t)=>T("message",((n,r)=>{const s=n;s.origin===this.server&&"APTOS:FRAME:RESPONSE"===s.data.type&&("APPROVED"===s.data.status&&(r(),j(i),e({hash:s.data.txHash})),"DECLINED"===s.data.status&&(r(),j(i),t(new Error(s.data.errorMessage))))}))))}))}signMessage(t){return e(this,void 0,void 0,(function*(){const e=window.bloctoAptos,n=(e=>{var t,n;const r=Object.assign({},e),{message:i,nonce:s,address:o,application:a,chainId:c}=e;return"string"!=typeof i&&(r.message=null!==(t=String(i))&&void 0!==t?t:""),"string"!=typeof s&&(r.nonce=null!==(n=String(s))&&void 0!==n?n:""),o&&"boolean"!=typeof o&&(r.address=!!o),a&&"boolean"!=typeof a&&(r.application=!!a),c&&"boolean"!=typeof c&&(r.chainId=!!c),r})(t);if(e)return e.signMessage(n);if((yield this.isConnected())||(yield this.connect()),!this.session.accounts.aptos.length)throw new Error("Fail to get account");if("undefined"==typeof window)throw new Error("Currently only supported in browser");const{signatureId:r}=yield fetch(`${this.server}/api/aptos/user-signature`,{method:"POST",headers:{"Content-Type":"application/json","Blocto-Application-Identifier":this.appId,"Blocto-Session-Identifier":this.session.code},body:JSON.stringify(n)}).then((e=>_(e,this))),i=A(`${this.server}/${this.appId}/aptos/user-signature/${r}`);return I(i),new Promise(((e,t)=>T("message",((n,r)=>{const s=n;s.origin===this.server&&"APTOS:FRAME:RESPONSE"===s.data.type&&("APPROVED"===s.data.status&&(r(),j(i),e(s.data)),"DECLINED"===s.data.status&&(r(),j(i),t(new Error(s.data.errorMessage))))}))))}))}connect(){return e(this,void 0,void 0,(function*(){const t=window.bloctoAptos;return t?new Promise(((e,n)=>setTimeout((()=>t.connect().then(e).catch(n)),10))):(this.tryRetrieveSessionFromStorage("aptos"),new Promise(((t,n)=>{if("undefined"==typeof window)return n("Currently only supported in browser");if(this.session.connected&&this.session.accounts.aptos.length)return t({address:this.session.accounts.aptos[0],publicKey:this.publicKey,authKey:null,minKeysRequired:2});const r=encodeURIComponent(window.location.origin),i=A(`${this.server}/${this.appId}/aptos/authn?l6n=${r}`);I(i),T("message",((r,s)=>e(this,void 0,void 0,(function*(){const e=r;if(e.origin===this.server){if("APTOS:FRAME:RESPONSE"===e.data.type){s(),j(i),this.session.code=e.data.code,this.session.connected=!0;const r=e.data.address;if(this.formatAndSetSessionAccount(r),P(this.sessionKey,{code:this.session.code,address:r},g),!this.session.accounts.aptos.length)return n();try{const{public_keys:e}=yield fetch(`${this.server}/blocto/aptos/accounts/${this.session.accounts.aptos[0]}`).then((e=>e.json()));this.publicKey=e||[],t({address:this.session.accounts.aptos[0]||"",publicKey:this.publicKey,authKey:null,minKeysRequired:2})}catch(t){return n(e)}}"APTOS:FRAME:CLOSE"===e.data.type&&(s(),j(i),n(new Error("User declined the login request")))}}))))})))}))}fetchAddress(){return e(this,void 0,void 0,(function*(){const{accounts:e}=yield fetch(`${this.server}/api/aptos/accounts`,{headers:{"Blocto-Application-Identifier":this.appId,"Blocto-Session-Identifier":this.session.code}}).then((e=>_(e,this)));return this.session.accounts.aptos=e||[],this.session.accounts.aptos[0]}))}}const Me={connected:!1,code:null,accounts:{}};return class{constructor({appId:e,ethereum:t,solana:n,aptos:r}){t&&(this.ethereum=new U(Object.assign(Object.assign({},t),{appId:e,session:Me}))),n&&(this.solana=new Ue(Object.assign(Object.assign({},n),{appId:e,session:Me}))),r&&(this.aptos=new He(Object.assign(Object.assign({},r),{appId:e,session:Me})))}}}()}).call(this,n(31))}}]);