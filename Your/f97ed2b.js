(window.webpackJsonp=window.webpackJsonp||[]).push([[1183],{112:function(t,e,r){"use strict";r.d(e,"a",(function(){return h})),r.d(e,"b",(function(){return l}));var n=r(21);class h{constructor(t,e={alpha:"true"}){if(this.restorables=new Array,t instanceof WebGLRenderingContext||"undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext)this.gl=t,this.canvas=this.gl.canvas;else{let canvas=t;this.gl=canvas.getContext("webgl2",e)||canvas.getContext("webgl",e),this.canvas=canvas,canvas.addEventListener("webglcontextlost",(t=>{t&&t.preventDefault()})),canvas.addEventListener("webglcontextrestored",(t=>{for(let i=0,t=this.restorables.length;i<t;i++)this.restorables[i].restore()}))}}addRestorable(t){this.restorables.push(t)}removeRestorable(t){let e=this.restorables.indexOf(t);e>-1&&this.restorables.splice(e,1)}}const o=771;class l{static getDestGLBlendMode(t){switch(t){case n.k.Normal:return o;case n.k.Additive:return 1;case n.k.Multiply:case n.k.Screen:return o;default:throw new Error("Unknown blend mode: "+t)}}static getSourceColorGLBlendMode(t,e=!1){switch(t){case n.k.Normal:case n.k.Additive:return e?1:770;case n.k.Multiply:return 774;case n.k.Screen:return 1;default:throw new Error("Unknown blend mode: "+t)}}static getSourceAlphaGLBlendMode(t){switch(t){case n.k.Normal:case n.k.Additive:return 1;case n.k.Multiply:return o;case n.k.Screen:return 769;default:throw new Error("Unknown blend mode: "+t)}}}},155:function(t,e,r){"use strict";r.d(e,"a",(function(){return h}));var n=r(84);class h{constructor(t=0,e=0,r=0){this.x=0,this.y=0,this.z=0,this.x=t,this.y=e,this.z=r}setFrom(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}set(t,e,r){return this.x=t,this.y=e,this.z=r,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}scale(s){return this.x*=s,this.y*=s,this.z*=s,this}normalize(){let t=this.length();return 0==t||(t=1/t,this.x*=t,this.y*=t,this.z*=t),this}cross(t){return this.set(this.y*t.z-this.z*t.y,this.z*t.x-this.x*t.z,this.x*t.y-this.y*t.x)}multiply(t){let e=t.values;return this.set(this.x*e[n.a]+this.y*e[n.b]+this.z*e[n.c]+e[n.d],this.x*e[n.e]+this.y*e[n.f]+this.z*e[n.g]+e[n.h],this.x*e[n.i]+this.y*e[n.j]+this.z*e[n.k]+e[n.l])}project(t){let e=t.values,r=1/(this.x*e[n.m]+this.y*e[n.n]+this.z*e[n.o]+e[n.p]);return this.set((this.x*e[n.a]+this.y*e[n.b]+this.z*e[n.c]+e[n.d])*r,(this.x*e[n.e]+this.y*e[n.f]+this.z*e[n.g]+e[n.h])*r,(this.x*e[n.i]+this.y*e[n.j]+this.z*e[n.k]+e[n.l])*r)}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}distance(t){let a=t.x-this.x,b=t.y-this.y,e=t.z-this.z;return Math.sqrt(a*a+b*b+e*e)}}},175:function(t,e,r){"use strict";r.d(e,"a",(function(){return h}));var n=r(112);class h{getProgram(){return this.program}getVertexShader(){return this.vertexShader}getFragmentShader(){return this.fragmentShader}getVertexShaderSource(){return this.vsSource}getFragmentSource(){return this.fsSource}constructor(t,e,r){this.vertexShader=e,this.fragmentShader=r,this.vs=null,this.fs=null,this.program=null,this.tmp2x2=new Float32Array(4),this.tmp3x3=new Float32Array(9),this.tmp4x4=new Float32Array(16),this.vsSource=e,this.fsSource=r,this.context=t instanceof n.a?t:new n.a(t),this.context.addRestorable(this),this.compile()}compile(){let t=this.context.gl;try{if(this.vs=this.compileShader(t.VERTEX_SHADER,this.vertexShader),!this.vs)throw new Error("Couldn't compile vertex shader.");if(this.fs=this.compileShader(t.FRAGMENT_SHADER,this.fragmentShader),!this.fs)throw new Error("Couldn#t compile fragment shader.");this.program=this.compileProgram(this.vs,this.fs)}catch(t){throw this.dispose(),t}}compileShader(t,source){let e=this.context.gl,r=e.createShader(t);if(!r)throw new Error("Couldn't create shader.");if(e.shaderSource(r,source),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS)){let t="Couldn't compile shader: "+e.getShaderInfoLog(r);if(e.deleteShader(r),!e.isContextLost())throw new Error(t)}return r}compileProgram(t,e){let r=this.context.gl,n=r.createProgram();if(!n)throw new Error("Couldn't compile program.");if(r.attachShader(n,t),r.attachShader(n,e),r.linkProgram(n),!r.getProgramParameter(n,r.LINK_STATUS)){let t="Couldn't compile shader program: "+r.getProgramInfoLog(n);if(r.deleteProgram(n),!r.isContextLost())throw new Error(t)}return n}restore(){this.compile()}bind(){this.context.gl.useProgram(this.program)}unbind(){this.context.gl.useProgram(null)}setUniformi(t,e){this.context.gl.uniform1i(this.getUniformLocation(t),e)}setUniformf(t,e){this.context.gl.uniform1f(this.getUniformLocation(t),e)}setUniform2f(t,e,r){this.context.gl.uniform2f(this.getUniformLocation(t),e,r)}setUniform3f(t,e,r,n){this.context.gl.uniform3f(this.getUniformLocation(t),e,r,n)}setUniform4f(t,e,r,n,h){this.context.gl.uniform4f(this.getUniformLocation(t),e,r,n,h)}setUniform2x2f(t,e){let r=this.context.gl;this.tmp2x2.set(e),r.uniformMatrix2fv(this.getUniformLocation(t),!1,this.tmp2x2)}setUniform3x3f(t,e){let r=this.context.gl;this.tmp3x3.set(e),r.uniformMatrix3fv(this.getUniformLocation(t),!1,this.tmp3x3)}setUniform4x4f(t,e){let r=this.context.gl;this.tmp4x4.set(e),r.uniformMatrix4fv(this.getUniformLocation(t),!1,this.tmp4x4)}getUniformLocation(t){let e=this.context.gl;if(!this.program)throw new Error("Shader not compiled.");let r=e.getUniformLocation(this.program,t);if(!r&&!e.isContextLost())throw new Error(`Couldn't find location for uniform ${t}`);return r}getAttributeLocation(t){let e=this.context.gl;if(!this.program)throw new Error("Shader not compiled.");let r=e.getAttribLocation(this.program,t);if(-1==r&&!e.isContextLost())throw new Error(`Couldn't find location for attribute ${t}`);return r}dispose(){this.context.removeRestorable(this);let t=this.context.gl;this.vs&&(t.deleteShader(this.vs),this.vs=null),this.fs&&(t.deleteShader(this.fs),this.fs=null),this.program&&(t.deleteProgram(this.program),this.program=null)}static newColoredTextured(t){let e=`\nattribute vec4 ${h.POSITION};\nattribute vec4 ${h.COLOR};\nattribute vec2 ${h.TEXCOORDS};\nuniform mat4 ${h.MVP_MATRIX};\nvarying vec4 v_color;\nvarying vec2 v_texCoords;\n\nvoid main () {\n\tv_color = ${h.COLOR};\n\tv_texCoords = ${h.TEXCOORDS};\n\tgl_Position = ${h.MVP_MATRIX} * ${h.POSITION};\n}\n`;return new h(t,e,"\n#ifdef GL_ES\n\t#define LOWP lowp\n\tprecision mediump float;\n#else\n\t#define LOWP\n#endif\nvarying LOWP vec4 v_color;\nvarying vec2 v_texCoords;\nuniform sampler2D u_texture;\n\nvoid main () {\n\tgl_FragColor = v_color * texture2D(u_texture, v_texCoords);\n}\n")}static newTwoColoredTextured(t){let e=`\nattribute vec4 ${h.POSITION};\nattribute vec4 ${h.COLOR};\nattribute vec4 ${h.COLOR2};\nattribute vec2 ${h.TEXCOORDS};\nuniform mat4 ${h.MVP_MATRIX};\nvarying vec4 v_light;\nvarying vec4 v_dark;\nvarying vec2 v_texCoords;\n\nvoid main () {\n\tv_light = ${h.COLOR};\n\tv_dark = ${h.COLOR2};\n\tv_texCoords = ${h.TEXCOORDS};\n\tgl_Position = ${h.MVP_MATRIX} * ${h.POSITION};\n}\n`;return new h(t,e,"\n#ifdef GL_ES\n\t#define LOWP lowp\n\tprecision mediump float;\n#else\n\t#define LOWP\n#endif\nvarying LOWP vec4 v_light;\nvarying LOWP vec4 v_dark;\nvarying vec2 v_texCoords;\nuniform sampler2D u_texture;\n\nvoid main () {\n\tvec4 texColor = texture2D(u_texture, v_texCoords);\n\tgl_FragColor.a = texColor.a * v_light.a;\n\tgl_FragColor.rgb = ((texColor.a - 1.0) * v_dark.a + 1.0 - texColor.rgb) * v_dark.rgb + texColor.rgb * v_light.rgb;\n}\n")}static newColored(t){let e=`\nattribute vec4 ${h.POSITION};\nattribute vec4 ${h.COLOR};\nuniform mat4 ${h.MVP_MATRIX};\nvarying vec4 v_color;\n\nvoid main () {\n\tv_color = ${h.COLOR};\n\tgl_Position = ${h.MVP_MATRIX} * ${h.POSITION};\n}\n`;return new h(t,e,"\n#ifdef GL_ES\n\t#define LOWP lowp\n\tprecision mediump float;\n#else\n\t#define LOWP\n#endif\nvarying LOWP vec4 v_color;\n\nvoid main () {\n\tgl_FragColor = v_color;\n}\n")}}h.MVP_MATRIX="u_projTrans",h.POSITION="a_position",h.COLOR="a_color",h.COLOR2="a_color2",h.TEXCOORDS="a_texCoords",h.SAMPLER="u_texture"},207:function(t,e,r){"use strict";r.d(e,"a",(function(){return n.a})),r.d(e,"A",(function(){return h.a})),r.d(e,"b",(function(){return o.a})),r.d(e,"e",(function(){return l.a})),r.d(e,"f",(function(){return c.a})),r.d(e,"O",(function(){return c.b})),r.d(e,"g",(function(){return d.a})),r.d(e,"h",(function(){return f.a})),r.d(e,"i",(function(){return f.b})),r.d(e,"j",(function(){return f.c})),r.d(e,"k",(function(){return f.d})),r.d(e,"l",(function(){return f.e})),r.d(e,"m",(function(){return f.f})),r.d(e,"n",(function(){return f.g})),r.d(e,"o",(function(){return f.h})),r.d(e,"p",(function(){return f.i})),r.d(e,"q",(function(){return f.j})),r.d(e,"r",(function(){return f.k})),r.d(e,"s",(function(){return f.l})),r.d(e,"t",(function(){return f.m})),r.d(e,"u",(function(){return f.n})),r.d(e,"v",(function(){return f.o})),r.d(e,"w",(function(){return f.p})),r.d(e,"y",(function(){return f.q})),r.d(e,"z",(function(){return w.c})),r.d(e,"Q",(function(){return w.g})),r.d(e,"C",(function(){return w.d})),r.d(e,"D",(function(){return w.e})),r.d(e,"M",(function(){return w.f})),r.d(e,"d",(function(){return w.b})),r.d(e,"c",(function(){return w.a})),r.d(e,"R",(function(){return w.h})),r.d(e,"B",(function(){return x.a})),r.d(e,"F",(function(){return v.b})),r.d(e,"E",(function(){return v.a})),r.d(e,"G",(function(){return m.a})),r.d(e,"H",(function(){return C.a})),r.d(e,"I",(function(){return C.b})),r.d(e,"J",(function(){return L.a})),r.d(e,"K",(function(){return S.a})),r.d(e,"L",(function(){return R})),r.d(e,"P",(function(){return A.a})),r.d(e,"x",(function(){return _.a})),r.d(e,"S",(function(){return _.b})),r.d(e,"N",(function(){return T.Mb}));var n=r(1246),h=r(655),o=r(1247),l=r(361),c=r(656),d=r(1248),f=r(84),w=r(161),x=r(499),v=r(657),m=r(175),C=r(500),L=r(658),S=r(659);class R{constructor(canvas,t){this.time=new T.Mb,t.pathPrefix||(t.pathPrefix=""),t.app||(t.app={loadAssets:()=>{},initialize:()=>{},update:()=>{},render:()=>{},error:()=>{}}),t.webglConfig||(t.webglConfig={alpha:!0}),this.htmlCanvas=canvas,this.context=new _.a(canvas,t.webglConfig),this.renderer=new v.b(canvas,this.context),this.gl=this.context.gl,this.assetManager=new n.a(this.context,t.pathPrefix),this.input=new c.a(canvas),t.app.loadAssets&&t.app.loadAssets(this);let e=()=>{requestAnimationFrame(e),this.time.update(),t.app.update&&t.app.update(this,this.time.delta),t.app.render&&t.app.render(this)},r=()=>{this.assetManager.isLoadingComplete()?this.assetManager.hasErrors()?t.app.error&&t.app.error(this,this.assetManager.getErrors()):(t.app.initialize&&t.app.initialize(this),e()):requestAnimationFrame(r)};requestAnimationFrame(r)}clear(t,g,b,a){this.gl.clearColor(t,g,b,a),this.gl.clear(this.gl.COLOR_BUFFER_BIT)}}var A=r(155),_=r(112),T=r(21)},499:function(t,e,r){"use strict";r.d(e,"a",(function(){return o}));var n=r(161),h=r(112);class o{constructor(t,e=!0,r=10920){if(this.drawCalls=0,this.isDrawing=!1,this.shader=null,this.lastTexture=null,this.verticesLength=0,this.indicesLength=0,this.cullWasEnabled=!1,r>10920)throw new Error("Can't have more than 10920 triangles per batch: "+r);this.context=t instanceof h.a?t:new h.a(t);let o=e?[new n.d,new n.b,new n.f,new n.a]:[new n.d,new n.b,new n.f];this.mesh=new n.c(t,o,r,3*r);let l=this.context.gl;this.srcColorBlend=l.SRC_ALPHA,this.srcAlphaBlend=l.ONE,this.dstBlend=l.ONE_MINUS_SRC_ALPHA}begin(t){if(this.isDrawing)throw new Error("PolygonBatch is already drawing. Call PolygonBatch.end() before calling PolygonBatch.begin()");this.drawCalls=0,this.shader=t,this.lastTexture=null,this.isDrawing=!0;let e=this.context.gl;e.enable(e.BLEND),e.blendFuncSeparate(this.srcColorBlend,this.dstBlend,this.srcAlphaBlend,this.dstBlend),o.disableCulling&&(this.cullWasEnabled=e.isEnabled(e.CULL_FACE),this.cullWasEnabled&&e.disable(e.CULL_FACE))}setBlendMode(t,e,r){if((this.srcColorBlend!=t||this.srcAlphaBlend!=e||this.dstBlend!=r)&&(this.srcColorBlend=t,this.srcAlphaBlend=e,this.dstBlend=r,this.isDrawing)){this.flush(),this.context.gl.blendFuncSeparate(t,r,e,r)}}draw(t,e,r){t!=this.lastTexture?(this.flush(),this.lastTexture=t):(this.verticesLength+e.length>this.mesh.getVertices().length||this.indicesLength+r.length>this.mesh.getIndices().length)&&this.flush();let n=this.mesh.numVertices();this.mesh.getVertices().set(e,this.verticesLength),this.verticesLength+=e.length,this.mesh.setVerticesLength(this.verticesLength);let h=this.mesh.getIndices();for(let i=this.indicesLength,t=0;t<r.length;i++,t++)h[i]=r[t]+n;this.indicesLength+=r.length,this.mesh.setIndicesLength(this.indicesLength)}flush(){if(0!=this.verticesLength){if(!this.lastTexture)throw new Error("No texture set.");if(!this.shader)throw new Error("No shader set.");this.lastTexture.bind(),this.mesh.draw(this.shader,this.context.gl.TRIANGLES),this.verticesLength=0,this.indicesLength=0,this.mesh.setVerticesLength(0),this.mesh.setIndicesLength(0),this.drawCalls++,o.globalDrawCalls++}}end(){if(!this.isDrawing)throw new Error("PolygonBatch is not drawing. Call PolygonBatch.begin() before calling PolygonBatch.end()");(this.verticesLength>0||this.indicesLength>0)&&this.flush(),this.shader=null,this.lastTexture=null,this.isDrawing=!1;let t=this.context.gl;t.disable(t.BLEND),o.disableCulling&&this.cullWasEnabled&&t.enable(t.CULL_FACE)}getDrawCalls(){return this.drawCalls}static getAndResetGlobalDrawCalls(){let t=o.globalDrawCalls;return o.globalDrawCalls=0,t}dispose(){this.mesh.dispose()}}o.disableCulling=!1,o.globalDrawCalls=0},500:function(t,e,r){"use strict";r.d(e,"a",(function(){return c})),r.d(e,"b",(function(){return n}));var n,h=r(21),o=r(161),l=r(112);class c{constructor(t,e=10920){if(this.isDrawing=!1,this.shapeType=n.Filled,this.color=new h.q(1,1,1,1),this.shader=null,this.vertexIndex=0,this.tmp=new h.Yb,e>10920)throw new Error("Can't have more than 10920 triangles per batch: "+e);this.context=t instanceof l.a?t:new l.a(t),this.mesh=new o.c(t,[new o.d,new o.b],e,0);let r=this.context.gl;this.srcColorBlend=r.SRC_ALPHA,this.srcAlphaBlend=r.ONE,this.dstBlend=r.ONE_MINUS_SRC_ALPHA}begin(t){if(this.isDrawing)throw new Error("ShapeRenderer.begin() has already been called");this.shader=t,this.vertexIndex=0,this.isDrawing=!0;let e=this.context.gl;e.enable(e.BLEND),e.blendFuncSeparate(this.srcColorBlend,this.dstBlend,this.srcAlphaBlend,this.dstBlend)}setBlendMode(t,e,r){if(this.srcColorBlend=t,this.srcAlphaBlend=e,this.dstBlend=r,this.isDrawing){this.flush(),this.context.gl.blendFuncSeparate(t,r,e,r)}}setColor(t){this.color.setFromColor(t)}setColorWith(t,g,b,a){this.color.set(t,g,b,a)}point(t,e,r){this.check(n.Point,1),r||(r=this.color),this.vertex(t,e,r)}line(t,e,r,h,o){this.check(n.Line,2);this.mesh.getVertices(),this.vertexIndex;o||(o=this.color),this.vertex(t,e,o),this.vertex(r,h,o)}triangle(t,e,r,h,o,l,c,d,f,w){this.check(t?n.Filled:n.Line,3);this.mesh.getVertices(),this.vertexIndex;d||(d=this.color),f||(f=this.color),w||(w=this.color),t?(this.vertex(e,r,d),this.vertex(h,o,f),this.vertex(l,c,w)):(this.vertex(e,r,d),this.vertex(h,o,f),this.vertex(h,o,d),this.vertex(l,c,f),this.vertex(l,c,d),this.vertex(e,r,f))}quad(t,e,r,h,o,l,c,d,f,w,x,v,m){this.check(t?n.Filled:n.Line,3);this.mesh.getVertices(),this.vertexIndex;w||(w=this.color),x||(x=this.color),v||(v=this.color),m||(m=this.color),t?(this.vertex(e,r,w),this.vertex(h,o,x),this.vertex(l,c,v),this.vertex(l,c,v),this.vertex(d,f,m),this.vertex(e,r,w)):(this.vertex(e,r,w),this.vertex(h,o,x),this.vertex(h,o,x),this.vertex(l,c,v),this.vertex(l,c,v),this.vertex(d,f,m),this.vertex(d,f,m),this.vertex(e,r,w))}rect(t,e,r,n,h,o){this.quad(t,e,r,e+n,r,e+n,r+h,e,r+h,o,o,o,o)}rectLine(t,e,r,h,o,l,c){this.check(t?n.Filled:n.Line,8),c||(c=this.color);let d=this.tmp.set(o-r,e-h);d.normalize(),l*=.5;let f=d.x*l,w=d.y*l;t?(this.vertex(e+f,r+w,c),this.vertex(e-f,r-w,c),this.vertex(h+f,o+w,c),this.vertex(h-f,o-w,c),this.vertex(h+f,o+w,c),this.vertex(e-f,r-w,c)):(this.vertex(e+f,r+w,c),this.vertex(e-f,r-w,c),this.vertex(h+f,o+w,c),this.vertex(h-f,o-w,c),this.vertex(h+f,o+w,c),this.vertex(e+f,r+w,c),this.vertex(h-f,o-w,c),this.vertex(e-f,r-w,c))}x(t,e,r){this.line(t-r,e-r,t+r,e+r),this.line(t-r,e+r,t+r,e-r)}polygon(t,e,r,h){if(r<3)throw new Error("Polygon must contain at least 3 vertices");this.check(n.Line,2*r),h||(h=this.color);this.mesh.getVertices(),this.vertexIndex;r<<=1;let o=t[e<<=1],l=t[e+1],c=e+r;for(let i=e,n=e+r-2;i<n;i+=2){let e=t[i],r=t[i+1],n=0,d=0;i+2>=c?(n=o,d=l):(n=t[i+2],d=t[i+3]),this.vertex(e,r,h),this.vertex(n,d,h)}}circle(t,e,r,o,l,c=0){if(0==c&&(c=Math.max(1,6*h.O.cbrt(o)|0)),c<=0)throw new Error("segments must be > 0.");l||(l=this.color);let d=2*h.O.PI/c,f=Math.cos(d),w=Math.sin(d),x=o,v=0;if(t){this.check(n.Filled,3*c+3),c--;for(let i=0;i<c;i++){this.vertex(e,r,l),this.vertex(e+x,r+v,l);let t=x;x=f*x-w*v,v=w*t+f*v,this.vertex(e+x,r+v,l)}this.vertex(e,r,l),this.vertex(e+x,r+v,l)}else{this.check(n.Line,2*c+2);for(let i=0;i<c;i++){this.vertex(e+x,r+v,l);let t=x;x=f*x-w*v,v=w*t+f*v,this.vertex(e+x,r+v,l)}this.vertex(e+x,r+v,l)}x=o,v=0,this.vertex(e+x,r+v,l)}curve(t,e,r,h,o,l,c,d,f,w){this.check(n.Line,2*f+2),w||(w=this.color);let x=1/f,v=x*x,m=x*x*x,C=3*x,L=3*v,S=6*v,R=6*m,A=t-2*r+o,_=e-2*h+l,T=3*(r-o)-t+c,y=3*(h-l)-e+d,E=t,O=e,P=(r-t)*C+A*L+T*m,M=(h-e)*C+_*L+y*m,k=A*S+T*R,B=_*S+y*R,F=T*R,I=y*R;for(;f-- >0;)this.vertex(E,O,w),E+=P,O+=M,P+=k,M+=B,k+=F,B+=I,this.vertex(E,O,w);this.vertex(E,O,w),this.vertex(c,d,w)}vertex(t,e,r){let n=this.vertexIndex,h=this.mesh.getVertices();h[n++]=t,h[n++]=e,h[n++]=r.r,h[n++]=r.g,h[n++]=r.b,h[n++]=r.a,this.vertexIndex=n}end(){if(!this.isDrawing)throw new Error("ShapeRenderer.begin() has not been called");this.flush();let t=this.context.gl;t.disable(t.BLEND),this.isDrawing=!1}flush(){if(0!=this.vertexIndex){if(!this.shader)throw new Error("No shader set.");this.mesh.setVerticesLength(this.vertexIndex),this.mesh.draw(this.shader,this.shapeType),this.vertexIndex=0}}check(t,e){if(!this.isDrawing)throw new Error("ShapeRenderer.begin() has not been called");if(this.shapeType==t){if(!(this.mesh.maxVertices()-this.mesh.numVertices()<e))return;this.flush()}else this.flush(),this.shapeType=t}dispose(){this.mesh.dispose()}}!function(t){t[t.Point=0]="Point",t[t.Line=1]="Line",t[t.Filled=4]="Filled"}(n||(n={}))},657:function(t,e,r){"use strict";r.d(e,"b",(function(){return C})),r.d(e,"a",(function(){return L}));var n=r(21),h=r(655),o=r(499),l=r(175),c=r(500),d=r(658),f=r(659),w=r(112);const x=[0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0],v=[0,1,2,2,3,0],m=new n.q(1,1,1,1);class C{constructor(canvas,t,e=!0){this.twoColorTint=!1,this.activeRenderer=null,this.canvas=canvas,this.context=t instanceof w.a?t:new w.a(t),this.twoColorTint=e,this.camera=new h.a(canvas.width,canvas.height),this.batcherShader=e?l.a.newTwoColoredTextured(this.context):l.a.newColoredTextured(this.context),this.batcher=new o.a(this.context,e),this.shapesShader=l.a.newColored(this.context),this.shapes=new c.a(this.context),this.skeletonRenderer=new f.a(this.context,e),this.skeletonDebugRenderer=new d.a(this.context)}dispose(){this.batcher.dispose(),this.batcherShader.dispose(),this.shapes.dispose(),this.shapesShader.dispose(),this.skeletonDebugRenderer.dispose()}begin(){this.camera.update(),this.enableRenderer(this.batcher)}drawSkeleton(t,e=!1,r=-1,n=-1,h=null){this.enableRenderer(this.batcher),this.skeletonRenderer.premultipliedAlpha=e,this.skeletonRenderer.draw(this.batcher,t,r,n,h)}drawSkeletonDebug(t,e=!1,r){this.enableRenderer(this.shapes),this.skeletonDebugRenderer.premultipliedAlpha=e,this.skeletonDebugRenderer.draw(this.shapes,t,r)}drawTexture(t,e,r,n,h,o){this.enableRenderer(this.batcher),o||(o=m);var i=0;x[i++]=e,x[i++]=r,x[i++]=o.r,x[i++]=o.g,x[i++]=o.b,x[i++]=o.a,x[i++]=0,x[i++]=1,this.twoColorTint&&(x[i++]=0,x[i++]=0,x[i++]=0,x[i++]=0),x[i++]=e+n,x[i++]=r,x[i++]=o.r,x[i++]=o.g,x[i++]=o.b,x[i++]=o.a,x[i++]=1,x[i++]=1,this.twoColorTint&&(x[i++]=0,x[i++]=0,x[i++]=0,x[i++]=0),x[i++]=e+n,x[i++]=r+h,x[i++]=o.r,x[i++]=o.g,x[i++]=o.b,x[i++]=o.a,x[i++]=1,x[i++]=0,this.twoColorTint&&(x[i++]=0,x[i++]=0,x[i++]=0,x[i++]=0),x[i++]=e,x[i++]=r+h,x[i++]=o.r,x[i++]=o.g,x[i++]=o.b,x[i++]=o.a,x[i++]=0,x[i++]=0,this.twoColorTint&&(x[i++]=0,x[i++]=0,x[i++]=0,x[i]=0),this.batcher.draw(t,x,v)}drawTextureUV(t,e,r,n,h,u,o,l,c,d){this.enableRenderer(this.batcher),d||(d=m);var i=0;x[i++]=e,x[i++]=r,x[i++]=d.r,x[i++]=d.g,x[i++]=d.b,x[i++]=d.a,x[i++]=u,x[i++]=o,this.twoColorTint&&(x[i++]=0,x[i++]=0,x[i++]=0,x[i++]=0),x[i++]=e+n,x[i++]=r,x[i++]=d.r,x[i++]=d.g,x[i++]=d.b,x[i++]=d.a,x[i++]=l,x[i++]=o,this.twoColorTint&&(x[i++]=0,x[i++]=0,x[i++]=0,x[i++]=0),x[i++]=e+n,x[i++]=r+h,x[i++]=d.r,x[i++]=d.g,x[i++]=d.b,x[i++]=d.a,x[i++]=l,x[i++]=c,this.twoColorTint&&(x[i++]=0,x[i++]=0,x[i++]=0,x[i++]=0),x[i++]=e,x[i++]=r+h,x[i++]=d.r,x[i++]=d.g,x[i++]=d.b,x[i++]=d.a,x[i++]=u,x[i++]=c,this.twoColorTint&&(x[i++]=0,x[i++]=0,x[i++]=0,x[i]=0),this.batcher.draw(t,x,v)}drawTextureRotated(t,e,r,h,o,l,c,d,f){this.enableRenderer(this.batcher),f||(f=m);let w=e+l,C=r+c,L=-l,S=-c,R=h-l,A=o-c,_=L,T=S,y=L,E=A,O=R,P=A,M=R,k=S,B=0,F=0,I=0,D=0,V=0,z=0,U=0,N=0;if(0!=d){let t=n.O.cosDeg(d),e=n.O.sinDeg(d);B=t*_-e*T,F=e*_+t*T,U=t*y-e*E,N=e*y+t*E,V=t*O-e*P,z=e*O+t*P,I=V+(B-U),D=z+(F-N)}else B=_,F=T,U=y,N=E,V=O,z=P,I=M,D=k;B+=w,F+=C,I+=w,D+=C,V+=w,z+=C,U+=w,N+=C;var i=0;x[i++]=B,x[i++]=F,x[i++]=f.r,x[i++]=f.g,x[i++]=f.b,x[i++]=f.a,x[i++]=0,x[i++]=1,this.twoColorTint&&(x[i++]=0,x[i++]=0,x[i++]=0,x[i++]=0),x[i++]=I,x[i++]=D,x[i++]=f.r,x[i++]=f.g,x[i++]=f.b,x[i++]=f.a,x[i++]=1,x[i++]=1,this.twoColorTint&&(x[i++]=0,x[i++]=0,x[i++]=0,x[i++]=0),x[i++]=V,x[i++]=z,x[i++]=f.r,x[i++]=f.g,x[i++]=f.b,x[i++]=f.a,x[i++]=1,x[i++]=0,this.twoColorTint&&(x[i++]=0,x[i++]=0,x[i++]=0,x[i++]=0),x[i++]=U,x[i++]=N,x[i++]=f.r,x[i++]=f.g,x[i++]=f.b,x[i++]=f.a,x[i++]=0,x[i++]=0,this.twoColorTint&&(x[i++]=0,x[i++]=0,x[i++]=0,x[i]=0),this.batcher.draw(t,x,v)}drawRegion(t,e,r,n,h,o){this.enableRenderer(this.batcher),o||(o=m);var i=0;x[i++]=e,x[i++]=r,x[i++]=o.r,x[i++]=o.g,x[i++]=o.b,x[i++]=o.a,x[i++]=t.u,x[i++]=t.v2,this.twoColorTint&&(x[i++]=0,x[i++]=0,x[i++]=0,x[i++]=0),x[i++]=e+n,x[i++]=r,x[i++]=o.r,x[i++]=o.g,x[i++]=o.b,x[i++]=o.a,x[i++]=t.u2,x[i++]=t.v2,this.twoColorTint&&(x[i++]=0,x[i++]=0,x[i++]=0,x[i++]=0),x[i++]=e+n,x[i++]=r+h,x[i++]=o.r,x[i++]=o.g,x[i++]=o.b,x[i++]=o.a,x[i++]=t.u2,x[i++]=t.v,this.twoColorTint&&(x[i++]=0,x[i++]=0,x[i++]=0,x[i++]=0),x[i++]=e,x[i++]=r+h,x[i++]=o.r,x[i++]=o.g,x[i++]=o.b,x[i++]=o.a,x[i++]=t.u,x[i++]=t.v,this.twoColorTint&&(x[i++]=0,x[i++]=0,x[i++]=0,x[i]=0),this.batcher.draw(t.page.texture,x,v)}line(t,e,r,n,h,o){this.enableRenderer(this.shapes),this.shapes.line(t,e,r,n,h)}triangle(t,e,r,n,h,o,l,c,d,f){this.enableRenderer(this.shapes),this.shapes.triangle(t,e,r,n,h,o,l,c,d,f)}quad(t,e,r,n,h,o,l,c,d,f,w,x,v){this.enableRenderer(this.shapes),this.shapes.quad(t,e,r,n,h,o,l,c,d,f,w,x,v)}rect(t,e,r,n,h,o){this.enableRenderer(this.shapes),this.shapes.rect(t,e,r,n,h,o)}rectLine(t,e,r,n,h,o,l){this.enableRenderer(this.shapes),this.shapes.rectLine(t,e,r,n,h,o,l)}polygon(t,e,r,n){this.enableRenderer(this.shapes),this.shapes.polygon(t,e,r,n)}circle(t,e,r,n,h,o=0){this.enableRenderer(this.shapes),this.shapes.circle(t,e,r,n,h,o)}curve(t,e,r,n,h,o,l,c,d,f){this.enableRenderer(this.shapes),this.shapes.curve(t,e,r,n,h,o,l,c,d,f)}end(){this.activeRenderer===this.batcher?this.batcher.end():this.activeRenderer===this.shapes&&this.shapes.end(),this.activeRenderer=null}resize(t){let canvas=this.canvas;var e=window.devicePixelRatio||1,r=Math.round(canvas.clientWidth*e),n=Math.round(canvas.clientHeight*e);if(canvas.width==r&&canvas.height==n||(canvas.width=r,canvas.height=n),this.context.gl.viewport(0,0,canvas.width,canvas.height),t===L.Expand)this.camera.setViewport(r,n);else if(t===L.Fit){let t=canvas.width,e=canvas.height,r=this.camera.viewportWidth,n=this.camera.viewportHeight,h=n/r<e/t?r/t:n/e;this.camera.setViewport(t*h,e*h)}this.camera.update()}enableRenderer(t){this.activeRenderer!==t&&(this.end(),t instanceof o.a?(this.batcherShader.bind(),this.batcherShader.setUniform4x4f(l.a.MVP_MATRIX,this.camera.projectionView.values),this.batcherShader.setUniformi("u_texture",0),this.batcher.begin(this.batcherShader),this.activeRenderer=this.batcher):t instanceof c.a?(this.shapesShader.bind(),this.shapesShader.setUniform4x4f(l.a.MVP_MATRIX,this.camera.projectionView.values),this.shapes.begin(this.shapesShader),this.activeRenderer=this.shapes):this.activeRenderer=this.skeletonDebugRenderer)}}var L;!function(t){t[t.Stretch=0]="Stretch",t[t.Expand=1]="Expand",t[t.Fit=2]="Fit"}(L||(L={}))},658:function(t,e,r){"use strict";r.d(e,"a",(function(){return o}));var n=r(21),h=r(112);class o{constructor(t){this.boneLineColor=new n.q(1,0,0,1),this.boneOriginColor=new n.q(0,1,0,1),this.attachmentLineColor=new n.q(0,0,1,.5),this.triangleLineColor=new n.q(1,.64,0,.5),this.pathColor=(new n.q).setFromString("FF7F00"),this.clipColor=new n.q(.8,0,0,2),this.aabbColor=new n.q(0,1,0,.5),this.drawBones=!0,this.drawRegionAttachments=!0,this.drawBoundingBoxes=!0,this.drawMeshHull=!0,this.drawMeshTriangles=!0,this.drawPaths=!0,this.drawSkeletonXY=!1,this.drawClipping=!0,this.premultipliedAlpha=!1,this.scale=1,this.boneWidth=2,this.bounds=new n.vb,this.temp=new Array,this.vertices=n.Xb.newFloatArray(2048),this.context=t instanceof h.a?t:new h.a(t)}draw(t,e,r){let h=e.x,l=e.y,c=this.context.gl,d=this.premultipliedAlpha?c.ONE:c.SRC_ALPHA;t.setBlendMode(d,c.ONE,c.ONE_MINUS_SRC_ALPHA);let f=e.bones;if(this.drawBones){t.setColor(this.boneLineColor);for(let i=0,e=f.length;i<e;i++){let e=f[i];if(r&&r.indexOf(e.data.name)>-1)continue;if(!e.parent)continue;let n=e.data.length*e.a+e.worldX,h=e.data.length*e.c+e.worldY;t.rectLine(!0,e.worldX,e.worldY,n,h,this.boneWidth*this.scale)}this.drawSkeletonXY&&t.x(h,l,4*this.scale)}if(this.drawRegionAttachments){t.setColor(this.attachmentLineColor);let r=e.slots;for(let i=0,e=r.length;i<e;i++){let slot=r[i],e=slot.getAttachment();if(e instanceof n.hb){let r=e,n=this.vertices;r.computeWorldVertices(slot,n,0,2),t.line(n[0],n[1],n[2],n[3]),t.line(n[2],n[3],n[4],n[5]),t.line(n[4],n[5],n[6],n[7]),t.line(n[6],n[7],n[0],n[1])}}}if(this.drawMeshHull||this.drawMeshTriangles){let r=e.slots;for(let i=0,e=r.length;i<e;i++){let slot=r[i];if(!slot.bone.active)continue;let e=slot.getAttachment();if(!(e instanceof n.P))continue;let h=e,o=this.vertices;h.computeWorldVertices(slot,0,h.worldVerticesLength,o,0,2);let l=h.triangles,c=h.hullLength;if(this.drawMeshTriangles){t.setColor(this.triangleLineColor);for(let e=0,r=l.length;e<r;e+=3){let r=2*l[e],n=2*l[e+1],h=2*l[e+2];t.triangle(!1,o[r],o[r+1],o[n],o[n+1],o[h],o[h+1])}}if(this.drawMeshHull&&c>0){t.setColor(this.attachmentLineColor),c=2*(c>>1);let e=o[c-2],r=o[c-1];for(let n=0,h=c;n<h;n+=2){let h=o[n],l=o[n+1];t.line(h,l,e,r),e=h,r=l}}}}if(this.drawBoundingBoxes){let r=this.bounds;r.update(e,!0),t.setColor(this.aabbColor),t.rect(!1,r.minX,r.minY,r.getWidth(),r.getHeight());let n=r.polygons,h=r.boundingBoxes;for(let i=0,e=n.length;i<e;i++){let polygon=n[i];t.setColor(h[i].color),t.polygon(polygon,0,polygon.length)}}if(this.drawPaths){let r=e.slots;for(let i=0,e=r.length;i<e;i++){let slot=r[i];if(!slot.bone.active)continue;let e=slot.getAttachment();if(!(e instanceof n.S))continue;let path=e,h=path.worldVerticesLength,l=this.temp=n.Xb.setArraySize(this.temp,h,0);path.computeWorldVertices(slot,0,h,l,0,2);let c=this.pathColor,d=l[2],f=l[3],w=0,x=0;if(path.closed){t.setColor(c);let e=l[0],r=l[1],n=l[h-2],v=l[h-1];w=l[h-4],x=l[h-3],t.curve(d,f,e,r,n,v,w,x,32),t.setColor(o.LIGHT_GRAY),t.line(d,f,e,r),t.line(w,x,n,v)}h-=4;for(let e=4;e<h;e+=6){let r=l[e],n=l[e+1],h=l[e+2],v=l[e+3];w=l[e+4],x=l[e+5],t.setColor(c),t.curve(d,f,r,n,h,v,w,x,32),t.setColor(o.LIGHT_GRAY),t.line(d,f,r,n),t.line(w,x,h,v),d=w,f=x}}}if(this.drawBones){t.setColor(this.boneOriginColor);for(let i=0,e=f.length;i<e;i++){let e=f[i];r&&r.indexOf(e.data.name)>-1||t.circle(!0,e.worldX,e.worldY,3*this.scale,this.boneOriginColor,8)}}if(this.drawClipping){let r=e.slots;t.setColor(this.clipColor);for(let i=0,e=r.length;i<e;i++){let slot=r[i];if(!slot.bone.active)continue;let e=slot.getAttachment();if(!(e instanceof n.p))continue;let h=e,o=h.worldVerticesLength,l=this.temp=n.Xb.setArraySize(this.temp,o,0);h.computeWorldVertices(slot,0,o,l,0,2);for(let i=0,e=l.length;i<e;i+=2){let e=l[i],r=l[i+1],n=l[(i+2)%l.length],h=l[(i+3)%l.length];t.line(e,r,n,h)}}}}dispose(){}}o.LIGHT_GRAY=new n.q(192/255,192/255,192/255,1),o.GREEN=new n.q(0,1,0,1)},659:function(t,e,r){"use strict";r.d(e,"a",(function(){return l}));var n=r(21),h=r(112);class o{constructor(t,e,r){this.vertices=t,this.numVertices=e,this.numFloats=r}}class l{constructor(t,e=!0){this.premultipliedAlpha=!1,this.tempColor=new n.q,this.tempColor2=new n.q,this.vertexSize=8,this.twoColorTint=!1,this.renderable=new o([],0,0),this.clipper=new n.wb,this.temp=new n.Yb,this.temp2=new n.Yb,this.temp3=new n.q,this.temp4=new n.q,this.twoColorTint=e,e&&(this.vertexSize+=4),this.vertices=n.Xb.newFloatArray(1024*this.vertexSize)}draw(t,e,r=-1,o=-1,c=null){let d,f,w,x=this.clipper,v=this.premultipliedAlpha,m=this.twoColorTint,C=null,L=(this.temp,this.temp2,this.temp3,this.temp4,this.renderable),S=e.drawOrder,R=e.color,A=m?12:8,_=!1;-1==r&&(_=!0);for(let i=0,e=S.length;i<e;i++){let e=x.isClipping()?2:A,slot=S[i];if(!slot.bone.active){x.clipEndWithSlot(slot);continue}if(r>=0&&r==slot.data.index&&(_=!0),!_){x.clipEndWithSlot(slot);continue}o>=0&&o==slot.data.index&&(_=!1);let T,y=slot.getAttachment();if(y instanceof n.hb){let t=y;L.vertices=this.vertices,L.numVertices=4,L.numFloats=e<<2,t.computeWorldVertices(slot,L.vertices,0,e),f=l.QUAD_TRIANGLES,d=t.uvs,T=t.region.texture,w=t.color}else{if(!(y instanceof n.P)){if(y instanceof n.p){let t=y;x.clipStart(slot,t);continue}x.clipEndWithSlot(slot);continue}{let t=y;L.vertices=this.vertices,L.numVertices=t.worldVerticesLength>>1,L.numFloats=L.numVertices*e,L.numFloats>L.vertices.length&&(L.vertices=this.vertices=n.Xb.newFloatArray(L.numFloats)),t.computeWorldVertices(slot,0,t.worldVerticesLength,L.vertices,0,e),f=t.triangles,T=t.region.texture,d=t.uvs,w=t.color}}if(T){let e=slot.color,r=this.tempColor;r.r=R.r*e.r*w.r,r.g=R.g*e.g*w.g,r.b=R.b*e.b*w.b,r.a=R.a*e.a*w.a,v&&(r.r*=r.a,r.g*=r.a,r.b*=r.a);let n=this.tempColor2;slot.darkColor?(v?(n.r=slot.darkColor.r*r.a,n.g=slot.darkColor.g*r.a,n.b=slot.darkColor.b*r.a):n.setFromColor(slot.darkColor),n.a=v?1:0):n.set(0,0,0,1);let o=slot.data.blendMode;if(o!=C&&(C=o,t.setBlendMode(h.b.getSourceColorGLBlendMode(C,v),h.b.getSourceAlphaGLBlendMode(C),h.b.getDestGLBlendMode(C))),x.isClipping()){x.clipTriangles(L.vertices,L.numFloats,f,f.length,d,r,n,m);let e=new Float32Array(x.clippedVertices),h=x.clippedTriangles;c&&c(e,e.length,A),t.draw(T,e,h)}else{let e=L.vertices;if(m)for(let t=2,u=0,h=L.numFloats;t<h;t+=A,u+=2)e[t]=r.r,e[t+1]=r.g,e[t+2]=r.b,e[t+3]=r.a,e[t+4]=d[u],e[t+5]=d[u+1],e[t+6]=n.r,e[t+7]=n.g,e[t+8]=n.b,e[t+9]=n.a;else for(let t=2,u=0,n=L.numFloats;t<n;t+=A,u+=2)e[t]=r.r,e[t+1]=r.g,e[t+2]=r.b,e[t+3]=r.a,e[t+4]=d[u],e[t+5]=d[u+1];let view=L.vertices.subarray(0,L.numFloats);c&&c(L.vertices,L.numFloats,A),t.draw(T,view,f)}}x.clipEndWithSlot(slot)}x.clipEnd()}}l.QUAD_TRIANGLES=[0,1,2,2,3,0]}}]);