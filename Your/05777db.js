(window.webpackJsonp=window.webpackJsonp||[]).push([[1107],{2247:function(t,e,o){"use strict";t.exports=function(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),o=0;o<e.length;o++)e[o]=255;for(var i=0;i<t.length;i++){var n=t.charAt(i),r=n.charCodeAt(0);if(255!==e[r])throw new TypeError(n+" is ambiguous");e[r]=i}var c=t.length,d=t.charAt(0),h=Math.log(c)/Math.log(256),l=Math.log(256)/Math.log(c);function v(source){if("string"!=typeof source)throw new TypeError("Expected String");if(0===source.length)return new Uint8Array;for(var t=0,o=0,n=0;source[t]===d;)o++,t++;for(var r=(source.length-t)*h+1>>>0,l=new Uint8Array(r);source[t];){var v=e[source.charCodeAt(t)];if(255===v)return;for(var i=0,f=r-1;(0!==v||i<n)&&-1!==f;f--,i++)v+=c*l[f]>>>0,l[f]=v%256>>>0,v=v/256>>>0;if(0!==v)throw new Error("Non-zero carry");n=i,t++}for(var y=r-n;y!==r&&0===l[y];)y++;for(var I=new Uint8Array(o+(r-y)),A=o;y!==r;)I[A++]=l[y++];return I}return{encode:function(source){if(source instanceof Uint8Array||(ArrayBuffer.isView(source)?source=new Uint8Array(source.buffer,source.byteOffset,source.byteLength):Array.isArray(source)&&(source=Uint8Array.from(source))),!(source instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===source.length)return"";for(var e=0,o=0,n=0,r=source.length;n!==r&&0===source[n];)n++,e++;for(var h=(r-n)*l+1>>>0,v=new Uint8Array(h);n!==r;){for(var f=source[n],i=0,y=h-1;(0!==f||i<o)&&-1!==y;y--,i++)f+=256*v[y]>>>0,v[y]=f%c>>>0,f=f/c>>>0;if(0!==f)throw new Error("Non-zero carry");o=i,n++}for(var I=h-o;I!==h&&0===v[I];)I++;for(var A=d.repeat(e);I<h;++I)A+=t.charAt(v[I]);return A},decodeUnsafe:v,decode:function(t){var e=v(t);if(e)return e;throw new Error("Non-base"+c+" character")}}}},286:function(t,e,o){"use strict";o.d(e,"a",(function(){return h}));var n=Object.prototype,r=n.toString,c=n.hasOwnProperty,d=new Map;function h(a,b){try{return l(a,b)}finally{d.clear()}}function l(a,b){if(a===b)return!0;var t=r.call(a);if(t!==r.call(b))return!1;switch(t){case"[object Array]":if(a.length!==b.length)return!1;case"[object Object]":if(v(a,b))return!0;var e=Object.keys(a),o=Object.keys(b),n=e.length;if(n!==o.length)return!1;for(var d=0;d<n;++d)if(!c.call(b,e[d]))return!1;for(d=0;d<n;++d){var h=e[d];if(!l(a[h],b[h]))return!1}return!0;case"[object Error]":return a.name===b.name&&a.message===b.message;case"[object Number]":if(a!=a)return b!=b;case"[object Boolean]":case"[object Date]":return+a==+b;case"[object RegExp]":case"[object String]":return a==""+b;case"[object Map]":case"[object Set]":if(a.size!==b.size)return!1;if(v(a,b))return!0;for(var f=a.entries(),y="[object Map]"===t;;){var I=f.next();if(I.done)break;var A=I.value,m=A[0],w=A[1];if(!b.has(m))return!1;if(y&&!l(w,b.get(m)))return!1}return!0}return!1}function v(a,b){var t=d.get(a);if(t){if(t.has(b))return!0}else d.set(a,t=new Set);return t.add(b),!1}},694:function(t,e,o){"use strict";o.d(e,"a",(function(){return M})),o.d(e,"b",(function(){return D})),o.d(e,"c",(function(){return x}));var n=o(78),r=o.n(n),c=o(252),d=o(881),h=o.n(d),l=o(164),v=o.n(l),f=o(1321);const y="(([^:?#]+):)?(([^?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))",I="\\nURI: (?<uri>".concat(y,"?)"),A="([0-9]+)-(0[1-9]|1[012])-(0[1-9]|[12][0-9]|3[01])[Tt]([01][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9]|60)(.[0-9]+)?(([Zz])|([+|-]([01][0-9]|2[0-3]):[0-5][0-9]))",m="\\nIssued At: (?<issuedAt>".concat(A,")"),w="(\\nExpiration Time: (?<expirationTime>".concat(A,"))?"),E="(\\nNot Before: (?<notBefore>".concat(A,"))?"),S="(\\nResources:(?<resources>(\\n- ".concat(y,"?)+))?"),N="^".concat("(?<domain>([^?#]*)) wants you to sign in with your Solana account:").concat("\\n(?<address>[a-zA-Z0-9]{32,44})\\n\\n").concat("((?<statement>[^\\n]+)\\n)?").concat(I).concat("\\nVersion: (?<version>1)").concat("\\nChain ID: (?<chainId>[0-9]+)").concat("\\nNonce: (?<nonce>[a-zA-Z0-9]{8,})").concat(m).concat(w).concat(E).concat("(\\nRequest ID: (?<requestId>[-._~!$&'()*+,;=:@%a-zA-Z0-9]*))?").concat(S,"$");class T{constructor(t){var e,o,n,c,d,h,l,v,f,y,I,A,m;r()(this,"domain",void 0),r()(this,"address",void 0),r()(this,"statement",void 0),r()(this,"uri",void 0),r()(this,"version",void 0),r()(this,"chainId",void 0),r()(this,"nonce",void 0),r()(this,"issuedAt",void 0),r()(this,"expirationTime",void 0),r()(this,"notBefore",void 0),r()(this,"requestId",void 0),r()(this,"resources",void 0),r()(this,"match",void 0);const w=new RegExp(N,"g").exec(t);if(!w)throw new Error("Message did not match the regular expression.");this.match=w,this.domain=null==w||null===(e=w.groups)||void 0===e?void 0:e.domain,this.address=null==w||null===(o=w.groups)||void 0===o?void 0:o.address,this.statement=null==w||null===(n=w.groups)||void 0===n?void 0:n.statement,this.uri=null==w||null===(c=w.groups)||void 0===c?void 0:c.uri,this.version=null==w||null===(d=w.groups)||void 0===d?void 0:d.version,this.nonce=null==w||null===(h=w.groups)||void 0===h?void 0:h.nonce,this.chainId=parseInt(null==w||null===(l=w.groups)||void 0===l?void 0:l.chainId),this.issuedAt=null==w||null===(v=w.groups)||void 0===v?void 0:v.issuedAt,this.expirationTime=null==w||null===(f=w.groups)||void 0===f?void 0:f.expirationTime,this.notBefore=null==w||null===(y=w.groups)||void 0===y?void 0:y.notBefore,this.requestId=null==w||null===(I=w.groups)||void 0===I?void 0:I.requestId,this.resources=null==w||null===(A=w.groups)||void 0===A||null===(m=A.resources)||void 0===m?void 0:m.split("\n- ").slice(1)}}class M{constructor(){r()(this,"t",void 0)}}class D{constructor(){r()(this,"domain",void 0),r()(this,"address",void 0),r()(this,"statement",void 0),r()(this,"uri",void 0),r()(this,"version",void 0),r()(this,"chainId",void 0),r()(this,"nonce",void 0),r()(this,"issuedAt",void 0),r()(this,"expirationTime",void 0),r()(this,"notBefore",void 0),r()(this,"requestId",void 0),r()(this,"resources",void 0)}}var O;!function(t){t.EXPIRED_MESSAGE="Expired message.",t.INVALID_DOMAIN="Invalid domain.",t.DOMAIN_MISMATCH="Domain do not match provided domain for verification.",t.NONCE_MISMATCH="Nonce do not match provided nonce for verification.",t.INVALID_ADDRESS="Invalid address.",t.INVALID_URI="URI does not conform to RFC 3986.",t.INVALID_NONCE="Nonce size smaller then 8 characters or is not alphanumeric.",t.NOT_YET_VALID_MESSAGE="Message is not valid yet.",t.INVALID_SIGNATURE="Signature do not match address of the message.",t.INVALID_TIME_FORMAT="Invalid time format.",t.INVALID_MESSAGE_VERSION="Invalid message version.",t.UNABLE_TO_PARSE="Unable to parse the message.",t.MALFORMED_SESSION="Malformed Session"}(O||(O={}));class _ extends Error{constructor(t,e,o){super(t),r()(this,"type",void 0),r()(this,"expected",void 0),r()(this,"received",void 0),this.type=t,this.expected=e,this.received=o}}class x{constructor(param){if(r()(this,"header",void 0),r()(this,"payload",void 0),r()(this,"signature",void 0),"string"==typeof param){const t=new T(param);this.payload={domain:t.domain,address:t.address,statement:t.statement,uri:t.uri,version:t.version,nonce:t.nonce,issuedAt:t.issuedAt,expirationTime:t.expirationTime,notBefore:t.notBefore,requestId:t.requestId,chainId:t.chainId,resources:t.resources}}else Object.assign(this,param),"string"==typeof this.payload.chainId&&(this.payload.chainId=parseInt(this.payload.chainId)),this.payload.nonce||(this.payload.nonce=Object(c.randomStringForEntropy)(96))}toMessage(){this.validate();const header="".concat(this.payload.domain," wants you to sign in with your Solana account:"),t="URI: ".concat(this.payload.uri);let e=[header,this.payload.address].join("\n");const o=[t,"Version: ".concat(this.payload.version),"Chain ID: ".concat(this.payload.chainId)||!1,"Nonce: ".concat(this.payload.nonce)];if(this.payload.issuedAt&&Date.parse(this.payload.issuedAt),this.payload.issuedAt=this.payload.issuedAt?this.payload.issuedAt:(new Date).toISOString(),o.push("Issued At: ".concat(this.payload.issuedAt)),this.payload.expirationTime){const t="Expiration Time: ".concat(this.payload.expirationTime);o.push(t)}this.payload.notBefore&&o.push("Not Before: ".concat(this.payload.notBefore)),this.payload.requestId&&o.push("Request ID: ".concat(this.payload.requestId)),this.payload.resources&&o.push(["Resources:",...this.payload.resources.map((t=>"- ".concat(t)))].join("\n"));const n=o.join("\n");return e=[e,this.payload.statement].join("\n\n"),this.payload.statement&&(e+="\n"),[e,n].join("\n")}prepareMessage(){let t;return this.payload.version,t=this.toMessage(),t}validate(){if(0===this.payload.domain.length||!/[^#?]*/.test(this.payload.domain))throw new _(O.INVALID_DOMAIN,"".concat(this.payload.domain," to be a valid domain."));if(!f.isUri(this.payload.uri))throw new _(O.INVALID_URI,"".concat(this.payload.uri," to be a valid uri."));if("1"!==this.payload.version)throw new _(O.INVALID_MESSAGE_VERSION,"1",this.payload.version);const t=this.payload.nonce.match(/[a-zA-Z0-9]{8,}/);if(!t||this.payload.nonce.length<8||t[0]!==this.payload.nonce)throw new _(O.INVALID_NONCE,"Length > 8 (".concat(t.length,"). Alphanumeric."),this.payload.nonce);const e=/([0-9]+)-(0[1-9]|1[012])-(0[1-9]|[12][0-9]|3[01])[Tt]([01][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9]|60)(\.[0-9]+)?(([Zz])|([+|-]([01][0-9]|2[0-3]):[0-5][0-9]))/;if(this.payload.issuedAt&&!e.test(this.payload.issuedAt))throw new Error(O.INVALID_TIME_FORMAT);if(this.payload.expirationTime&&!e.test(this.payload.expirationTime))throw new Error(O.INVALID_TIME_FORMAT);if(this.payload.notBefore&&!e.test(this.payload.notBefore))throw new Error(O.INVALID_TIME_FORMAT)}async verify(t){return new Promise((e=>{const{payload:o,signature:n}=t;o.domain&&o.domain!==this.payload.domain&&e({success:!1,data:this,error:new _(O.DOMAIN_MISMATCH,o.domain,this.payload.domain)}),o.nonce&&o.nonce!==this.payload.nonce&&e({success:!1,data:this,error:new _(O.NONCE_MISMATCH,o.nonce,this.payload.nonce)});const r=new Date;if(this.payload.expirationTime){const t=new Date(this.payload.expirationTime);r.getTime()>=t.getTime()&&e({success:!1,data:this,error:new _(O.EXPIRED_MESSAGE,"".concat(r.toISOString()," < ").concat(t.toISOString()),"".concat(r.toISOString()," >= ").concat(t.toISOString()))})}if(this.payload.notBefore){const t=new Date(this.payload.notBefore);r.getTime()<t.getTime()&&e({success:!1,data:this,error:new _(O.EXPIRED_MESSAGE,"".concat(r.toISOString()," >= ").concat(t.toISOString()),"".concat(r.toISOString()," < ").concat(t.toISOString()))})}const c=this.prepareMessage(),d=(new TextEncoder).encode(c);v.a.sign.detached.verify(d,h.a.decode(n.s),h.a.decode(o.address))||e({success:!1,data:this,error:new _(O.INVALID_SIGNATURE,"Signature verfication failed")}),e({success:!0,data:this})}))}}},881:function(t,e,o){const n=o(2247);t.exports=n("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")}}]);