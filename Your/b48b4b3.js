(window.webpackJsonp=window.webpackJsonp||[]).push([[1150],{651:function(t,e,r){"use strict";r.d(e,"a",(function(){return l}));var o=r(279),n=r(90),h=r(7);class l{constructor(data,t){if(this.position=0,this.spacing=0,this.mixRotate=0,this.mixX=0,this.mixY=0,this.spaces=new Array,this.positions=new Array,this.world=new Array,this.curves=new Array,this.lengths=new Array,this.segments=new Array,this.active=!1,!data)throw new Error("data cannot be null.");if(!t)throw new Error("skeleton cannot be null.");this.data=data,this.bones=new Array;for(let i=0,e=data.bones.length;i<e;i++){let e=t.findBone(data.bones[i].name);if(!e)throw new Error(`Couldn't find bone ${data.bones[i].name}.`);this.bones.push(e)}let e=t.findSlot(data.target.name);if(!e)throw new Error(`Couldn't find target bone ${data.target.name}`);this.target=e,this.position=data.position,this.spacing=data.spacing,this.mixRotate=data.mixRotate,this.mixX=data.mixX,this.mixY=data.mixY}isActive(){return this.active}update(){let t=this.target.getAttachment();if(!(t instanceof o.a))return;let e=this.mixRotate,r=this.mixX,d=this.mixY;if(0==e&&0==r&&0==d)return;let data=this.data,c=data.rotateMode==n.c.Tangent,f=data.rotateMode==n.c.ChainScale,M=this.bones,w=M.length,m=c?w:w+1,P=h.k.setArraySize(this.spaces,m),A=f?this.lengths=h.k.setArraySize(this.lengths,w):[],x=this.spacing;switch(data.spacingMode){case n.d.Percent:if(f)for(let i=0,t=m-1;i<t;i++){let t=M[i],e=t.data.length;if(e<l.epsilon)A[i]=0;else{let r=e*t.a,o=e*t.c;A[i]=Math.sqrt(r*r+o*o)}}h.k.arrayFill(P,1,m,x);break;case n.d.Proportional:let t=0;for(let i=0,e=m-1;i<e;){let e=M[i],r=e.data.length;if(r<l.epsilon)f&&(A[i]=0),P[++i]=x;else{let o=r*e.a,n=r*e.c,h=Math.sqrt(o*o+n*n);f&&(A[i]=h),P[++i]=h,t+=h}}if(t>0){t=m/t*x;for(let i=1;i<m;i++)P[i]*=t}break;default:let e=data.spacingMode==n.d.Length;for(let i=0,t=m-1;i<t;){let t=M[i],r=t.data.length;if(r<l.epsilon)f&&(A[i]=0),P[++i]=x;else{let o=r*t.a,n=r*t.c,h=Math.sqrt(o*o+n*n);f&&(A[i]=h),P[++i]=(e?r+x:x)*h/r}}}let k=this.computeWorldPositions(t,m,c),y=k[0],E=k[1],R=data.offsetRotation,F=!1;if(0==R)F=data.rotateMode==n.c.Chain;else{F=!1;let p=this.target.bone;R*=p.a*p.d-p.b*p.c>0?h.e.degRad:-h.e.degRad}for(let i=0,p=3;i<w;i++,p+=3){let t=M[i];t.worldX+=(y-t.worldX)*r,t.worldY+=(E-t.worldY)*d;let o=k[p],n=k[p+1],l=o-y,w=n-E;if(f){let r=A[i];if(0!=r){let s=(Math.sqrt(l*l+w*w)/r-1)*e+1;t.a*=s,t.c*=s}}if(y=o,E=n,e>0){let a=t.a,b=t.b,r=t.c,o=t.d,n=0,d=0,f=0;if(n=c?k[p-1]:0==P[i+1]?k[p+2]:Math.atan2(w,l),n-=Math.atan2(r,a),F){d=Math.cos(n),f=Math.sin(n);let o=t.data.length;y+=(o*(d*a-f*r)-l)*e,E+=(o*(f*a+d*r)-w)*e}else n+=R;n>h.e.PI?n-=h.e.PI2:n<-h.e.PI&&(n+=h.e.PI2),n*=e,d=Math.cos(n),f=Math.sin(n),t.a=d*a-f*r,t.b=d*b-f*o,t.c=f*a+d*r,t.d=f*b+d*o}t.updateAppliedTransform()}}computeWorldPositions(path,t,e){let r=this.target,o=this.position,d=this.spaces,c=h.k.setArraySize(this.positions,3*t+2),f=this.world,M=path.closed,w=path.worldVerticesLength,m=w/6,P=l.NONE;if(!path.constantSpeed){let A=path.lengths;m-=M?1:2;let x,k=A[m];switch(this.data.positionMode==n.b.Percent&&(o*=k),this.data.spacingMode){case n.d.Percent:x=k;break;case n.d.Proportional:x=k/t;break;default:x=1}f=h.k.setArraySize(this.world,8);for(let i=0,n=0,h=0;i<t;i++,n+=3){let t=d[i]*x;o+=t;let p=o;if(M)p%=k,p<0&&(p+=k),h=0;else{if(p<0){P!=l.BEFORE&&(P=l.BEFORE,path.computeWorldVertices(r,2,4,f,0,2)),this.addBeforePosition(p,f,0,c,n);continue}if(p>k){P!=l.AFTER&&(P=l.AFTER,path.computeWorldVertices(r,w-6,4,f,0,2)),this.addAfterPosition(p-k,f,0,c,n);continue}}for(;;h++){let t=A[h];if(!(p>t)){if(0==h)p/=t;else{let e=A[h-1];p=(p-e)/(t-e)}break}}h!=P&&(P=h,M&&h==m?(path.computeWorldVertices(r,w-4,4,f,0,2),path.computeWorldVertices(r,0,4,f,4,2)):path.computeWorldVertices(r,6*h+2,8,f,0,2)),this.addCurvePosition(p,f[0],f[1],f[2],f[3],f[4],f[5],f[6],f[7],c,n,e||i>0&&0==t)}return c}M?(w+=2,f=h.k.setArraySize(this.world,w),path.computeWorldVertices(r,2,w-4,f,0,2),path.computeWorldVertices(r,0,2,f,w-4,2),f[w-2]=f[0],f[w-1]=f[1]):(m--,w-=4,f=h.k.setArraySize(this.world,w),path.computeWorldVertices(r,2,w,f,0,2));let A,x=h.k.setArraySize(this.curves,m),k=0,y=f[0],E=f[1],R=0,F=0,S=0,C=0,v=0,W=0,V=0,z=0,B=0,T=0,X=0,Y=0,N=0,O=0;for(let i=0,t=2;i<m;i++,t+=6)R=f[t],F=f[t+1],S=f[t+2],C=f[t+3],v=f[t+4],W=f[t+5],V=.1875*(y-2*R+S),z=.1875*(E-2*F+C),B=.09375*(3*(R-S)-y+v),T=.09375*(3*(F-C)-E+W),X=2*V+B,Y=2*z+T,N=.75*(R-y)+V+.16666667*B,O=.75*(F-E)+z+.16666667*T,k+=Math.sqrt(N*N+O*O),N+=X,O+=Y,X+=B,Y+=T,k+=Math.sqrt(N*N+O*O),N+=X,O+=Y,k+=Math.sqrt(N*N+O*O),N+=X+B,O+=Y+T,k+=Math.sqrt(N*N+O*O),x[i]=k,y=v,E=W;switch(this.data.positionMode==n.b.Percent&&(o*=k),this.data.spacingMode){case n.d.Percent:A=k;break;case n.d.Proportional:A=k/t;break;default:A=1}let I=this.segments,L=0;for(let i=0,r=0,n=0,h=0;i<t;i++,r+=3){let t=d[i]*A;o+=t;let p=o;if(M)p%=k,p<0&&(p+=k),n=0;else{if(p<0){this.addBeforePosition(p,f,0,c,r);continue}if(p>k){this.addAfterPosition(p-k,f,w-4,c,r);continue}}for(;;n++){let t=x[n];if(!(p>t)){if(0==n)p/=t;else{let e=x[n-1];p=(p-e)/(t-e)}break}}if(n!=P){P=n;let t=6*n;for(y=f[t],E=f[t+1],R=f[t+2],F=f[t+3],S=f[t+4],C=f[t+5],v=f[t+6],W=f[t+7],V=.03*(y-2*R+S),z=.03*(E-2*F+C),B=.006*(3*(R-S)-y+v),T=.006*(3*(F-C)-E+W),X=2*V+B,Y=2*z+T,N=.3*(R-y)+V+.16666667*B,O=.3*(F-E)+z+.16666667*T,L=Math.sqrt(N*N+O*O),I[0]=L,t=1;t<8;t++)N+=X,O+=Y,X+=B,Y+=T,L+=Math.sqrt(N*N+O*O),I[t]=L;N+=X,O+=Y,L+=Math.sqrt(N*N+O*O),I[8]=L,N+=X+B,O+=Y+T,L+=Math.sqrt(N*N+O*O),I[9]=L,h=0}for(p*=L;;h++){let t=I[h];if(!(p>t)){if(0==h)p/=t;else{let e=I[h-1];p=h+(p-e)/(t-e)}break}}this.addCurvePosition(.1*p,y,E,R,F,S,C,v,W,c,r,e||i>0&&0==t)}return c}addBeforePosition(p,t,i,e,r){let o=t[i],n=t[i+1],h=t[i+2]-o,l=t[i+3]-n,d=Math.atan2(l,h);e[r]=o+p*Math.cos(d),e[r+1]=n+p*Math.sin(d),e[r+2]=d}addAfterPosition(p,t,i,e,r){let o=t[i+2],n=t[i+3],h=o-t[i],l=n-t[i+1],d=Math.atan2(l,h);e[r]=o+p*Math.cos(d),e[r+1]=n+p*Math.sin(d),e[r+2]=d}addCurvePosition(p,t,e,r,o,n,h,l,d,c,f,M){if(0==p||isNaN(p))return c[f]=t,c[f+1]=e,void(c[f+2]=Math.atan2(o-e,r-t));let w=p*p,m=w*p,u=1-p,P=u*u,A=P*u,x=u*p,k=3*x,y=u*k,E=k*p,R=t*A+r*y+n*E+l*m,F=e*A+o*y+h*E+d*m;c[f]=R,c[f+1]=F,M&&(c[f+2]=p<.001?Math.atan2(o-e,r-t):Math.atan2(F-(e*P+o*x*2+h*w),R-(t*P+r*x*2+n*w)))}}l.NONE=-1,l.BEFORE=-2,l.AFTER=-3,l.epsilon=1e-5},90:function(t,e,r){"use strict";r.d(e,"a",(function(){return d})),r.d(e,"b",(function(){return o})),r.d(e,"d",(function(){return n})),r.d(e,"c",(function(){return h}));var o,n,h,l=r(309);class d extends l.a{set target(t){this._target=t}get target(){if(this._target)return this._target;throw new Error("SlotData not set.")}constructor(t){super(t,0,!1),this.bones=new Array,this._target=null,this.positionMode=o.Fixed,this.spacingMode=n.Fixed,this.rotateMode=h.Chain,this.offsetRotation=0,this.position=0,this.spacing=0,this.mixRotate=0,this.mixX=0,this.mixY=0}}!function(t){t[t.Fixed=0]="Fixed",t[t.Percent=1]="Percent"}(o||(o={})),function(t){t[t.Length=0]="Length",t[t.Fixed=1]="Fixed",t[t.Percent=2]="Percent",t[t.Proportional=3]="Proportional"}(n||(n={})),function(t){t[t.Tangent=0]="Tangent",t[t.Chain=1]="Chain",t[t.ChainScale=2]="ChainScale"}(h||(h={}))}}]);