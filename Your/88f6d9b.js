(window.webpackJsonp=window.webpackJsonp||[]).push([[1176],{2387:function(t,e,n){"use strict";n.r(e),n.d(e,"SpinePlayer",(function(){return l})),n.d(e,"Animation",(function(){return r.b})),n.d(e,"MixBlend",(function(){return r.Q})),n.d(e,"MixDirection",(function(){return r.R})),n.d(e,"Timeline",(function(){return r.Nb})),n.d(e,"CurveTimeline",(function(){return r.s})),n.d(e,"CurveTimeline1",(function(){return r.t})),n.d(e,"CurveTimeline2",(function(){return r.u})),n.d(e,"RotateTimeline",(function(){return r.jb})),n.d(e,"TranslateTimeline",(function(){return r.Tb})),n.d(e,"TranslateXTimeline",(function(){return r.Ub})),n.d(e,"TranslateYTimeline",(function(){return r.Vb})),n.d(e,"ScaleTimeline",(function(){return r.mb})),n.d(e,"ScaleXTimeline",(function(){return r.nb})),n.d(e,"ScaleYTimeline",(function(){return r.ob})),n.d(e,"ShearTimeline",(function(){return r.qb})),n.d(e,"ShearXTimeline",(function(){return r.rb})),n.d(e,"ShearYTimeline",(function(){return r.sb})),n.d(e,"RGBATimeline",(function(){return r.fb})),n.d(e,"RGBTimeline",(function(){return r.gb})),n.d(e,"AlphaTimeline",(function(){return r.a})),n.d(e,"RGBA2Timeline",(function(){return r.eb})),n.d(e,"RGB2Timeline",(function(){return r.db})),n.d(e,"AttachmentTimeline",(function(){return r.i})),n.d(e,"DeformTimeline",(function(){return r.w})),n.d(e,"EventTimeline",(function(){return r.C})),n.d(e,"DrawOrderTimeline",(function(){return r.y})),n.d(e,"IkConstraintTimeline",(function(){return r.L})),n.d(e,"TransformConstraintTimeline",(function(){return r.Rb})),n.d(e,"PathConstraintPositionTimeline",(function(){return r.W})),n.d(e,"PathConstraintSpacingTimeline",(function(){return r.X})),n.d(e,"PathConstraintMixTimeline",(function(){return r.V})),n.d(e,"SequenceTimeline",(function(){return r.pb})),n.d(e,"AnimationState",(function(){return r.c})),n.d(e,"TrackEntry",(function(){return r.Ob})),n.d(e,"EventQueue",(function(){return r.B})),n.d(e,"EventType",(function(){return r.D})),n.d(e,"AnimationStateAdapter",(function(){return r.d})),n.d(e,"SUBSEQUENT",(function(){return r.lb})),n.d(e,"FIRST",(function(){return r.E})),n.d(e,"HOLD_SUBSEQUENT",(function(){return r.I})),n.d(e,"HOLD_FIRST",(function(){return r.G})),n.d(e,"HOLD_MIX",(function(){return r.H})),n.d(e,"SETUP",(function(){return r.kb})),n.d(e,"CURRENT",(function(){return r.o})),n.d(e,"AnimationStateData",(function(){return r.e})),n.d(e,"AtlasAttachmentLoader",(function(){return r.g})),n.d(e,"Bone",(function(){return r.l})),n.d(e,"BoneData",(function(){return r.m})),n.d(e,"TransformMode",(function(){return r.Sb})),n.d(e,"ConstraintData",(function(){return r.r})),n.d(e,"AssetManagerBase",(function(){return r.f})),n.d(e,"Downloader",(function(){return r.x})),n.d(e,"Event",(function(){return r.z})),n.d(e,"EventData",(function(){return r.A})),n.d(e,"IkConstraint",(function(){return r.J})),n.d(e,"IkConstraintData",(function(){return r.K})),n.d(e,"PathConstraint",(function(){return r.T})),n.d(e,"PathConstraintData",(function(){return r.U})),n.d(e,"PositionMode",(function(){return r.ab})),n.d(e,"SpacingMode",(function(){return r.Db})),n.d(e,"RotateMode",(function(){return r.ib})),n.d(e,"Skeleton",(function(){return r.tb})),n.d(e,"SkeletonBinary",(function(){return r.ub})),n.d(e,"BinaryInput",(function(){return r.j})),n.d(e,"SkeletonBounds",(function(){return r.vb})),n.d(e,"SkeletonClipping",(function(){return r.wb})),n.d(e,"SkeletonData",(function(){return r.xb})),n.d(e,"SkeletonJson",(function(){return r.yb})),n.d(e,"SkinEntry",(function(){return r.Ab})),n.d(e,"Skin",(function(){return r.zb})),n.d(e,"Slot",(function(){return r.Bb})),n.d(e,"SlotData",(function(){return r.Cb})),n.d(e,"BlendMode",(function(){return r.k})),n.d(e,"Texture",(function(){return r.Fb})),n.d(e,"TextureFilter",(function(){return r.Jb})),n.d(e,"TextureWrap",(function(){return r.Lb})),n.d(e,"TextureRegion",(function(){return r.Kb})),n.d(e,"FakeTexture",(function(){return r.F})),n.d(e,"TextureAtlas",(function(){return r.Gb})),n.d(e,"TextureAtlasPage",(function(){return r.Hb})),n.d(e,"TextureAtlasRegion",(function(){return r.Ib})),n.d(e,"TransformConstraint",(function(){return r.Pb})),n.d(e,"TransformConstraintData",(function(){return r.Qb})),n.d(e,"Triangulator",(function(){return r.Wb})),n.d(e,"IntSet",(function(){return r.M})),n.d(e,"StringSet",(function(){return r.Eb})),n.d(e,"Color",(function(){return r.q})),n.d(e,"MathUtils",(function(){return r.O})),n.d(e,"Interpolation",(function(){return r.N})),n.d(e,"Pow",(function(){return r.bb})),n.d(e,"PowOut",(function(){return r.cb})),n.d(e,"Utils",(function(){return r.Xb})),n.d(e,"DebugUtils",(function(){return r.v})),n.d(e,"Pool",(function(){return r.Z})),n.d(e,"Vector2",(function(){return r.Yb})),n.d(e,"TimeKeeper",(function(){return r.Mb})),n.d(e,"WindowedMean",(function(){return r.ac})),n.d(e,"Attachment",(function(){return r.h})),n.d(e,"VertexAttachment",(function(){return r.Zb})),n.d(e,"BoundingBoxAttachment",(function(){return r.n})),n.d(e,"ClippingAttachment",(function(){return r.p})),n.d(e,"MeshAttachment",(function(){return r.P})),n.d(e,"PathAttachment",(function(){return r.S})),n.d(e,"PointAttachment",(function(){return r.Y})),n.d(e,"RegionAttachment",(function(){return r.hb})),n.d(e,"AssetManager",(function(){return o.a})),n.d(e,"OrthoCamera",(function(){return o.A})),n.d(e,"CameraController",(function(){return o.b})),n.d(e,"GLTexture",(function(){return o.e})),n.d(e,"Input",(function(){return o.f})),n.d(e,"Touch",(function(){return o.O})),n.d(e,"LoadingScreen",(function(){return o.g})),n.d(e,"M00",(function(){return o.h})),n.d(e,"M01",(function(){return o.i})),n.d(e,"M02",(function(){return o.j})),n.d(e,"M03",(function(){return o.k})),n.d(e,"M10",(function(){return o.l})),n.d(e,"M11",(function(){return o.m})),n.d(e,"M12",(function(){return o.n})),n.d(e,"M13",(function(){return o.o})),n.d(e,"M20",(function(){return o.p})),n.d(e,"M21",(function(){return o.q})),n.d(e,"M22",(function(){return o.r})),n.d(e,"M23",(function(){return o.s})),n.d(e,"M30",(function(){return o.t})),n.d(e,"M31",(function(){return o.u})),n.d(e,"M32",(function(){return o.v})),n.d(e,"M33",(function(){return o.w})),n.d(e,"Matrix4",(function(){return o.y})),n.d(e,"Mesh",(function(){return o.z})),n.d(e,"VertexAttribute",(function(){return o.Q})),n.d(e,"Position2Attribute",(function(){return o.C})),n.d(e,"Position3Attribute",(function(){return o.D})),n.d(e,"TexCoordAttribute",(function(){return o.M})),n.d(e,"ColorAttribute",(function(){return o.d})),n.d(e,"Color2Attribute",(function(){return o.c})),n.d(e,"VertexAttributeType",(function(){return o.R})),n.d(e,"PolygonBatcher",(function(){return o.B})),n.d(e,"SceneRenderer",(function(){return o.F})),n.d(e,"ResizeMode",(function(){return o.E})),n.d(e,"Shader",(function(){return o.G})),n.d(e,"ShapeRenderer",(function(){return o.H})),n.d(e,"ShapeType",(function(){return o.I})),n.d(e,"SkeletonDebugRenderer",(function(){return o.J})),n.d(e,"SkeletonRenderer",(function(){return o.K})),n.d(e,"SpineCanvas",(function(){return o.L})),n.d(e,"Vector3",(function(){return o.P})),n.d(e,"ManagedWebGLRenderingContext",(function(){return o.x})),n.d(e,"WebGLBlendModeConverter",(function(){return o.S}));var r=n(21),o=n(207);class l{constructor(t,e){this.config=e,this.canvas=null,this.context=null,this.sceneRenderer=null,this.loadingScreen=null,this.assetManager=null,this.bg=new r.q,this.bgFullscreen=new r.q,this.playerControls=null,this.timelineSlider=null,this.playButton=null,this.skinButton=null,this.animationButton=null,this.playTime=0,this.selectedBones=[],this.cancelId=0,this.popup=null,this.error=!1,this.skeleton=null,this.animationState=null,this.paused=!0,this.speed=1,this.time=new r.Mb,this.stopRequestAnimationFrame=!1,this.disposed=!1,this.viewport={},this.currentViewport={},this.previousViewport={},this.viewportTransitionStart=0,this.eventListeners=[];let n="string"==typeof t?document.getElementById(t):t;if(null==n)throw new Error("SpinePlayer parent not found: "+t);this.parent=n,void 0===e.showControls&&(e.showControls=!0);let o=e.showControls?'\n<div class="spine-player-controls spine-player-popup-parent spine-player-controls-hidden">\n<div class="spine-player-timeline"></div>\n<div class="spine-player-buttons">\n<button class="spine-player-button spine-player-button-icon-pause"></button>\n<div class="spine-player-button-spacer"></div>\n<button class="spine-player-button spine-player-button-icon-speed"></button>\n<button class="spine-player-button spine-player-button-icon-animations"></button>\n<button class="spine-player-button spine-player-button-icon-skins"></button>\n<button class="spine-player-button spine-player-button-icon-settings"></button>\n<button class="spine-player-button spine-player-button-icon-fullscreen"></button>\n<img class="spine-player-button-icon-spine-logo" src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%20104%2031.16%22%3E%3Cpath%20d%3D%22M104%2012.68a1.31%201.31%200%200%201-.37%201%201.28%201.28%200%200%201-.85.31H91.57a10.51%2010.51%200%200%200%20.29%202.55%204.92%204.92%200%200%200%201%202%204.27%204.27%200%200%200%201.64%201.26%206.89%206.89%200%200%200%202.6.44%2010.66%2010.66%200%200%200%202.17-.2%2012.81%2012.81%200%200%200%201.64-.44q.69-.25%201.14-.44a1.87%201.87%200%200%201%20.68-.2.44.44%200%200%201%20.27.04.43.43%200%200%201%20.16.2%201.38%201.38%200%200%201%20.09.37%204.89%204.89%200%200%201%200%20.58%204.14%204.14%200%200%201%200%20.43v.32a.83.83%200%200%201-.09.26%201.1%201.1%200%200%201-.17.22%202.77%202.77%200%200%201-.61.34%208.94%208.94%200%200%201-1.32.46%2018.54%2018.54%200%200%201-1.88.41%2013.78%2013.78%200%200%201-2.28.18%2010.55%2010.55%200%200%201-3.68-.59%206.82%206.82%200%200%201-2.66-1.74%207.44%207.44%200%200%201-1.63-2.89%2013.48%2013.48%200%200%201-.55-4%2012.76%2012.76%200%200%201%20.57-3.94%208.35%208.35%200%200%201%201.64-3%207.15%207.15%200%200%201%202.58-1.87%208.47%208.47%200%200%201%203.39-.65%208.19%208.19%200%200%201%203.41.64%206.46%206.46%200%200%201%202.32%201.73%207%207%200%200%201%201.3%202.54%2011.17%2011.17%200%200%201%20.43%203.13zm-3.14-.93a5.69%205.69%200%200%200-1.09-3.86%204.17%204.17%200%200%200-3.42-1.4%204.52%204.52%200%200%200-2%20.44%204.41%204.41%200%200%200-1.47%201.15A5.29%205.29%200%200%200%2092%209.75a7%207%200%200%200-.36%202zM80.68%2021.94a.42.42%200%200%201-.08.26.59.59%200%200%201-.25.18%201.74%201.74%200%200%201-.47.11%206.31%206.31%200%200%201-.76%200%206.5%206.5%200%200%201-.78%200%201.74%201.74%200%200%201-.47-.11.59.59%200%200%201-.25-.18.42.42%200%200%201-.08-.26V12a9.8%209.8%200%200%200-.23-2.35%204.86%204.86%200%200%200-.66-1.53%202.88%202.88%200%200%200-1.13-1%203.57%203.57%200%200%200-1.6-.34%204%204%200%200%200-2.35.83A12.71%2012.71%200%200%200%2069.11%2010v11.9a.42.42%200%200%201-.08.26.59.59%200%200%201-.25.18%201.74%201.74%200%200%201-.47.11%206.51%206.51%200%200%201-.78%200%206.31%206.31%200%200%201-.76%200%201.88%201.88%200%200%201-.48-.11.52.52%200%200%201-.25-.18.46.46%200%200%201-.07-.26v-17a.53.53%200%200%201%20.03-.21.5.5%200%200%201%20.23-.19%201.28%201.28%200%200%201%20.44-.11%208.53%208.53%200%200%201%201.39%200%201.12%201.12%200%200%201%20.43.11.6.6%200%200%201%20.22.19.47.47%200%200%201%20.07.26V7.2a10.46%2010.46%200%200%201%202.87-2.36%206.17%206.17%200%200%201%202.88-.75%206.41%206.41%200%200%201%202.87.58%205.16%205.16%200%200%201%201.88%201.54%206.15%206.15%200%200%201%201%202.26%2013.46%2013.46%200%200%201%20.31%203.11z%22%20fill%3D%22%23fff%22%2F%3E%3Cpath%20d%3D%22M43.35%202.86c.09%202.6%201.89%204%205.48%204.61%203%20.48%205.79.24%206.69-2.37%201.75-5.09-2.4-3.82-6-4.39s-6.31-2.03-6.17%202.15zm1.08%2010.69c.33%201.94%202.14%203.06%204.91%203s4.84-1.16%205.13-3.25c.53-3.88-2.53-2.38-5.3-2.3s-5.4-1.26-4.74%202.55zM48%2022.44c.55%201.45%202.06%202.06%204.1%201.63s3.45-1.11%203.33-2.76c-.21-3.06-2.22-2.1-4.26-1.66S47%2019.6%2048%2022.44zm1.78%206.78c.16%201.22%201.22%202%202.88%201.93s2.92-.67%203.13-2c.4-2.43-1.46-1.53-3.12-1.51s-3.17-.82-2.89%201.58z%22%20fill%3D%22%23ff4000%22%2F%3E%3Cpath%20d%3D%22M35.28%2013.16a15.33%2015.33%200%200%201-.48%204%208.75%208.75%200%200%201-1.42%203%206.35%206.35%200%200%201-2.32%201.91%207.14%207.14%200%200%201-3.16.67%206.1%206.1%200%200%201-1.4-.15%205.34%205.34%200%200%201-1.26-.47%207.29%207.29%200%200%201-1.24-.81q-.61-.49-1.29-1.15v8.51a.47.47%200%200%201-.08.26.56.56%200%200%201-.25.19%201.74%201.74%200%200%201-.47.11%206.47%206.47%200%200%201-.78%200%206.26%206.26%200%200%201-.76%200%201.89%201.89%200%200%201-.48-.11.49.49%200%200%201-.25-.19.51.51%200%200%201-.07-.26V4.91a.57.57%200%200%201%20.06-.27.46.46%200%200%201%20.23-.18%201.47%201.47%200%200%201%20.44-.1%207.41%207.41%200%200%201%201.3%200%201.45%201.45%200%200%201%20.43.1.52.52%200%200%201%20.24.18.51.51%200%200%201%20.07.27V7.2a18.06%2018.06%200%200%201%201.49-1.38%209%209%200%200%201%201.45-1%206.82%206.82%200%200%201%201.49-.59%207.09%207.09%200%200%201%204.78.52%206%206%200%200%201%202.13%202%208.79%208.79%200%200%201%201.2%202.9%2015.72%2015.72%200%200%201%20.4%203.51zm-3.28.36a15.64%2015.64%200%200%200-.2-2.53%207.32%207.32%200%200%200-.69-2.17%204.06%204.06%200%200%200-1.3-1.51%203.49%203.49%200%200%200-2-.57%204.1%204.1%200%200%200-1.2.18%204.92%204.92%200%200%200-1.2.57%208.54%208.54%200%200%200-1.28%201A15.77%2015.77%200%200%200%2022.76%2010v6.77a13.53%2013.53%200%200%200%202.46%202.4%204.12%204.12%200%200%200%202.44.83%203.56%203.56%200%200%200%202-.57A4.28%204.28%200%200%200%2031%2018a7.58%207.58%200%200%200%20.77-2.12%2011.43%2011.43%200%200%200%20.23-2.36zM12%2017.3a5.39%205.39%200%200%201-.48%202.33%204.73%204.73%200%200%201-1.37%201.72%206.19%206.19%200%200%201-2.12%201.06%209.62%209.62%200%200%201-2.71.36%2010.38%2010.38%200%200%201-3.21-.5A7.63%207.63%200%200%201%201%2021.82a3.25%203.25%200%200%201-.66-.43%201.09%201.09%200%200%201-.3-.53%203.59%203.59%200%200%201-.04-.93%204.06%204.06%200%200%201%200-.61%202%202%200%200%201%20.09-.4.42.42%200%200%201%20.16-.22.43.43%200%200%201%20.24-.07%201.35%201.35%200%200%201%20.61.26q.41.26%201%20.56a9.22%209.22%200%200%200%201.41.55%206.25%206.25%200%200%200%201.87.26%205.62%205.62%200%200%200%201.44-.17%203.48%203.48%200%200%200%201.12-.5%202.23%202.23%200%200%200%20.73-.84%202.68%202.68%200%200%200%20.26-1.21%202%202%200%200%200-.37-1.21%203.55%203.55%200%200%200-1-.87%208.09%208.09%200%200%200-1.36-.66l-1.56-.61a16%2016%200%200%201-1.57-.73%206%206%200%200%201-1.37-1%204.52%204.52%200%200%201-1-1.4%204.69%204.69%200%200%201-.37-2%204.88%204.88%200%200%201%20.39-1.87%204.46%204.46%200%200%201%201.16-1.61%205.83%205.83%200%200%201%201.94-1.11A8.06%208.06%200%200%201%206.53%204a8.28%208.28%200%200%201%201.36.11%209.36%209.36%200%200%201%201.23.28%205.92%205.92%200%200%201%20.94.37%204.09%204.09%200%200%201%20.59.35%201%201%200%200%201%20.26.26.83.83%200%200%201%20.09.26%201.32%201.32%200%200%200%20.06.35%203.87%203.87%200%200%201%200%20.51%204.76%204.76%200%200%201%200%20.56%201.39%201.39%200%200%201-.09.39.5.5%200%200%201-.16.22.35.35%200%200%201-.21.07%201%201%200%200%201-.49-.21%207%207%200%200%200-.83-.44%209.26%209.26%200%200%200-1.2-.44%205.49%205.49%200%200%200-1.58-.16%204.93%204.93%200%200%200-1.4.18%202.69%202.69%200%200%200-1%20.51%202.16%202.16%200%200%200-.59.83%202.43%202.43%200%200%200-.2%201%202%202%200%200%200%20.38%201.24%203.6%203.6%200%200%200%201%20.88%208.25%208.25%200%200%200%201.38.68l1.58.62q.8.32%201.59.72a6%206%200%200%201%201.39%201%204.37%204.37%200%200%201%201%201.36%204.46%204.46%200%200%201%20.37%201.8z%22%20fill%3D%22%23fff%22%2F%3E%3C%2Fsvg%3E">\n</div></div>':"";this.parent.appendChild(this.dom=f(`<div class="spine-player" style="position:relative;height:100%"><canvas class="spine-player-canvas" style="display:block;width:100%;height:100%"></canvas>${o}</div>`));try{this.validateConfig(e)}catch(t){this.showError(t.message,t)}this.initialize(),this.addEventListener(window,"resize",(()=>this.drawFrame(!1))),requestAnimationFrame((()=>this.drawFrame()))}dispose(){var t,e,n;null===(t=this.sceneRenderer)||void 0===t||t.dispose(),null===(e=this.loadingScreen)||void 0===e||e.dispose(),null===(n=this.assetManager)||void 0===n||n.dispose();for(var i=0;i<this.eventListeners.length;i++){var r=this.eventListeners[i];r.target.removeEventListener(r.event,r.func)}this.parent.removeChild(this.dom),this.disposed=!0}addEventListener(t,e,n){this.eventListeners.push({target:t,event:e,func:n}),t.addEventListener(e,n)}validateConfig(t){if(!t)throw new Error("A configuration object must be passed to to new SpinePlayer().");if(t.skelUrl&&(t.binaryUrl=t.skelUrl),!t.jsonUrl&&!t.binaryUrl)throw new Error("A URL must be specified for the skeleton JSON or binary file.");if(!t.atlasUrl)throw new Error("A URL must be specified for the atlas file.");if(t.backgroundColor||(t.backgroundColor=t.alpha?"00000000":"000000"),t.fullScreenBackgroundColor||(t.fullScreenBackgroundColor=t.backgroundColor),t.backgroundImage&&!t.backgroundImage.url&&(t.backgroundImage=void 0),void 0===t.premultipliedAlpha&&(t.premultipliedAlpha=!0),void 0===t.preserveDrawingBuffer&&(t.preserveDrawingBuffer=!1),void 0===t.mipmaps&&(t.mipmaps=!0),t.debug||(t.debug={bones:!1,clipping:!1,bounds:!1,hulls:!1,meshes:!1,paths:!1,points:!1,regions:!1}),t.animations&&t.animation&&t.animations.indexOf(t.animation)<0)throw new Error("Animation '"+t.animation+"' is not in the config animation list: "+v(t.animations));if(t.skins&&t.skin&&t.skins.indexOf(t.skin)<0)throw new Error("Default skin '"+t.skin+"' is not in the config skins list: "+v(t.skins));t.viewport||(t.viewport={}),t.viewport.animations||(t.viewport.animations={}),void 0===t.viewport.debugRender&&(t.viewport.debugRender=!1),void 0===t.viewport.transitionTime&&(t.viewport.transitionTime=.25),t.controlBones||(t.controlBones=[]),void 0===t.showLoading&&(t.showLoading=!0),void 0===t.defaultMix&&(t.defaultMix=.25)}initialize(){let t=this.config,e=this.dom;if(!t.alpha){let e=t.backgroundColor;this.dom.style.backgroundColor=("#"==e.charAt(0)?e:"#"+e).substr(0,7)}try{this.canvas=m(e,"spine-player-canvas"),this.context=new o.x(this.canvas,{alpha:t.alpha,preserveDrawingBuffer:t.preserveDrawingBuffer}),this.sceneRenderer=new o.F(this.canvas,this.context,!0),t.showLoading&&(this.loadingScreen=new o.g(this.sceneRenderer))}catch(t){return this.showError("Sorry, your browser does not support \nPlease use the latest version of Firefox, Chrome, Edge, or Safari.",t),null}if(this.assetManager=new o.a(this.context,"",t.downloader),t.rawDataURIs)for(let path in t.rawDataURIs)this.assetManager.setRawDataURI(path,t.rawDataURIs[path]);if(t.jsonUrl?this.assetManager.loadJson(t.jsonUrl):this.assetManager.loadBinary(t.binaryUrl),this.assetManager.loadTextureAtlas(t.atlasUrl),t.backgroundImage&&this.assetManager.loadTexture(t.backgroundImage.url),this.bg.setFromString(t.backgroundColor),this.bgFullscreen.setFromString(t.fullScreenBackgroundColor),t.showControls){this.playerControls=e.children[1];let t=this.playerControls.children,n=t[0],r=t[1].children;this.playButton=r[0];let o=r[2];this.animationButton=r[3],this.skinButton=r[4];let l=r[5],d=r[6],h=r[7];this.timelineSlider=new c,n.appendChild(this.timelineSlider.create()),this.timelineSlider.change=t=>{this.pause();let time=this.animationState.getCurrent(0).animation.duration*t;this.animationState.update(time-this.playTime),this.animationState.apply(this.skeleton),this.skeleton.updateWorldTransform(),this.playTime=time},this.playButton.onclick=()=>this.paused?this.play():this.pause(),o.onclick=()=>this.showSpeedDialog(o),this.animationButton.onclick=()=>this.showAnimationsDialog(this.animationButton),this.skinButton.onclick=()=>this.showSkinsDialog(this.skinButton),l.onclick=()=>this.showSettingsDialog(l);let m=this.canvas.clientWidth,f=this.canvas.clientHeight,w=this.canvas.style.width,v=this.canvas.style.height,y=!1;d.onclick=()=>{let t=()=>{y=!y,y||(this.canvas.style.width=m+"px",this.canvas.style.height=f+"px",this.drawFrame(!1),requestAnimationFrame((()=>{this.canvas.style.width=w,this.canvas.style.height=v})))},n=e;n.onfullscreenchange=t,n.onwebkitfullscreenchange=t;let r=document;r.fullscreenElement||r.webkitFullscreenElement||r.mozFullScreenElement||r.msFullscreenElement?r.exitFullscreen?r.exitFullscreen():r.mozCancelFullScreen?r.mozCancelFullScreen():r.webkitExitFullscreen?r.webkitExitFullscreen():r.msExitFullscreen&&r.msExitFullscreen():(m=this.canvas.clientWidth,f=this.canvas.clientHeight,w=this.canvas.style.width,v=this.canvas.style.height,n.requestFullscreen?n.requestFullscreen():n.webkitRequestFullScreen?n.webkitRequestFullScreen():n.mozRequestFullScreen?n.mozRequestFullScreen():n.msRequestFullscreen&&n.msRequestFullscreen())},h.onclick=()=>window.open("http://esotericsoftware.com")}return e}loadSkeleton(){if(this.error)return;this.assetManager.hasErrors()&&this.showError("Error: Assets could not be loaded.\n"+v(this.assetManager.getErrors()));let t,e=this.config,n=this.assetManager.require(e.atlasUrl),o=this.context.gl,l=o.getExtension("EXT_texture_filter_anisotropic"),d=-1!=o.getParameter(o.VERSION).indexOf("WebGL 1.0");for(let t of n.pages){let n=t.minFilter;var h=e.mipmaps,c=r.O.isPowerOfTwo(t.width)&&r.O.isPowerOfTwo(t.height);d&&!c&&(h=!1),h&&(l?(o.texParameterf(o.TEXTURE_2D,l.TEXTURE_MAX_ANISOTROPY_EXT,8),n=r.Jb.MipMapLinearLinear):n=r.Jb.Linear,t.texture.setFilters(n,r.Jb.Nearest)),n!=r.Jb.Nearest&&n!=r.Jb.Linear&&t.texture.update(!0)}if(e.jsonUrl)try{let o=this.assetManager.remove(e.jsonUrl);if(!o)throw new Error("Empty JSON data.");if(e.jsonField&&(o=o[e.jsonField],!o))throw new Error("JSON field does not exist: "+e.jsonField);let l=new r.yb(new r.g(n));t=l.readSkeletonData(o)}catch(t){return void this.showError(`Error: Could not load skeleton JSON.\n${t.message}`,t)}else{let o=this.assetManager.remove(e.binaryUrl),l=new r.ub(new r.g(n));try{t=l.readSkeletonData(o)}catch(t){return void this.showError(`Error: Could not load skeleton binary.\n${t.message}`,t)}}this.skeleton=new r.tb(t);let m=new r.e(t);m.defaultMix=e.defaultMix,this.animationState=new r.c(m),e.controlBones.forEach((e=>{t.findBone(e)||this.showError(`Error: Control bone does not exist in skeleton: ${e}`)})),!e.skin&&t.skins.length&&(e.skin=t.skins[0].name),e.skins&&e.skin.length&&e.skins.forEach((t=>{this.skeleton.data.findSkin(t)||this.showError(`Error: Skin in config list does not exist in skeleton: ${t}`)})),e.skin&&(this.skeleton.data.findSkin(e.skin)||this.showError(`Error: Skin does not exist in skeleton: ${e.skin}`),this.skeleton.setSkinByName(e.skin),this.skeleton.setSlotsToSetupPose()),Object.getOwnPropertyNames(e.viewport.animations).forEach((e=>{t.findAnimation(e)||this.showError(`Error: Animation for which a viewport was specified does not exist in skeleton: ${e}`)})),e.animations&&e.animations.length&&(e.animations.forEach((t=>{this.skeleton.data.findAnimation(t)||this.showError(`Error: Animation in config list does not exist in skeleton: ${t}`)})),e.animation||(e.animation=e.animations[0])),e.animation&&!t.findAnimation(e.animation)&&this.showError(`Error: Animation does not exist in skeleton: ${e.animation}`),this.setupInput(),e.showControls&&((1==t.skins.length||e.skins&&1==e.skins.length)&&this.skinButton.classList.add("spine-player-hidden"),(1==t.animations.length||e.animations&&1==e.animations.length)&&this.animationButton.classList.add("spine-player-hidden")),e.success&&e.success(this);let f=this.animationState.getCurrent(0);f?this.currentViewport||(this.setViewport(f.animation),this.play()):e.animation?(f=this.setAnimation(e.animation),this.play()):(f=this.animationState.setEmptyAnimation(0),f.trackEnd=1e8,this.setViewport(f.animation),this.pause())}setupInput(){let t=this.config,e=t.controlBones;if(!e.length&&!t.showControls)return;let n=this.selectedBones=new Array(e.length),canvas=this.canvas,l=null,d=new r.Yb,h=new o.P,c=new o.P,f=new r.Yb,w=this.skeleton,v=this.sceneRenderer,y=function(t,r){c.set(t,canvas.clientHeight-r,0),d.x=d.y=0;let o=24,l=0,m=null;for(let i=0;i<e.length;i++){n[i]=null;let t=w.findBone(e[i]);if(!t)continue;let r=v.camera.worldToScreen(h.set(t.worldX,t.worldY,0),canvas.clientWidth,canvas.clientHeight).distance(c);r<o&&(o=r,m=t,l=i,d.x=h.x-c.x,d.y=h.y-c.y)}return m&&(n[l]=m),m};if(new o.f(canvas).addListener({down:(t,e)=>{l=y(t,e)},up:()=>{l?l=null:t.showControls&&(this.paused?this.play():this.pause())},dragged:(t,e)=>{l&&(t=r.O.clamp(t+d.x,0,canvas.clientWidth),e=r.O.clamp(e-d.y,0,canvas.clientHeight),v.camera.screenToWorld(h.set(t,e,0),canvas.clientWidth,canvas.clientHeight),l.parent?(l.parent.worldToLocal(f.set(h.x-w.x,h.y-w.y)),l.x=f.x,l.y=f.y):(l.x=h.x-w.x,l.y=h.y-w.y))},moved:(t,e)=>y(t,e)}),t.showControls){this.addEventListener(document,"mousemove",(t=>{t instanceof MouseEvent&&r(t.clientX,t.clientY)})),this.addEventListener(document,"touchmove",(t=>{if(t instanceof TouchEvent){let e=t.changedTouches;if(e.length){let t=e[0];r(t.clientX,t.clientY)}}}));let t=(t,e,rect)=>{let n=t-rect.left,r=e-rect.top;return n>=0&&n<=rect.width&&r>=0&&r<=rect.height},e=!0,n=!1,r=(r,o)=>{let l=m(this.dom,"spine-player-popup");e=t(r,o,this.playerControls.getBoundingClientRect()),n=t(r,o,canvas.getBoundingClientRect()),clearTimeout(this.cancelId),!(l||e||n||this.paused)?this.playerControls.classList.add("spine-player-controls-hidden"):this.playerControls.classList.remove("spine-player-controls-hidden"),e||l||this.paused||(this.cancelId=setTimeout((()=>{this.paused||this.playerControls.classList.add("spine-player-controls-hidden")}),1e3))}}}play(){this.paused=!1;let t=this.config;t.showControls&&(this.cancelId=setTimeout((()=>{this.paused||this.playerControls.classList.add("spine-player-controls-hidden")}),1e3),this.playButton.classList.remove("spine-player-button-icon-play"),this.playButton.classList.add("spine-player-button-icon-pause"),t.animation||(t.animations&&t.animations.length?t.animation=t.animations[0]:this.skeleton.data.animations.length&&(t.animation=this.skeleton.data.animations[0].name),t.animation&&this.setAnimation(t.animation)))}pause(){this.paused=!0,this.config.showControls&&(this.playerControls.classList.remove("spine-player-controls-hidden"),clearTimeout(this.cancelId),this.playButton.classList.remove("spine-player-button-icon-pause"),this.playButton.classList.add("spine-player-button-icon-play"))}setAnimation(t,e=!0){return t=this.setViewport(t),this.animationState.setAnimationWith(0,t,e)}addAnimation(t,e=!0,n=0){return t=this.setViewport(t),this.animationState.addAnimationWith(0,t,e,n)}setViewport(t){if("string"==typeof t){let e=this.skeleton.data.findAnimation(t);if(!e)throw new Error("Animation not found: "+t);t=e}this.previousViewport=this.currentViewport;let e=this.config.viewport,n=this.currentViewport={padLeft:void 0!==e.padLeft?e.padLeft:"10%",padRight:void 0!==e.padRight?e.padRight:"10%",padTop:void 0!==e.padTop?e.padTop:"10%",padBottom:void 0!==e.padBottom?e.padBottom:"10%"};void 0!==e.x&&void 0!==e.y&&e.width&&e.height?(n.x=e.x,n.y=e.y,n.width=e.width,n.height=e.height):this.calculateAnimationViewport(t,n);let r=this.config.viewport.animations[t.name];return r&&(void 0!==r.x&&void 0!==r.y&&r.width&&r.height&&(n.x=r.x,n.y=r.y,n.width=r.width,n.height=r.height),void 0!==r.padLeft&&(n.padLeft=r.padLeft),void 0!==r.padRight&&(n.padRight=r.padRight),void 0!==r.padTop&&(n.padTop=r.padTop),void 0!==r.padBottom&&(n.padBottom=r.padBottom)),n.padLeft=this.percentageToWorldUnit(n.width,n.padLeft),n.padRight=this.percentageToWorldUnit(n.width,n.padRight),n.padBottom=this.percentageToWorldUnit(n.height,n.padBottom),n.padTop=this.percentageToWorldUnit(n.height,n.padTop),this.viewportTransitionStart=performance.now(),t}percentageToWorldUnit(t,e){return"string"==typeof e?t*parseFloat(e.substr(0,e.length-1))/100:e}calculateAnimationViewport(t,e){this.skeleton.setToSetupPose();let n=t.duration?t.duration/100:0,time=0,o=1e8,l=-1e8,d=1e8,h=-1e8,c=new r.Yb,m=new r.Yb;for(let i=0;i<100;i++,time+=n)t.apply(this.skeleton,time,time,!1,[],1,r.Q.setup,r.R.mixIn),this.skeleton.updateWorldTransform(),this.skeleton.getBounds(c,m),isNaN(c.x)||isNaN(c.y)||isNaN(m.x)||isNaN(m.y)?this.showError("Animation bounds are invalid: "+t.name):(o=Math.min(c.x,o),l=Math.max(c.x+m.x,l),d=Math.min(c.y,d),h=Math.max(c.y+m.y,h));e.x=o,e.y=d,e.width=l-o,e.height=h-d}drawFrame(t=!0){try{if(this.error)return;if(this.disposed)return;t&&!this.stopRequestAnimationFrame&&requestAnimationFrame((()=>this.drawFrame()));let e=document,n=e.fullscreenElement||e.webkitFullscreenElement||e.mozFullScreenElement||e.msFullscreenElement?this.bgFullscreen:this.bg;this.time.update();let l=this.time.delta,d=this.assetManager.isLoadingComplete();!this.skeleton&&d&&this.loadSkeleton();let h=this.skeleton,c=this.config;if(h){let t=this.sceneRenderer;t.resize(o.E.Expand);let e=this.paused?0:l*this.speed;if(c.frame&&c.frame(this,e),!this.paused&&(this.animationState.update(e),this.animationState.apply(h),h.updateWorldTransform(),c.showControls)){this.playTime+=e;let t=this.animationState.getCurrent(0);if(t){let e=t.animation.duration;for(;this.playTime>=e&&0!=e;)this.playTime-=e;this.playTime=Math.max(0,Math.min(this.playTime,e)),this.timelineSlider.setValue(this.playTime/e)}}let d=this.viewport;if(d.x=this.currentViewport.x-this.currentViewport.padLeft,d.y=this.currentViewport.y-this.currentViewport.padBottom,d.width=this.currentViewport.width+this.currentViewport.padLeft+this.currentViewport.padRight,d.height=this.currentViewport.height+this.currentViewport.padBottom+this.currentViewport.padTop,this.previousViewport){let t=(performance.now()-this.viewportTransitionStart)/1e3/c.viewport.transitionTime;if(t<1){let e=this.previousViewport.x-this.previousViewport.padLeft,n=this.previousViewport.y-this.previousViewport.padBottom,r=this.previousViewport.width+this.previousViewport.padLeft+this.previousViewport.padRight,o=this.previousViewport.height+this.previousViewport.padBottom+this.previousViewport.padTop;d.x=e+(d.x-e)*t,d.y=n+(d.y-n)*t,d.width=r+(d.width-r)*t,d.height=o+(d.height-o)*t}}t.camera.zoom=this.canvas.height/this.canvas.width>d.height/d.width?d.width/this.canvas.width:d.height/this.canvas.height,t.camera.position.x=d.x+d.width/2,t.camera.position.y=d.y+d.height/2;let m=this.context.gl;m.clearColor(n.r,n.g,n.b,n.a),m.clear(m.COLOR_BUFFER_BIT),c.update&&c.update(this,e),t.begin();let f=c.backgroundImage;if(f){let e=this.assetManager.require(f.url);void 0!==f.x&&void 0!==f.y&&f.width&&f.height?t.drawTexture(e,f.x,f.y,f.width,f.height):t.drawTexture(e,d.x,d.y,d.width,d.height)}t.drawSkeleton(h,c.premultipliedAlpha),((t.skeletonDebugRenderer.drawBones=c.debug.bones)||(t.skeletonDebugRenderer.drawBoundingBoxes=c.debug.bounds)||(t.skeletonDebugRenderer.drawClipping=c.debug.clipping)||(t.skeletonDebugRenderer.drawMeshHull=c.debug.hulls)||(t.skeletonDebugRenderer.drawPaths=c.debug.paths)||(t.skeletonDebugRenderer.drawRegionAttachments=c.debug.regions)||(t.skeletonDebugRenderer.drawMeshTriangles=c.debug.meshes))&&t.drawSkeletonDebug(h,c.premultipliedAlpha);let w=c.controlBones;if(w.length){let e=this.selectedBones;m.lineWidth(2);for(let i=0;i<w.length;i++){let n=h.findBone(w[i]);if(!n)continue;let r=e[i]?y:x,o=e[i]?k:T;t.circle(!0,h.x+n.worldX,h.y+n.worldY,20,r),t.circle(!1,h.x+n.worldX,h.y+n.worldY,20,o)}}c.viewport.debugRender&&(m.lineWidth(1),t.rect(!1,this.currentViewport.x,this.currentViewport.y,this.currentViewport.width,this.currentViewport.height,r.q.GREEN),t.rect(!1,d.x,d.y,d.width,d.height,r.q.RED)),t.end(),c.draw&&c.draw(this,e)}c.showLoading&&(this.loadingScreen.backgroundColor.setFromColor(n),this.loadingScreen.draw(d)),d&&c.loading&&c.loading(this,l)}catch(t){this.showError(`Error: Unable to render skeleton.\n${t.message}`,t)}}stopRendering(){this.stopRequestAnimationFrame=!0}hidePopup(t){return null!=this.popup&&this.popup.hide(t)}showSpeedDialog(t){let e="speed";if(this.hidePopup(e))return;let n=new d(e,t,this,this.playerControls,'\n<div class="spine-player-popup-title">Speed</div>\n<hr>\n<div class="spine-player-row" style="align-items:center;padding:8px">\n<div class="spine-player-column">\n\t<div class="spine-player-speed-slider" style="margin-bottom:4px"></div>\n\t<div class="spine-player-row" style="justify-content:space-between"><div>0.1x</div><div>1x</div><div>2x</div></div>\n</div>\n</div>'),r=new c(2,.1,!0);m(n.dom,"spine-player-speed-slider").appendChild(r.create()),r.setValue(this.speed/2),r.change=t=>this.speed=2*t,n.show()}showAnimationsDialog(t){let e="animations";if(this.hidePopup(e))return;if(!this.skeleton||!this.skeleton.data.animations.length)return;let n=new d(e,t,this,this.playerControls,'<div class="spine-player-popup-title">Animations</div><hr><ul class="spine-player-list"></ul>'),r=m(n.dom,"spine-player-list");this.skeleton.data.animations.forEach((t=>{if(this.config.animations&&this.config.animations.indexOf(t.name)<0)return;let e=f('<li class="spine-player-list-item selectable"><div class="selectable-circle"></div><div class="selectable-text"></div></li>');t.name==this.config.animation&&e.classList.add("selected"),m(e,"selectable-text").innerText=t.name,r.appendChild(e),e.onclick=()=>{w(r.children,"selected"),e.classList.add("selected"),this.config.animation=t.name,this.playTime=0,this.setAnimation(t.name),this.play()}})),n.show()}showSkinsDialog(t){let e="skins";if(this.hidePopup(e))return;if(!this.skeleton||!this.skeleton.data.animations.length)return;let n=new d(e,t,this,this.playerControls,'<div class="spine-player-popup-title">Skins</div><hr><ul class="spine-player-list"></ul>'),r=m(n.dom,"spine-player-list");this.skeleton.data.skins.forEach((t=>{if(this.config.skins&&this.config.skins.indexOf(t.name)<0)return;let e=f('<li class="spine-player-list-item selectable"><div class="selectable-circle"></div><div class="selectable-text"></div></li>');t.name==this.config.skin&&e.classList.add("selected"),m(e,"selectable-text").innerText=t.name,r.appendChild(e),e.onclick=()=>{w(r.children,"selected"),e.classList.add("selected"),this.config.skin=t.name,this.skeleton.setSkinByName(this.config.skin),this.skeleton.setSlotsToSetupPose()}})),n.show()}showSettingsDialog(t){let e="settings";if(this.hidePopup(e))return;if(!this.skeleton||!this.skeleton.data.animations.length)return;let n=new d(e,t,this,this.playerControls,'<div class="spine-player-popup-title">Debug</div><hr><ul class="spine-player-list"></li>'),r=m(n.dom,"spine-player-list"),o=(label,t)=>{let e=f('<li class="spine-player-list-item"></li>'),s=new h(label);e.appendChild(s.create());let n=this.config.debug;s.setEnabled(n[t]),s.change=e=>n[t]=e,r.appendChild(e)};o("Bones","bones"),o("Regions","regions"),o("Meshes","meshes"),o("Bounds","bounds"),o("Paths","paths"),o("Clipping","clipping"),o("Points","points"),o("Hulls","hulls"),n.show()}showError(t,e){if(!this.error)throw this.error=!0,this.dom.appendChild(f('<div class="spine-player-error" style="background:#000;color:#fff;position:absolute;top:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;overflow:auto;z-index:999">'+t.replace("\n","<br><br>")+"</div>")),this.config.error&&this.config.error(this,t),e||new Error(t);if(e)throw e}}class d{constructor(t,button,e,n,r){this.id=t,this.button=button,this.player=e,this.dom=f('<div class="spine-player-popup spine-player-hidden"></div>'),this.dom.innerHTML=r,n.appendChild(this.dom),this.className="spine-player-button-icon-"+t+"-selected"}dispose(){}hide(t){return this.dom.remove(),this.button.classList.remove(this.className),this.id==t&&(this.player.popup=null,!0)}show(){this.player.popup=this,this.button.classList.add(this.className),this.dom.classList.remove("spine-player-hidden");let t=!1,e=()=>{t||requestAnimationFrame(e);let n=this.player.dom,r=Math.abs(n.getBoundingClientRect().bottom-n.getBoundingClientRect().bottom),o=Math.abs(n.getBoundingClientRect().right-n.getBoundingClientRect().right);this.dom.style.maxHeight=n.clientHeight-r-o+"px"};requestAnimationFrame(e);let n=!0,r=e=>{n||this.player.popup!=this?n=!1:this.dom.contains(e.target)||(this.dom.remove(),window.removeEventListener("click",r),this.button.classList.remove(this.className),this.player.popup=null,t=!0)};this.player.addEventListener(window,"click",r)}}class h{constructor(text){this.text=text,this.switch=null,this.enabled=!1,this.change=()=>{}}create(){return this.switch=f(`\n<div class="spine-player-switch">\n\t<span class="spine-player-switch-text">${this.text}</span>\n\t<div class="spine-player-switch-knob-area">\n\t\t<div class="spine-player-switch-knob"></div>\n\t</div>\n</div>`),this.switch.addEventListener("click",(()=>{this.setEnabled(!this.enabled),this.change&&this.change(this.enabled)})),this.switch}setEnabled(t){var e,n;t?null===(e=this.switch)||void 0===e||e.classList.add("active"):null===(n=this.switch)||void 0===n||n.classList.remove("active"),this.enabled=t}isEnabled(){return this.enabled}}class c{constructor(t=0,e=.1,n=!1){this.snaps=t,this.snapPercentage=e,this.big=n,this.slider=null,this.value=null,this.knob=null,this.change=()=>{}}create(){this.slider=f(`\n<div class="spine-player-slider ${this.big?"big":""}">\n\t<div class="spine-player-slider-value"></div>\n\t\x3c!--<div class="spine-player-slider-knob"></div>--\x3e\n</div>`),this.value=m(this.slider,"spine-player-slider-value"),this.setValue(0);let t=!1;return new o.f(this.slider).addListener({down:(e,n)=>{var r;t=!0,null===(r=this.value)||void 0===r||r.classList.add("hovering")},up:(e,n)=>{var r;t=!1,this.change&&this.change(this.setValue(e/this.slider.clientWidth)),null===(r=this.value)||void 0===r||r.classList.remove("hovering")},moved:(e,n)=>{t&&this.change&&this.change(this.setValue(e/this.slider.clientWidth))},dragged:(t,e)=>{this.change&&this.change(this.setValue(t/this.slider.clientWidth))}}),this.slider}setValue(t){if(t=Math.max(0,Math.min(1,t)),this.snaps){let e=1/this.snaps,n=t%e;n<e*this.snapPercentage?t-=n:n>e-e*this.snapPercentage&&(t=t-n+e),t=Math.max(0,Math.min(1,t))}return this.value.style.width=100*t+"%",t}}function m(element,t){return element.getElementsByClassName(t)[0]}function f(html){let div=document.createElement("div");return div.innerHTML=html,div.children[0]}function w(t,e){for(let i=0;i<t.length;i++)t[i].classList.remove(e)}function v(object){return JSON.stringify(object).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&#34;").replace(/'/g,"&#39;")}const y=new r.q(.478,0,0,.25),k=new r.q(1,1,1,1),x=new r.q(.478,0,0,.5),T=new r.q(1,0,0,.8)}}]);